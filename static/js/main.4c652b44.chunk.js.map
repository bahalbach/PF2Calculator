{"version":3,"sources":["Inputs/CommonInputs.js","Model/Flag.js","Model/MAP.js","Model/Proficiency.js","Model/AbilityScore.js","Model/Modifier.js","Model/AdditionalEffectArray.js","Calculation.js","Inputs/MAPInput.js","Inputs/OverrideInput.js","Inputs/ProficiencyInput.js","Inputs/AbilityScoreInput.js","Inputs/ItemBonusInput.js","Inputs/ModifierInput.js","Inputs/NumberDiceInput.js","Inputs/DieSizeInput.js","Inputs/WeaponSpecInput.js","Inputs/RuneInput.js","PF2App.js","serviceWorker.js","index.js"],"names":["CheckboxInput","props","className","type","checked","onChange","label","CollapsableInput","state","collapseView","handleClick","bind","event","this","setState","onClick","description","listInput","after","React","Component","ByLevelInput","levelList","i","push","key","value","modifier","get","ByLevelInput2","entries","getByLevelEntries","length","SelectLevel","extra","LevelSelection","name","Flag","target","MAP","prevAttacks","initial","changeLevel","changed","Array","fill","level","parseInt","Math","max","Proficiency","untrained","trained","expert","master","legendary","proficiencies","currentProf","values","profArray","maxProf","usedProficiencies","proficiencyValue","every","val","index","profDesc","toName","getInitial","getMax","getLevelAcquired","newProficiencyWithIntial","newProficiencyWithChangedLevel","profValue","initialProf","oldProficiency","newProfs","diff","oldProf","oldLevel","changedProf","newLevel","oldProfs","slice","AbilityScore","boosts","apexLevel","scoreArray","scoreWithApex","currentScore","maxScore","scoreDesc","getMod","newInitial","newBoosts","newApexLevel","console","error","Modifier","generateEntries","currentValue","splice","newModifierFromEntries","currentIndex","mod","desc","newValues","fromChangedEntryLevel","fromChangedEntryValue","AdditionalEffectArray","extraLevelAdded","extraLevelRemoved","effectEntries","nameSet","Set","add","log","fromUpdateEntryEffect","fromUpdateEntryLevelAdded","fromUpdateEntryLevelRemoved","totalBonusDescription","effect","getTotalBonus","attackBonusDescription","getAttackBonus","totalDamageDescription","dice","weaponDiceNum","dieSize","staticDamage","damageAbilityScore","weaponSpec","proficiency","getProf","total","useOverride","isTrue","override","attackAbilityScore","itemBonus","useMiscModifiers","circumstanceBonus","statusBonus","circumstancePenalty","statusPenalty","itemPenalty","untypedPenalty","calculateExpectedDamage","selectedLevel","attackBonus","average","AC","critPercent","bonus","DC","keen","dif","getCritSuccessPercent","getSuccessPercent","MAPInput","levelChange","getDescription","getPrevAttacks","getChanged","OverrideInput","onEffectChange","ProficiencyPresets","isFighter","isMartial","isCaster","isAlchemist","ProficiencyInputList","prof","profList","getProficiencies","map","WeaponProficiencyInput","AbilityScoreInputList","score","scoreList","getBoosts","getApexLevel","AbilityScorePresets","is18a","is16a","is16pp","is14p","is10","AttackAbilityScoreInput","DamageAbilityScoreInput","ItemBonusPresets","isNone","isABPWeaponBonus","isABPSkill1","isABPSkill2","ItemBonusInput","BonusPresets","is","PenaltyPresets","totalModDescription","ModifierInput","WeaponDiceNumPresets","diceNum","isABPWeaponDiceNum","WeaponDiceNumInput","DieSizePresets","isd4","isd6","isd8","isd10","isd12","DieSizeInput","getDieSizeDescription","WeaponSpecPresets","isWSMartial","isWSCaster","WeaponSpecInput","runeNames","SelectRuneName","optionList","RuneTable","runes","rows","getName","getLevelAdded","getLevelRemoved","RuneInput","DEFAULT_PROF","DEFAULT_ABSCORE","DEFAULT_ITEMB","DEFAULT_WS","DEFAULT_DICENUMBER","DEFAULT_DIESIZE","StrikeInput","EffectInput","DisplayOutput","TargetInput","min","step","onTargetChange","PF2App","routines","selectedRoutine","selectedEffect","handleEffectChange","handleTargetChange","propertyName","newPropertyValue","newTarget","update","$set","createUpdated","newRoutines","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.4c652b44.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction CheckboxInput(props) {\r\n    // props: checked, onChange, label\r\n    return (\r\n        <label className=\"CheckboxInput\">\r\n            <input\r\n                type=\"checkbox\"\r\n                checked={props.checked}\r\n                onChange={props.onChange}\r\n            />\r\n            {props.label}\r\n        </label>\r\n    );\r\n}\r\n\r\n\r\nclass CollapsableInput extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            collapseView: true,\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    handleClick(event) {\r\n        this.setState({ collapseView: !this.state.collapseView });\r\n    }\r\n\r\n    render() {\r\n        // if (this.state.collapseView) {\r\n        return (\r\n            <div className=\"CollapsableInput\">\r\n                <div\r\n                    className={this.state.collapseView ? \"Description CollapsableInputDescription Collapsed\" : \"Description CollapsableInputDescription Open\"}\r\n                    onClick={this.handleClick}\r\n                >\r\n                    {this.props.description}\r\n                </div>\r\n                {this.state.collapseView ? \"\" : this.props.listInput}\r\n                {this.props.after}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction ByLevelInput(props) {\r\n    // level: value\r\n    let levelList = [];\r\n    for (let i = 1; i <= 20; i++) {\r\n        levelList.push(\r\n            <div key={i}>\r\n                <label> Level {i}: {}\r\n                    <input\r\n                        type=\"number\"\r\n                        value={props.modifier.get(i)}\r\n                        onChange={props.onChange.bind(null, i)}\r\n                    />\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n    return levelList;\r\n}\r\n\r\nfunction ByLevelInput2(props) {\r\n    // bind array index and key to onChange\r\n    const entries = props.modifier.getByLevelEntries();\r\n    let levelList = [];\r\n    for (let i = 0; i < entries.length; i++) {\r\n        levelList.push(\r\n            <div key={i}>\r\n                <SelectLevel value={entries[i][0]}\r\n                    onChange={props.onChange.bind(null, i, \"EntryLevel\")}\r\n                />\r\n                <input\r\n                    type=\"number\"\r\n                    value={entries[i][1]}\r\n                    onChange={props.onChange.bind(null, i, \"EntryValue\")}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n    levelList.push(\r\n        <div key={entries.length}>\r\n            <SelectLevel value={\"never\"}\r\n                onChange={props.onChange.bind(null, entries.length, \"EntryLevel\")}\r\n            />\r\n            <input\r\n                type=\"number\"\r\n                value={props.modifier.extra}\r\n                onChange={props.onChange.bind(null, entries.length, \"EntryValue\")}\r\n            />\r\n        </div>\r\n    );\r\n    return levelList;\r\n}\r\n\r\n// name, value, onChange\r\nfunction LevelSelection(props) {\r\n    return (\r\n        <div >\r\n            <label> {props.name + \": \"}\r\n                <SelectLevel value={props.value}\r\n                    onChange={props.onChange}\r\n                />\r\n            </label>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction SelectLevel(props) {\r\n    return (\r\n        <select value={props.value}\r\n            onChange={props.onChange}\r\n        >\r\n            <option value=\"never\">\r\n                Never\r\n                                </option>\r\n            <option value=\"1\">\r\n                1\r\n                                </option>\r\n            <option value=\"2\">\r\n                2\r\n                                </option>\r\n            <option value=\"3\">\r\n                3\r\n                                </option>\r\n            <option value=\"4\">\r\n                4\r\n                                </option>\r\n            <option value=\"5\">\r\n                5\r\n                                </option>\r\n            <option value=\"6\">\r\n                6\r\n                                </option>\r\n            <option value=\"7\">\r\n                7\r\n                                </option>\r\n            <option value=\"8\">\r\n                8\r\n                                </option>\r\n            <option value=\"9\">\r\n                9\r\n                                </option>\r\n            <option value=\"10\">\r\n                10\r\n                                </option>\r\n            <option value=\"11\">\r\n                11\r\n                                </option>\r\n            <option value=\"12\">\r\n                12\r\n                                </option>\r\n            <option value=\"13\">\r\n                13\r\n                                </option>\r\n            <option value=\"14\">\r\n                14\r\n                                </option>\r\n            <option value=\"15\">\r\n                15\r\n                                </option>\r\n            <option value=\"16\">\r\n                16\r\n                                </option>\r\n            <option value=\"17\">\r\n                17\r\n                                </option>\r\n            <option value=\"18\">\r\n                18\r\n                                </option>\r\n            <option value=\"19\">\r\n                19\r\n                                </option>\r\n            <option value=\"20\">\r\n                20\r\n                                </option>\r\n        </select>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport { CheckboxInput, CollapsableInput, ByLevelInput, ByLevelInput2, SelectLevel, LevelSelection }","class Flag {\r\n    constructor(value = false) {\r\n        this.value = value;\r\n    }\r\n\r\n    isTrue() {\r\n        return this.value;\r\n    }\r\n\r\n    createUpdated(event) {\r\n        return new Flag(event.target.checked);\r\n    }\r\n}\r\n\r\nexport default Flag","class MAP {\r\n    constructor(prevAttacks = 0, initial = -5, changeLevel = null, changed = -4) {\r\n        // -4, 1, 10, -3 for agile weapon with agile grace at 10\r\n        this.prevAttacks = prevAttacks;\r\n        this.initial = initial;\r\n        this.changeLevel = changeLevel;\r\n        this.changed = changed;\r\n\r\n        this.value = new Array(20).fill(prevAttacks * initial);\r\n        if( changeLevel !== null) {\r\n            for (let level = changeLevel; level <= 20; level++) {\r\n                this.value[level - 1] = prevAttacks * changed;\r\n            }\r\n        }\r\n    }\r\n\r\n    get(level) {\r\n        return this.value[level - 1];\r\n    }\r\n\r\n    getPrevAttacks() {\r\n        return this.prevAttacks;\r\n    }\r\n\r\n    getInitial() {\r\n        return this.initial;\r\n    }\r\n\r\n    getChanged() {\r\n        return this.changed;\r\n    }\r\n\r\n    getDescription(level) {\r\n        if (level) {\r\n            return \"(\" + this.get(level) + \")\";\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    createUpdated(key, event) {\r\n        switch (key) {\r\n            case \"prevAttacks\":\r\n                return new MAP(parseInt(event.target.value), this.initial, this.changeLevel, this.changed);\r\n            case \"initial\":\r\n                return new MAP(this.prevAttacks, parseInt(event.target.value), this.changeLevel, parseInt(event.target.value)+1);\r\n            case \"changeLevel\":\r\n                if (event.target.value === \"never\") {\r\n                    return new MAP(this.prevAttacks, this.initial, null, this.changed);\r\n                }\r\n                return new MAP(this.prevAttacks, this.initial, parseInt(event.target.value), this.changed);\r\n            case \"changed\":\r\n                return new MAP(this.prevAttacks, Math.max(parseInt(event.target.value)-1,-5), this.changeLevel, parseInt(event.target.value));\r\n            default:\r\n                return new MAP();\r\n        }\r\n    }\r\n}\r\n\r\nexport default MAP","const MAX_LEVEL = 20;\r\n\r\nclass Proficiency {\r\n    constructor(untrained = 1, trained = 1, expert = null, master = null, legendary = null) {\r\n        this.proficiencies = [untrained, trained, expert, master, legendary];\r\n        let currentProf = 0;\r\n        if (trained && trained === 1) {\r\n            currentProf = 1;\r\n            if (expert && expert === 1) {\r\n                currentProf = 2;\r\n                if (master && master === 1) {\r\n                    currentProf = 3;\r\n                    if (legendary && legendary === 1) {\r\n                        currentProf = 4;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.initial = currentProf;\r\n        this.values = [];\r\n        this.profArray = [];\r\n\r\n        for (let i = 0; i < MAX_LEVEL; i++) {\r\n            while (this.proficiencies[currentProf + 1] && this.proficiencies[currentProf + 1] === (i + 1)) {\r\n                currentProf++;\r\n            }\r\n            if (currentProf === 0) {\r\n                this.values.push(0);\r\n                this.profArray.push(0);\r\n            } else {\r\n                this.values.push((i + 1) + (currentProf * 2));\r\n                this.profArray.push(currentProf);\r\n            }\r\n        }\r\n        this.maxProf = currentProf;\r\n        this.usedProficiencies = []\r\n        for (let i = this.initial; i <= this.maxProf; i++) {\r\n            this.usedProficiencies.push(i);\r\n        }\r\n    }\r\n\r\n    get(level) {\r\n        return this.values[level - 1];\r\n    }\r\n\r\n    getProf(level) {\r\n        return this.profArray[level-1];\r\n    }\r\n\r\n    getInitial() {\r\n        return this.initial;\r\n    }\r\n\r\n    getMax() {\r\n        return this.maxProf;\r\n    }\r\n\r\n    getLevelAcquired(proficiencyValue) {\r\n        return this.proficiencies[proficiencyValue];\r\n    }\r\n\r\n    getProficiencies() {\r\n        return this.usedProficiencies;\r\n    }\r\n\r\n    isFighter() {\r\n        return this.proficiencies.every((val, index) => val === [1, 1, 1, 5, 13][index]);\r\n    }\r\n    isMartial() {\r\n        return this.proficiencies.every((val, index) => val === [1, 1, 5, 13, null][index]);\r\n    }\r\n    isCaster() {\r\n        return this.proficiencies.every((val, index) => val === [1, 1, 11, null, null][index]);\r\n    }\r\n    isAlchemist() {\r\n        return this.proficiencies.every((val, index) => val === [1, 1, 7, null, null][index]);\r\n    }\r\n    getDescription(level) {\r\n        let profDesc = \" \";\r\n        if (level) {\r\n            profDesc += \"(\" + this.get(level) + \") \";\r\n        }\r\n\r\n        profDesc += Proficiency.toName(this.getInitial()) + \" 1\";\r\n        for (let i = this.getInitial() + 1; i <= this.getMax(); i++) {\r\n            profDesc += \", \" + Proficiency.toName(i) + \" \" + this.getLevelAcquired(i);\r\n        }\r\n\r\n        return profDesc;\r\n    }\r\n\r\n    createUpdated(key, event) {\r\n        switch (key) {\r\n            case \"initial\":\r\n                return Proficiency.newProficiencyWithIntial(event.target.value, this);\r\n            case \"fighter\":\r\n                return new Proficiency(1, 1, 1, 5, 13);\r\n            case \"martial\":\r\n                return new Proficiency(1, 1, 5, 13, null);\r\n            case \"caster\":\r\n                return new Proficiency(1, 1, 11, null, null);\r\n            case \"alchemist\":\r\n                return new Proficiency(1, 1, 7, null, null);\r\n            default:\r\n                return Proficiency.newProficiencyWithChangedLevel(key, parseInt(event.target.value), this);\r\n        }\r\n    }\r\n\r\n    static toName(profValue) {\r\n        return ([\r\n            \"Untrained\",\r\n            \"Trained\",\r\n            \"Expert\",\r\n            \"Master\",\r\n            \"Legendary\"\r\n        ][profValue]);\r\n    }\r\n\r\n    static newProficiencyWithIntial(initialProf, oldProficiency) {\r\n        let newProfs = [1, null, null, null, null];\r\n        const diff = initialProf - oldProficiency.usedProficiencies[0];\r\n        for (let i = 0; i < newProfs.length; i++) {\r\n            if (i <= initialProf) {\r\n                newProfs[i] = 1;\r\n            } else {\r\n                let oldProf = oldProficiency.usedProficiencies[i - initialProf];\r\n                let oldLevel = oldProficiency.getLevelAcquired(oldProf);\r\n                newProfs[oldProf + diff] = oldLevel;\r\n            }\r\n        }\r\n        return new Proficiency(newProfs[0], newProfs[1], newProfs[2], newProfs[3], newProfs[4]);\r\n    }\r\n\r\n    static newProficiencyWithChangedLevel(changedProf, newLevel, oldProficiency) {\r\n        let oldProfs = oldProficiency.proficiencies.slice();\r\n        oldProfs[changedProf] = newLevel;\r\n        //console.log(oldProfs);\r\n        return new Proficiency(...oldProfs);\r\n\r\n    }\r\n}\r\n\r\nexport default Proficiency","const MAX_LEVEL = 20;\r\n\r\nclass AbilityScore {\r\n    constructor(initial = 10, boosts = [false, false, false, false], apexLevel = null) {\r\n        this.initial = initial;\r\n        this.boosts = boosts;\r\n        this.apexLevel = apexLevel;\r\n\r\n        this.scoreArray = [initial];\r\n        let currentScore = initial;\r\n        let scoreWithApex;\r\n\r\n        for (let i = 2; i <= MAX_LEVEL; i++) {\r\n            if ((i === 5 && boosts[0]) || (i === 10 && boosts[1]) || (i === 15 && boosts[2]) || (i === 20 && boosts[3]))\r\n                currentScore < 18 ? currentScore += 2 : currentScore += 1;\r\n            (apexLevel && i >= apexLevel) ? (scoreWithApex = Math.max(18, currentScore + 2)) : scoreWithApex = currentScore;\r\n            this.scoreArray.push(scoreWithApex);\r\n        }\r\n        this.maxScore = scoreWithApex;\r\n    }\r\n\r\n    get(level) {\r\n        return this.scoreArray[level - 1];\r\n    }\r\n\r\n    getMod(level) {\r\n        return parseInt((this.scoreArray[level - 1] - 10) / 2);\r\n    }\r\n\r\n    getInitial() {\r\n        return this.initial;\r\n    }\r\n    getBoosts() {\r\n        return this.boosts;\r\n    }\r\n    getApexLevel() {\r\n        return this.apexLevel;\r\n    }\r\n\r\n    getScores() {\r\n        return [this.initial, ...this.boosts, this.apexLevel];\r\n    }\r\n\r\n    is18a() {\r\n        if (this.initial !== 18) return false;\r\n        if (this.boosts[0] !== true) return false;\r\n        if (this.boosts[1] !== true) return false;\r\n        if (this.boosts[2] !== true) return false;\r\n        if (this.boosts[3] !== true) return false;\r\n        if (this.apexLevel !== 17) return false;\r\n        return true;\r\n    }\r\n\r\n    is16a() {\r\n        if (this.initial !== 16) return false;\r\n        if (this.boosts[0] !== true) return false;\r\n        if (this.boosts[1] !== true) return false;\r\n        if (this.boosts[2] !== true) return false;\r\n        if (this.apexLevel !== 17) return false;\r\n        return true;\r\n    }\r\n\r\n    is16pp() {\r\n        if (this.initial !== 16) return false;\r\n        if (this.boosts[0] !== true) return false;\r\n        if (this.boosts[1] !== true) return false;\r\n        if (this.boosts[2] !== true) return false;\r\n        if (this.apexLevel !== null) return false;\r\n        return true;\r\n    }\r\n\r\n    is14p() {\r\n        if (this.initial !== 14) return false;\r\n        if (this.boosts[0] !== true) return false;\r\n        if (this.boosts[1] !== true) return false;\r\n        if (this.boosts[2] !== false) return false;\r\n        if (this.boosts[3] !== false) return false;\r\n        if (this.apexLevel !== null) return false;\r\n        return true;\r\n    }\r\n\r\n    is10() {\r\n        if (this.initial !== 10) return false;\r\n        if (this.boosts[0] !== false) return false;\r\n        if (this.boosts[1] !== false) return false;\r\n        if (this.boosts[2] !== false) return false;\r\n        if (this.boosts[3] !== false) return false;\r\n        if (this.apexLevel !== null) return false;\r\n        return true;\r\n    }\r\n\r\n    getDescription(level) {\r\n        let scoreDesc = \" \";\r\n        if (level) {\r\n            scoreDesc += \"(\" + this.getMod(level) + \") \";\r\n        }\r\n\r\n        scoreDesc += this.initial + \" to \" + this.maxScore;\r\n\r\n        return scoreDesc;\r\n    }\r\n\r\n    createUpdated(key, event) {\r\n        let newInitial = this.initial;\r\n        let newBoosts = this.boosts.slice();\r\n        let newApexLevel = this.apexLevel;\r\n        switch (key) {\r\n            case \"18a\":\r\n                return new AbilityScore(18, [true, true, true, true], 17);\r\n            case \"16a\":\r\n                return new AbilityScore(16, [true, true, true, false], 17);\r\n            case \"16++\":\r\n                return new AbilityScore(16, [true, true, true, false], null);\r\n            case \"14+\":\r\n                return new AbilityScore(14, [true, true, false, false], null);\r\n            case \"10\":\r\n                return new AbilityScore(10, [false, false, false, false], null);\r\n\r\n            case \"initial\":\r\n                newInitial = parseInt(event.target.value);\r\n                break;\r\n            case 0:\r\n            case 1:\r\n            case 2:\r\n            case 3:\r\n                newBoosts[key] = event.target.checked;\r\n                break;\r\n            case \"apex\":\r\n                let value = event.target.value;\r\n                if (value === \"never\") value = null;\r\n                newApexLevel = value;\r\n                break;\r\n            default:\r\n                console.error(\"Unhandled ability score\");\r\n        }\r\n        return new AbilityScore(newInitial, newBoosts, newApexLevel);\r\n    }\r\n}\r\n/*\r\n\r\n        this.proficiencies = [untrained,trained,expert,master,legendary];\r\n        let currentProf = 0;\r\n        if (trained && trained===1) {\r\n            currentProf = 1;\r\n            if (expert && expert===1) {\r\n                currentProf = 2;\r\n                if (master && master===1) {\r\n                    currentProf = 3;\r\n                    if (legendary && legendary===1) {\r\n                        currentProf = 4;\r\n        }}}}\r\n        this.initial = currentProf;\r\n        this.profArray = [];\r\n\r\n        for(let i=0; i<MAX_LEVEL; i++) {\r\n            while (this.proficiencies[currentProf+1] && this.proficiencies[currentProf+1] === (i+1)) {\r\n                currentProf++;\r\n            }\r\n            if (currentProf===0) {\r\n                this.profArray.push(0);\r\n            } else {\r\n                this.profArray.push((i+1) + (currentProf*2));\r\n            }\r\n        }\r\n        this.maxProf = currentProf;\r\n        this.usedProficiencies = []\r\n        for(let i=this.initial; i<=this.maxProf; i++) {\r\n            this.usedProficiencies.push(i);\r\n        }\r\n    }\r\n\r\n    get(level) {\r\n        return this.profArray[level-1];\r\n    }\r\n\r\n    getInitial() {\r\n        return this.initial;\r\n    }\r\n\r\n    getMax() {\r\n        return this.maxProf;\r\n    }\r\n\r\n    getLevelAcquired(proficiencyValue) {\r\n        return this.proficiencies[proficiencyValue];\r\n    }\r\n\r\n    getProficiencies() {\r\n        return this.usedProficiencies;\r\n    }\r\n\r\n    static toName(profValue) {\r\n        return ([\r\n            \"Untrained\",\r\n            \"Trained\",\r\n            \"Expert\",\r\n            \"Master\",\r\n            \"Legendary\"\r\n        ][profValue]);\r\n    }\r\n\r\n    static newProficiencyWithIntial(initialProf, oldProficiency) {\r\n        let newProfs = [1,null,null,null,null];\r\n        const diff = initialProf - oldProficiency.usedProficiencies[0];\r\n        for(let i=0; i<newProfs.length; i++) {\r\n            if (i <= initialProf) {\r\n                newProfs[i] = 1;\r\n            } else {\r\n                let oldProf = oldProficiency.usedProficiencies[i-initialProf];\r\n                let oldLevel = oldProficiency.getLevelAcquired(oldProf);\r\n                newProfs[oldProf+diff] = oldLevel;\r\n            }\r\n        }\r\n        return new Proficiency(newProfs[0], newProfs[1], newProfs[2], newProfs[3], newProfs[4]);\r\n    }\r\n\r\n    static newProficiencyWithChangedLevel(changedProf, newLevel, oldProficiency) {\r\n        let oldProfs = oldProficiency.proficiencies.slice();\r\n        oldProfs[changedProf] = newLevel;\r\n        console.log(oldProfs);\r\n        return new Proficiency(...oldProfs);\r\n\r\n    }\r\n}\r\n*/\r\n\r\nexport default AbilityScore","// Store:\r\n//     item bonuses\r\n//     if using other bonuses/penalties\r\n//     item penalties\r\n//     status bonuses\r\n//     status penalties\r\n//     circumstance bonuses\r\n//     circumstance penalties\r\n//     untyped penalties (other than MAP)\r\n\r\n// Also can be used for damage bonuses like Weapon specialization \r\n\r\nclass Modifier {\r\n    constructor(values = null) {\r\n        if (values === null) {\r\n            this.values = new Array(20).fill(0);\r\n            this.entries = [[1, 0]];\r\n            this.extra = 0;\r\n        } else {\r\n            this.values = values;\r\n            this.generateEntries();\r\n            this.extra = 0;\r\n        }\r\n        // console.log(this.values);\r\n        // console.log(this.entries);\r\n    }\r\n\r\n    get(level) {\r\n        return this.values[level - 1]\r\n    }\r\n\r\n    is(value) {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== value) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    generateEntries() {\r\n        let currentValue = this.values[0];\r\n        this.entries = [[1, currentValue]];\r\n        for (let level = 2; level <= 20; level++) {\r\n            if (currentValue !== this.values[level - 1]) {\r\n                currentValue = this.values[level - 1];\r\n                this.entries.push([level, currentValue]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getByLevelEntries() {\r\n        return this.entries;\r\n    }\r\n\r\n    fromChangedEntryLevel(index, value) {\r\n        if (index === this.entries.length) {\r\n            // TODO: place value in entries at appropiate location\r\n            for (let i = 0; i <= this.entries.length; i++) {\r\n                if (i === this.entries.length || this.entries[i][0] > value) {\r\n                    this.entries.splice(i, 0, [value, this.extra]);\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            this.entries[index][0] = value;\r\n        }\r\n\r\n        return this.newModifierFromEntries(this.entries, this.extra);\r\n    }\r\n\r\n    fromChangedEntryValue(index, value) {\r\n\r\n        if (index === this.entries.length) {\r\n            this.extra = value;\r\n        } else {\r\n            this.entries[index][1] = value;\r\n        }\r\n\r\n        return this.newModifierFromEntries(this.entries, this.extra);\r\n    }\r\n\r\n    newModifierFromEntries(entries, extra = 0) {\r\n        let values = [];\r\n        let currentValue = 0;\r\n        let currentIndex = 0;\r\n        for (let level = 1; level <= 20; level++) {\r\n            if (entries[currentIndex] && entries[currentIndex][0] === level) {\r\n                currentValue = entries[currentIndex][1];\r\n                if (!currentValue) currentValue = 0;\r\n                currentIndex++;\r\n            }\r\n            values.push(currentValue);\r\n        }\r\n        const mod = new Modifier(values);\r\n        mod.extra = extra;\r\n        return mod;\r\n    }\r\n\r\n    getDescription(level) {\r\n        let desc = \" \";\r\n        if (level) {\r\n            desc += \"(\" + this.get(level) + \") \";\r\n        }\r\n\r\n        desc += this.values[0] + \" to \" + this.values[19];\r\n\r\n        return desc;\r\n    }\r\n\r\n    createUpdated(key, event, index) {\r\n        let newValues;\r\n        switch (key) {\r\n            case \"EntryLevel\":\r\n                return this.fromChangedEntryLevel(index, parseInt(event.target.value));\r\n\r\n            case \"EntryValue\":\r\n                return this.fromChangedEntryValue(index, parseInt(event.target.value));\r\n\r\n            case \"0\":\r\n                newValues = new Array(20).fill(0);\r\n                break;\r\n            case \"+1\":\r\n            case \"-1\":\r\n                newValues = new Array(20).fill(1);\r\n                break;\r\n            case \"+2\":\r\n            case \"-2\":\r\n                newValues = new Array(20).fill(2);\r\n                break;\r\n            case \"+3\":\r\n            case \"-3\":\r\n                newValues = new Array(20).fill(3);\r\n                break;\r\n            case \"+4\":\r\n            case \"-4\":\r\n                newValues = new Array(20).fill(4);\r\n                break;\r\n\r\n            case \"WSMartial\":\r\n                newValues = new Array(20).fill(0);\r\n                for (let level = 7; level <= 20; level++) {\r\n                    if (level < 15) {\r\n                        newValues[level - 1] = 1;\r\n                    }\r\n                    if (level >= 15) {\r\n                        newValues[level - 1] = 2;\r\n                    }\r\n                }\r\n                break;\r\n            case \"WSCaster\":\r\n                newValues = new Array(20).fill(0);\r\n                for (let level = 13; level <= 20; level++) {\r\n                    newValues[level - 1] = 1;\r\n                }\r\n                break;\r\n\r\n            case \"d4\":\r\n                newValues = new Array(20).fill(4);\r\n                break;\r\n            case \"d6\":\r\n                newValues = new Array(20).fill(6);\r\n                break;\r\n            case \"d8\":\r\n                newValues = new Array(20).fill(8);\r\n                break;\r\n            case \"d10\":\r\n                newValues = new Array(20).fill(10);\r\n                break;\r\n            case \"d12\":\r\n                newValues = new Array(20).fill(12);\r\n                break;\r\n\r\n            case \"None\":\r\n                newValues = new Array(20).fill(0);\r\n                break;\r\n            case \"ABPWeaponBonus\":\r\n                newValues = new Array(20).fill(0);\r\n                for (let i = 0; i < 20; i++) {\r\n                    if (i + 1 >= 16) { newValues[i] = 3; continue; }\r\n                    if (i + 1 >= 10) { newValues[i] = 2; continue; }\r\n                    if (i + 1 >= 2) { newValues[i] = 1; continue; }\r\n                }\r\n                break;\r\n            case \"ABPSkill1\":\r\n                newValues = new Array(20).fill(0);\r\n                for (let i = 0; i < 20; i++) {\r\n                    if (i + 1 >= 17) { newValues[i] = 3; continue; }\r\n                    if (i + 1 >= 9) { newValues[i] = 2; continue; }\r\n                    if (i + 1 >= 3) { newValues[i] = 1; continue; }\r\n                }\r\n                break;\r\n            case \"ABPSkill2\":\r\n                newValues = new Array(20).fill(0);\r\n                for (let i = 0; i < 20; i++) {\r\n                    if (i + 1 >= 20) { newValues[i] = 3; continue; }\r\n                    if (i + 1 >= 13) { newValues[i] = 2; continue; }\r\n                    if (i + 1 >= 6) { newValues[i] = 1; continue; }\r\n                }\r\n                break;\r\n\r\n            case \"One\":\r\n                newValues = new Array(20).fill(1);\r\n                break;\r\n            case \"ABPWeaponDiceNum\":\r\n                newValues = new Array(20).fill(1);\r\n                for (let i = 0; i < 20; i++) {\r\n                    if (i + 1 >= 19) { newValues[i] = 4; continue; }\r\n                    if (i + 1 >= 12) { newValues[i] = 3; continue; }\r\n                    if (i + 1 >= 4) { newValues[i] = 2; continue; }\r\n                }\r\n                break;\r\n\r\n            default:\r\n                newValues = this.values.slice();\r\n                newValues[key - 1] = parseInt(event.target.value);\r\n        }\r\n        return new Modifier(newValues);\r\n    }\r\n\r\n    // For acting as Weapon Specialization--------------------------\r\n    isWSMartial() {\r\n        for (let level = 1; level <= 20; level++) {\r\n            if (level < 7) {\r\n                if (this.values[level - 1] !== 0) return false;\r\n            }\r\n            if (level >= 7 && level < 15) {\r\n                if (this.values[level - 1] !== 1) return false;\r\n            }\r\n            if (level >= 15) {\r\n                if (this.values[level - 1] !== 2) return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isWSCaster() {\r\n        for (let level = 1; level <= 20; level++) {\r\n            if (level < 13) {\r\n                if (this.values[level - 1] !== 0) return false;\r\n            }\r\n            if (level >= 13) {\r\n                if (this.values[level - 1] !== 1) return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // For acting as Dice Number-----------------------------------\r\n    isABPWeaponDiceNum() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (i + 1 >= 19) { if (this.values[i] !== 4) return false; else continue; }\r\n            if (i + 1 >= 12) { if (this.values[i] !== 3) return false; else continue; }\r\n            if (i + 1 >= 4) { if (this.values[i] !== 2) return false; else continue; }\r\n            if (this.values[i] !== 1) return false; else continue;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // For acting as Die Size--------------------------------------\r\n    getDieSizeDescription(level) {\r\n        let desc = \" \";\r\n        if (level) {\r\n            desc += \"(d\" + this.get(level) + \") \";\r\n        }\r\n\r\n        desc += \"d\" + this.values[0] + \" to d\" + this.values[19];\r\n\r\n        return desc;\r\n    }\r\n\r\n    isd4() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== 4) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isd6() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== 6) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isd8() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== 8) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isd10() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== 10) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isd12() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== 12) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // For acting as item bonus\r\n    isNone() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (this.values[i] !== 0) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isABPWeaponBonus() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (i + 1 >= 16) { if (this.values[i] !== 3) return false; else continue; }\r\n            if (i + 1 >= 10) { if (this.values[i] !== 2) return false; else continue; }\r\n            if (i + 1 >= 2) { if (this.values[i] !== 1) return false; else continue; }\r\n            if (this.values[i] !== 0) return false; else continue;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isABPSkill1() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (i + 1 >= 17) { if (this.values[i] !== 3) return false; else continue; }\r\n            if (i + 1 >= 9) { if (this.values[i] !== 2) return false; else continue; }\r\n            if (i + 1 >= 3) { if (this.values[i] !== 1) return false; else continue; }\r\n            if (this.values[i] !== 0) return false; else continue;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    isABPSkill2() {\r\n        for (let i = 0; i < 20; i++) {\r\n            if (i + 1 >= 20) { if (this.values[i] !== 3) return false; else continue; }\r\n            if (i + 1 >= 13) { if (this.values[i] !== 2) return false; else continue; }\r\n            if (i + 1 >= 6) { if (this.values[i] !== 1) return false; else continue; }\r\n            if (this.values[i] !== 0) return false; else continue;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Modifier","class AdditionalEffectArray {\r\n    // has an array of effect entries. \r\n    // Each effect entry has an Name, level added, and level removed\r\n\r\n    constructor(values=[], extraLevelAdded=1,extraLevelRemoved=20) {\r\n        this.length = values.length;\r\n        this.effectEntries = values;\r\n        this.extraLevelAdded = extraLevelAdded;\r\n        this.extraLevelRemoved = extraLevelRemoved;\r\n    }\r\n\r\n    getName(index) {\r\n        if ( index === this.length ) {\r\n            return \"None\";\r\n        }\r\n        return this.effectEntries[index][0];\r\n    }\r\n\r\n    getLevelAdded(index) {\r\n        if ( index === this.length ) {\r\n            return this.extraLevelAdded;\r\n        }\r\n        return this.effectEntries[index][1];\r\n    }\r\n\r\n    getLevelRemoved(index) {\r\n        if ( index === this.length ) {\r\n            return this.extraLevelRemoved;\r\n        }\r\n        return this.effectEntries[index][2];\r\n    }\r\n\r\n    getDescription() {\r\n        const nameSet = new Set();\r\n        let desc = \"Runes: \";\r\n        for(let i=0; i<this.length; i++) {\r\n            nameSet.add(this.effectEntries[i][0]);\r\n        }\r\n        for (let name of nameSet) {\r\n            desc += \" \" + name;\r\n        }\r\n        return desc;\r\n    }\r\n\r\n    fromUpdateEntryEffect(index, value) {\r\n        let newValues = this.effectEntries.slice();\r\n\r\n        if ( index === this.length ) {\r\n            console.log(\"here\")\r\n            newValues.push([value,this.extraLevelAdded,this.extraLevelRemoved]);\r\n        }\r\n        else if ( value === \"None\") {\r\n            newValues.splice(index, 1);\r\n        }\r\n        else {\r\n            newValues[index][0] = value;\r\n        }\r\n\r\n        return new AdditionalEffectArray(newValues, this.extraLevelAdded, this.extraLevelRemoved);\r\n    }\r\n\r\n    fromUpdateEntryLevelAdded(index, value) {\r\n        let newValues = this.effectEntries.slice();\r\n        if (!value) value=0;\r\n\r\n        if ( index === this.length ) {\r\n            this.extraLevelAdded = value;\r\n        }\r\n        else {\r\n            newValues[index][1] = value;\r\n        }\r\n\r\n        return new AdditionalEffectArray(newValues, this.extraLevelAdded, this.extraLevelRemoved);\r\n    }\r\n\r\n    fromUpdateEntryLevelRemoved(index, value) {\r\n        let newValues = this.effectEntries.slice();\r\n        if (!value) value=0;\r\n\r\n        if ( index === this.length ) {\r\n            this.extraLevelRemoved = value;\r\n        }\r\n        else {\r\n            newValues[index][2] = value;\r\n        }\r\n\r\n        return new AdditionalEffectArray(newValues, this.extraLevelAdded, this.extraLevelRemoved);\r\n    }\r\n\r\n    createUpdated(key, event, index ) {\r\n        switch (key) {\r\n            case \"EntryName\":\r\n                return this.fromUpdateEntryEffect(index, event.target.value);\r\n\r\n            case \"LevelAdded\":\r\n                return this.fromUpdateEntryLevelAdded(index, parseInt(event.target.value));\r\n\r\n            case \"LevelRemoved\":\r\n                return this.fromUpdateEntryLevelRemoved(index, parseInt(event.target.value));\r\n        \r\n            default:\r\n                return new AdditionalEffectArray();\r\n        }\r\n    }\r\n}\r\n\r\nclass AdditionalEffectItem {\r\n\r\n}\r\n\r\nexport default AdditionalEffectArray","function totalBonusDescription(effect, level) {\r\n    let desc = \"\";\r\n    if (level) {\r\n        desc += \"(\" + getTotalBonus(effect, level) + \") \";\r\n    }\r\n    desc += getTotalBonus(effect, 1) + \" to \" + getTotalBonus(effect, 20);\r\n    return desc;\r\n}\r\n\r\nfunction attackBonusDescription(effect, level) {\r\n    let desc = \"\";\r\n    if (level) {\r\n        desc += \"(\" + getAttackBonus(effect, level) + \") \";\r\n    }\r\n    desc += getAttackBonus(effect, 1) + \" to \" + getAttackBonus(effect, 20);\r\n    return desc;\r\n}\r\n\r\n\r\n\r\nfunction totalDamageDescription(effect, level) {\r\n    // damageAbilityScore: new AbilityScore(),\r\n    // weaponDiceNum: new DiceNumber(),\r\n    // dieSize: new DieSize(),\r\n    // weaponSpec\r\n    if (level) {\r\n        const dice = \"\" + effect.weaponDiceNum.get(level) + \"d\" + effect.dieSize.get(level);\r\n        const staticDamage = (effect.damageAbilityScore.getMod(level) + (effect.weaponSpec.get(level) * effect.proficiency.getProf(level)));\r\n        const average = effect.weaponDiceNum.get(level) * (effect.dieSize.get(level) + 1) / 2 + staticDamage;\r\n        return \"(\" + average + \") \" + dice + \" + \" + staticDamage;\r\n    }\r\n    return \"\";\r\n}\r\n\r\nfunction getAttackBonus(effect, level) {\r\n    let total;\r\n\r\n    if (effect.useOverride.isTrue()) {\r\n        total = effect.override.get(level);\r\n    }\r\n    else {\r\n        total = effect.attackAbilityScore.getMod(level) + effect.proficiency.get(level) + effect.itemBonus.get(level);\r\n    }\r\n    total += effect.MAP.get(level);\r\n\r\n    return total;\r\n}\r\n\r\nfunction getTotalBonus(effect, level) {\r\n    let total = getAttackBonus(effect, level);\r\n\r\n    if (effect.useMiscModifiers.isTrue()) {\r\n\r\n        total += (\r\n            effect.circumstanceBonus.get(level) +\r\n            effect.statusBonus.get(level) +\r\n            -effect.circumstancePenalty.get(level) +\r\n            -effect.statusPenalty.get(level) +\r\n            -effect.itemPenalty.get(level) +\r\n            -effect.untypedPenalty.get(level)\r\n        );\r\n    }\r\n\r\n    return total;\r\n}\r\n\r\nfunction getCritSuccessPercent(bonus, DC, keen=false) {\r\n    const dif = bonus-DC;\r\n    let chance;\r\n    if (dif < -20) {\r\n        chance = 0;\r\n    } else if (dif < -9) {\r\n        chance = keen?10:5;\r\n    } else if (dif < 8) {\r\n        chance = (11 + dif) * 5;\r\n    } else {\r\n        chance = 95;\r\n    }\r\n      \r\n    return chance;\r\n}\r\n\r\nfunction getSuccessPercent(bonus, DC, keen=false) {\r\n    const dif = bonus-DC;\r\n    let chance;\r\n    if (dif < -29) {\r\n        chance = 0;\r\n    } else if (dif < -20) {\r\n        chance = 5;\r\n    } else if (dif < -9) {\r\n        chance = (keen?19:20 + dif) *5;\r\n    } else if (dif < -1) {\r\n        chance = 50;\r\n    } else if (dif < 9) {\r\n        chance = (8 - dif) * 5;\r\n    } else {\r\n        chance = 5;\r\n    }\r\n      \r\n    return chance;\r\n}\r\n\r\nfunction calculateExpectedDamage(effect, target) {\r\n    const level = target.selectedLevel;\r\n    if (!level) return;\r\n    const attackBonus = getTotalBonus(effect, level);\r\n    const diceNum = effect.weaponDiceNum.get(level);\r\n    const dieSize = effect.dieSize.get(level);\r\n    const staticDamage = (effect.damageAbilityScore.getMod(level) + (effect.weaponSpec.get(level) * effect.proficiency.getProf(level)));\r\n    const average = diceNum * (dieSize+1)/2 + staticDamage;\r\n    const AC = target.AC;\r\n    const critPercent = getCritSuccessPercent(attackBonus,AC);\r\n    const hitPercent = getSuccessPercent(attackBonus,AC);\r\n    return (hitPercent * average + critPercent * average * 2) / 100;\r\n}\r\n\r\nexport { totalBonusDescription, attackBonusDescription, totalDamageDescription, calculateExpectedDamage }","import React from 'react';\r\nimport { SelectLevel, CollapsableInput } from './CommonInputs'\r\n\r\nfunction MAPInput(props) {\r\n    // props: effect, onChange, selectedLevel\r\n    let MAP = props.effect.MAP;\r\n    let levelChange = MAP.levelChange;\r\n    if (levelChange === null) {\r\n        levelChange = \"never\"\r\n    }\r\n\r\n    return (\r\n        <CollapsableInput\r\n            description={\"Multiple Attack Penalty: \" + MAP.getDescription(props.selectedLevel)}\r\n            listInput={<div className=\"MAPInput\" >\r\n                <div>\r\n                    Number of Previous Attacks: {}\r\n                    <select\r\n                        value={MAP.getPrevAttacks()}\r\n                        onChange={props.onChange.bind(null, \"prevAttacks\")}\r\n                    >\r\n                        <option value=\"0\">\r\n                            0\r\n                                </option>\r\n                        <option value=\"1\">\r\n                            1\r\n                                </option>\r\n                        <option value=\"2\">\r\n                            2+\r\n                                </option>\r\n\r\n                    </select>\r\n                    {} x {}\r\n                    <select\r\n                        value={MAP.getInitial()}\r\n                        onChange={props.onChange.bind(null, \"initial\")}\r\n                    >\r\n                        <option value=\"-5\">\r\n                            -5\r\n                                </option>\r\n                        <option value=\"-4\">\r\n                            -4\r\n                                </option>\r\n                        <option value=\"-3\">\r\n                            -3\r\n                                </option>\r\n                        <option value=\"-2\">\r\n                            -2\r\n                                </option>\r\n                        <option value=\"-1\">\r\n                            -1\r\n                                </option>\r\n                    </select>\r\n                </div>\r\n                <div>\r\n                    (At level: {}\r\n                    <SelectLevel value={levelChange}\r\n                        onChange={props.onChange.bind(null, \"changeLevel\")}\r\n                    />\r\n                         , Change to: {}\r\n                    <select\r\n                        value={MAP.getChanged()}\r\n                        onChange={props.onChange.bind(null, \"changed\")}\r\n                    >\r\n                        <option value=\"-5\">\r\n                            -5\r\n                                </option>\r\n                        <option value=\"-4\">\r\n                            -4\r\n                                </option>\r\n                        <option value=\"-3\">\r\n                            -3\r\n                                </option>\r\n                        <option value=\"-2\">\r\n                            -2\r\n                                </option>\r\n                        <option value=\"-1\">\r\n                            -1\r\n                                </option>\r\n                        <option value=\"0\">\r\n                            0\r\n                                </option>\r\n                    </select>\r\n                    )\r\n</div>\r\n\r\n\r\n            </div>}\r\n        />\r\n\r\n    );\r\n}\r\n\r\nexport default MAPInput","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput } from './CommonInputs'\r\n\r\n\r\nexport function OverrideInput(props) {\r\n    // props: effect, onEffectChange\r\n    return (\r\n        <div className=\"InputGroup OverrideInput\">\r\n            <CheckboxInput\r\n                checked={props.effect.useOverride.isTrue()}\r\n                onChange={props.onEffectChange.bind(null, \"useOverride\", null)}\r\n                label=\"Override Attack Bonus?\"\r\n            />\r\n            <CollapsableInput\r\n                description={\"Override: \" + props.effect.override.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <ByLevelInput\r\n                        modifier={props.effect.override}\r\n                        onChange={props.onEffectChange.bind(null, \"override\", null)}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OverrideInput\r\n\r\n\r\n","import React from 'react';\r\nimport Proficiency from '../Model/Proficiency';\r\nimport { CheckboxInput, CollapsableInput, LevelSelection } from './CommonInputs'\r\n\r\nfunction ProficiencyPresets(props) {\r\n    return (\r\n        <div className=\"Presets ProficiencyPresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.proficiency.isFighter()}\r\n                onChange={props.onChange.bind(null, \"fighter\")}\r\n                label={\"Fighter\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.proficiency.isMartial()}\r\n                onChange={props.onChange.bind(null, \"martial\")}\r\n                label={\"Martial\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.proficiency.isCaster()}\r\n                onChange={props.onChange.bind(null, \"caster\")}\r\n                label={\"Caster\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.proficiency.isAlchemist()}\r\n                onChange={props.onChange.bind(null, \"alchemist\")}\r\n                label={\"Alchemist/Warpriest\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ProficiencyInputList(props) {\r\n    // props: proficiency, onChange\r\n    \r\n    let prof = props.proficiency;\r\n\r\n    let profList = prof.getProficiencies().map(\r\n        (profValue, index) => {\r\n            if (index === 0) {\r\n                return (\r\n                    <div key=\"initial\">\r\n                        <label> Initial: {}\r\n                            <select\r\n                                value={prof.getInitial()}\r\n                                onChange={props.onChange.bind(null,\"initial\")}\r\n                            >\r\n                                <option value=\"0\">\r\n                                    Untrained\r\n                                </option>\r\n                                <option value=\"1\">\r\n                                    Trained\r\n                                </option>\r\n                                <option value=\"2\">\r\n                                    Expert\r\n                                </option>\r\n                                <option value=\"3\">\r\n                                    Master\r\n                                </option>\r\n                                <option value=\"4\">\r\n                                    Legendary\r\n                                </option>\r\n                            </select>\r\n                        </label>\r\n                    </div>\r\n                );\r\n            } else {\r\n                let value = prof.getLevelAcquired(profValue);\r\n                if (value === null) value = \"never\";\r\n                return (\r\n                    <LevelSelection key={profValue} name={Proficiency.toName(profValue)}\r\n                        value={value} onChange={props.onChange.bind(null, profValue)}\r\n                    />\r\n                );\r\n            }\r\n        }\r\n    );\r\n    if (prof.getMax() < 4) {\r\n        profList.push(<LevelSelection key={prof.getMax() + 1} name={Proficiency.toName(prof.getMax() + 1)}\r\n            value=\"never\" onChange={props.onChange.bind(null, prof.getMax() + 1)}\r\n        />);\r\n    }\r\n\r\n    return (\r\n        <div className=\"ProficiencyInputList\">\r\n            {profList}\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nfunction WeaponProficiencyInput(props) {\r\n    // props: effect, onEffectChange, selectedLevel\r\n    return (\r\n        <div className=\"InputGroup WeaponProficiencyInput\">\r\n            <ProficiencyPresets\r\n                proficiency={props.effect.proficiency}\r\n                onChange={props.onEffectChange.bind(null, \"proficiency\", null)}\r\n            />\r\n            <CollapsableInput\r\n                description={\"Proficiency: \" + props.effect.proficiency.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <ProficiencyInputList\r\n                        proficiency={props.effect.proficiency}\r\n                        onChange={props.onEffectChange.bind(null, \"proficiency\", null)}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { WeaponProficiencyInput }","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, LevelSelection } from './CommonInputs'\r\n\r\nfunction AbilityScoreInputList(props) {\r\n    // props: score, onChange\r\n\r\n    const score = props.score;\r\n    let scoreList = [];\r\n    scoreList.push(\r\n        <div key=\"initial\">\r\n            <label> Initial: {}\r\n                <select\r\n                    value={score.getInitial()}\r\n                    onChange={props.onChange.bind(null, \"initial\")}\r\n                >\r\n                    <option value=\"8\">\r\n                        8\r\n                    </option>\r\n                    <option value=\"10\">\r\n                        10\r\n                    </option>\r\n                    <option value=\"12\">\r\n                        12\r\n                    </option>\r\n                    <option value=\"14\">\r\n                        14\r\n                    </option>\r\n                    <option value=\"16\">\r\n                        16\r\n                    </option>\r\n                    <option value=\"18\">\r\n                        18\r\n                    </option>\r\n                </select>\r\n            </label>\r\n        </div>\r\n    );\r\n    const boosts = score.getBoosts();\r\n    for (let i = 0; i < boosts.length; i++) {\r\n        scoreList.push(\r\n            <div key={i}>\r\n                <label> Boost {(1 + i) * 5}: {}\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        checked={boosts[i]}\r\n                        onChange={props.onChange.bind(null, i)}\r\n                    />\r\n                </label>\r\n            </div>\r\n        );\r\n    }\r\n    let apexLevel = score.getApexLevel();\r\n    if (apexLevel === null) apexLevel = \"never\";\r\n    scoreList.push(\r\n        <LevelSelection key=\"apex\" name=\"Apex Level\"\r\n            value={apexLevel} onChange={props.onChange.bind(null, \"apex\")}\r\n        />\r\n    );\r\n\r\n    return (\r\n        <div className=\"AbilityScoreInput\">\r\n            {scoreList}\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nfunction AbilityScorePresets(props) {\r\n    // props: score, onChange\r\n    return (\r\n        <div className=\"Presets AbilityScorePresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.score.is18a()}\r\n                onChange={props.onChange.bind(null, \"18a\")}\r\n                label={\"18a\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.score.is16a()}\r\n                onChange={props.onChange.bind(null, \"16a\")}\r\n                label={\"16a\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.score.is16pp()}\r\n                onChange={props.onChange.bind(null, \"16++\")}\r\n                label={\"16++\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.score.is14p()}\r\n                onChange={props.onChange.bind(null, \"14+\")}\r\n                label={\"14+\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.score.is10()}\r\n                onChange={props.onChange.bind(null, \"10\")}\r\n                label={\"10\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction AttackAbilityScoreInput(props) {\r\n    // props: effect, onChange\r\n    return (\r\n        <div className=\"InputGroup AbilityScoreInput\">\r\n            <AbilityScorePresets\r\n                score={props.effect.attackAbilityScore}\r\n                onChange={props.onChange}\r\n            />\r\n            <CollapsableInput\r\n                description={\"Attack Ability Score: \" + props.effect.attackAbilityScore.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <AbilityScoreInputList\r\n                        score={props.effect.attackAbilityScore}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction DamageAbilityScoreInput(props) {\r\n    // props: effect, onChange\r\n    return (\r\n        <div className=\"InputGroup AbilityScoreInput\">\r\n            <AbilityScorePresets\r\n                score={props.effect.damageAbilityScore}\r\n                onChange={props.onChange}\r\n            />\r\n            <CollapsableInput\r\n                description={\"Damage Ability Score: \" + props.effect.damageAbilityScore.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <AbilityScoreInputList\r\n                        score={props.effect.damageAbilityScore}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { AttackAbilityScoreInput, DamageAbilityScoreInput }","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput2 } from './CommonInputs'\r\n\r\nfunction ItemBonusPresets(props) {\r\n    return (\r\n        <div className=\"Presets ItemBonusPresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.itemBonus.isNone()}\r\n                onChange={props.onChange.bind(null, \"None\")}\r\n                label={\"None\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.itemBonus.isABPWeaponBonus()}\r\n                onChange={props.onChange.bind(null, \"ABPWeaponBonus\")}\r\n                label={\"ABP Weapon\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.itemBonus.isABPSkill1()}\r\n                onChange={props.onChange.bind(null, \"ABPSkill1\")}\r\n                label={\"ABP Skill Item 1\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.itemBonus.isABPSkill2()}\r\n                onChange={props.onChange.bind(null, \"ABPSkill2\")}\r\n                label={\"ABP Skill Item 2\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction ItemBonusInput(props) {\r\n    return (\r\n        <div className=\"InputGroup ItemBonusInput\">\r\n            <ItemBonusPresets\r\n                itemBonus={props.effect.itemBonus}\r\n                onChange={props.onChange.bind(null,null)}\r\n            />\r\n            <CollapsableInput\r\n                description={\"Item Bonus: \" + props.effect.itemBonus.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <ByLevelInput2\r\n                        modifier={props.effect.itemBonus}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n            />\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default ItemBonusInput","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput2 } from './CommonInputs'\r\n\r\nfunction BonusPresets(props) {\r\n    return (\r\n        <div className=\"Presets BonusPresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(0)}\r\n                onChange={props.onChange.bind(null, \"0\")}\r\n                label={\"+0\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(1)}\r\n                onChange={props.onChange.bind(null, \"+1\")}\r\n                label={\"+1\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(2)}\r\n                onChange={props.onChange.bind(null, \"+2\")}\r\n                label={\"+2\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(3)}\r\n                onChange={props.onChange.bind(null, \"+3\")}\r\n                label={\"+3\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(4)}\r\n                onChange={props.onChange.bind(null, \"+4\")}\r\n                label={\"+4\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction PenaltyPresets(props) {\r\n    return (\r\n        <div className=\"Presets PenaltyPresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(0)}\r\n                onChange={props.onChange.bind(null, \"0\")}\r\n                label={\"-0\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(1)}\r\n                onChange={props.onChange.bind(null, \"+1\")}\r\n                label={\"-1\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(2)}\r\n                onChange={props.onChange.bind(null, \"+2\")}\r\n                label={\"-2\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(3)}\r\n                onChange={props.onChange.bind(null, \"+3\")}\r\n                label={\"-3\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.modifier.is(4)}\r\n                onChange={props.onChange.bind(null, \"+4\")}\r\n                label={\"-4\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n/* <CheckboxInput\r\n                checked={props.effect.useMiscModifiers.isTrue()}\r\n                onChange={props.onEffectChange.bind(null, \"useMiscModifiers\")}\r\n                label=\"Add Circumstance/Status Bonuses/Penalties\"\r\n            /> */\r\nfunction totalModDescription(effect, level) {\r\n    if (level) {\r\n        let total = (effect.circumstanceBonus.get(level) +\r\n            effect.statusBonus.get(level) +\r\n            -effect.circumstancePenalty.get(level) +\r\n            -effect.statusPenalty.get(level) +\r\n            -effect.itemPenalty.get(level) +\r\n            -effect.untypedPenalty.get(level))\r\n\r\n        return \"(\" + total + \")\";\r\n    }\r\n}\r\n\r\nfunction ModifierInput(props) {\r\n    // props: effect, onEffectChange\r\n    return (\r\n        <div className=\"ModifierInput\" >\r\n            <CollapsableInput\r\n                description={\"Circumstance/Status Bonuses/Penalties: \" + totalModDescription(props.effect, props.selectedLevel)}\r\n                listInput={\r\n                    <div className=\"ModifierInputList\">\r\n                        <div className=\"InputGroup\">\r\n                            <BonusPresets\r\n                                modifier={props.effect.statusBonus}\r\n                                onChange={props.onEffectChange.bind(null, \"statusBonus\", null)}\r\n                            />\r\n                            <CollapsableInput\r\n                                description={\"Status Bonus: \" + props.effect.statusBonus.getDescription(props.selectedLevel)}\r\n                                listInput={\r\n                                    <ByLevelInput2\r\n                                        modifier={props.effect.statusBonus}\r\n                                        onChange={props.onEffectChange.bind(null, \"statusBonus\")}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"InputGroup\">\r\n                            <BonusPresets\r\n                                modifier={props.effect.circumstanceBonus}\r\n                                onChange={props.onEffectChange.bind(null, \"circumstanceBonus\", null)}\r\n                            />\r\n                            <CollapsableInput\r\n                                description={\"Cicumstance Bonus: \" + props.effect.circumstanceBonus.getDescription(props.selectedLevel)}\r\n                                listInput={\r\n                                    <ByLevelInput2\r\n                                        modifier={props.effect.circumstanceBonus}\r\n                                        onChange={props.onEffectChange.bind(null, \"circumstanceBonus\")}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"InputGroup\">\r\n                            <PenaltyPresets\r\n                                modifier={props.effect.statusPenalty}\r\n                                onChange={props.onEffectChange.bind(null, \"statusPenalty\", null)}\r\n                            />\r\n                            <CollapsableInput\r\n                                description={\"Status Penalty: \" + props.effect.statusPenalty.getDescription(props.selectedLevel)}\r\n                                listInput={\r\n                                    <ByLevelInput2\r\n                                        modifier={props.effect.statusPenalty}\r\n                                        onChange={props.onEffectChange.bind(null, \"statusPenalty\")}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"InputGroup\">\r\n                            <PenaltyPresets\r\n                                modifier={props.effect.circumstancePenalty}\r\n                                onChange={props.onEffectChange.bind(null, \"circumstancePenalty\", null)}\r\n                            />\r\n                            <CollapsableInput\r\n                                description={\"Cicumstance Penalty: \" + props.effect.circumstancePenalty.getDescription(props.selectedLevel)}\r\n                                listInput={\r\n                                    <ByLevelInput2\r\n                                        modifier={props.effect.circumstancePenalty}\r\n                                        onChange={props.onEffectChange.bind(null, \"circumstancePenalty\")}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"InputGroup\">\r\n                            <PenaltyPresets\r\n                                modifier={props.effect.itemPenalty}\r\n                                onChange={props.onEffectChange.bind(null, \"itemPenalty\", null)}\r\n                            />\r\n                            <CollapsableInput\r\n                                description={\"Item Penalty: \" + props.effect.itemPenalty.getDescription(props.selectedLevel)}\r\n                                listInput={\r\n                                    <ByLevelInput2\r\n                                        modifier={props.effect.itemPenalty}\r\n                                        onChange={props.onEffectChange.bind(null, \"itemPenalty\")}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"InputGroup\">\r\n                            <PenaltyPresets\r\n                                modifier={props.effect.untypedPenalty}\r\n                                onChange={props.onEffectChange.bind(null, \"untypedPenalty\", null)}\r\n                            />\r\n                            <CollapsableInput\r\n                                description={\"Untyped Penalty: \" + props.effect.untypedPenalty.getDescription(props.selectedLevel)}\r\n                                listInput={\r\n                                    <ByLevelInput2\r\n                                        modifier={props.effect.untypedPenalty}\r\n                                        onChange={props.onEffectChange.bind(null, \"untypedPenalty\")}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ModifierInput","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput, ByLevelInput2 } from './CommonInputs'\r\n\r\nfunction WeaponDiceNumPresets(props) {\r\n    // props: diceNum, onChange\r\n    return (\r\n        <div className=\"Presets WeaponDiceNumPresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.diceNum.isABPWeaponDiceNum()}\r\n                onChange={props.onChange.bind(null, \"ABPWeaponDiceNum\")}\r\n                label={\"ABP Weapon\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction WeaponDiceNumInput(props) {\r\n    // props: effect, onChange\r\n    return (\r\n        <div className=\"InputGroup WeaponDiceNumInput\" >\r\n            <WeaponDiceNumPresets \r\n                diceNum={props.effect.weaponDiceNum}\r\n                onChange={props.onChange.bind(null,null)}\r\n            />\r\n        \r\n        <CollapsableInput\r\n                description={\"Weapon Dice: \" + props.effect.weaponDiceNum.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <ByLevelInput2\r\n                        modifier={props.effect.weaponDiceNum}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { WeaponDiceNumInput }","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput2 } from './CommonInputs'\r\n\r\nfunction DieSizePresets(props) {\r\n    // props: diceNum, onChange\r\n    return (\r\n        <div className=\"Presets DieSizePresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.dieSize.isd4()}\r\n                onChange={props.onChange.bind(null, \"d4\")}\r\n                label={\"d4\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.dieSize.isd6()}\r\n                onChange={props.onChange.bind(null, \"d6\")}\r\n                label={\"d6\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.dieSize.isd8()}\r\n                onChange={props.onChange.bind(null, \"d8\")}\r\n                label={\"d8\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.dieSize.isd10()}\r\n                onChange={props.onChange.bind(null, \"d10\")}\r\n                label={\"d10\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.dieSize.isd12()}\r\n                onChange={props.onChange.bind(null, \"d12\")}\r\n                label={\"d12\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction DieSizeInput(props) {\r\n    // props: effect, onChange\r\n    return (\r\n        <div className=\"InputGroup DieSizeInput\" >\r\n            <DieSizePresets \r\n                dieSize={props.effect.dieSize}\r\n                onChange={props.onChange.bind(null,null)}\r\n            />\r\n        \r\n        <CollapsableInput\r\n                description={\"Die Size: \" + props.effect.dieSize.getDieSizeDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <ByLevelInput2\r\n                        modifier={props.effect.dieSize}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport { DieSizeInput }","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput } from './CommonInputs'\r\n\r\nfunction WeaponSpecPresets(props) {\r\n    // props: diceNum, onChange\r\n    return (\r\n        <div className=\"Presets WeaponSpecPresets\">\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.weaponSpec.isWSMartial()}\r\n                onChange={props.onChange.bind(null, \"WSMartial\")}\r\n                label={\"Martial\"}\r\n            />\r\n            <CheckboxInput className=\"PresetItem\"\r\n                checked={props.weaponSpec.isWSCaster()}\r\n                onChange={props.onChange.bind(null, \"WSCaster\")}\r\n                label={\"Caster\"}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction WeaponSpecInput(props) {\r\n    // props: effect, onChange\r\n    return (\r\n        <div className=\"InputGroup WeaponSpecInput\" >\r\n            <WeaponSpecPresets \r\n                weaponSpec={props.effect.weaponSpec}\r\n                onChange={props.onChange}\r\n            />\r\n        \r\n        <CollapsableInput\r\n                description={\"Weapon Specialization: \" + props.effect.weaponSpec.getDescription(props.selectedLevel)}\r\n                listInput={\r\n                    <ByLevelInput\r\n                        modifier={props.effect.weaponSpec}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WeaponSpecInput","import React from 'react';\r\nimport { CheckboxInput, CollapsableInput, SelectLevel } from './CommonInputs'\r\nlet runeNames = [\"Fire\", \"Ice\", \"Shock\", \"Keen\"];\r\n\r\nfunction SelectRuneName(props) {\r\n    let optionList = [];\r\n    for (let i=0; i<runeNames.length; i++) {\r\n        optionList.push(\r\n            <option value={runeNames[i]}>\r\n                {runeNames[i]}\r\n            </option>\r\n        );\r\n    }\r\n    return (\r\n        <select\r\n            value={props.value}\r\n            onChange={props.onChange}\r\n        >\r\n            <option value=\"None\">\r\n                None\r\n            </option>\r\n            {optionList}\r\n        </select>\r\n    );\r\n}\r\n\r\nfunction RuneTable(props) {\r\n    // props: runes, onChange\r\n\r\n    const runes = props.runes;\r\n    let rows = [];\r\n    for (let i = 0; i < runes.length; i++) {\r\n        rows.push(\r\n            <div key={i}>\r\n                <SelectRuneName \r\n                    value={runes.getName(i)}\r\n                    onChange={props.onChange.bind(null, i, \"EntryName\")}\r\n                />\r\n                <SelectLevel value={runes.getLevelAdded(i)}\r\n                    onChange={props.onChange.bind(null, i, \"LevelAdded\")}\r\n                />\r\n                <SelectLevel value={runes.getLevelRemoved(i)}\r\n                    onChange={props.onChange.bind(null, i, \"LevelRemoved\")}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n    rows.push(\r\n        <div key={runes.length}>\r\n            <SelectRuneName \r\n                    value={runes.getName(runes.length)}\r\n                    onChange={props.onChange.bind(null, runes.length, \"EntryName\")}\r\n                />\r\n            <SelectLevel value={runes.getLevelAdded(runes.length)}\r\n                onChange={props.onChange.bind(null, runes.length, \"LevelAdded\")}\r\n            />\r\n            <SelectLevel value={runes.getLevelRemoved(runes.length)}\r\n                onChange={props.onChange.bind(null, runes.length, \"LevelRemoved\")}\r\n            />\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"Runes\">\r\n            {rows}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction RuneInput(props) {\r\n    // props: effect, onChange, selectedLevel\r\n    const runes = props.effect.runes;\r\n\r\n\r\n    return (\r\n        <div className=\"RuneInput\">\r\n            <CollapsableInput\r\n                description={runes.getDescription()}\r\n                listInput={\r\n                    <RuneTable\r\n                        runes={runes}\r\n                        onChange={props.onChange}\r\n                    />\r\n                }\r\n\r\n            />\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default RuneInput","import React from 'react';\r\nimport update from 'immutability-helper';\r\n\r\nimport { CheckboxInput, CollapsableInput, ByLevelInput } from './Inputs/CommonInputs.js'\r\n\r\nimport Flag from './Model/Flag.js';\r\nimport MAP from './Model/MAP.js';\r\nimport Proficiency from './Model/Proficiency.js';\r\nimport AbilityScore from './Model/AbilityScore.js';\r\nimport Modifier from './Model/Modifier.js';\r\nimport AdditionalEffectArray from './Model/AdditionalEffectArray.js';\r\n\r\nimport { totalBonusDescription, attackBonusDescription, totalDamageDescription, calculateExpectedDamage } from './Calculation.js';\r\n\r\nimport MAPInput from './Inputs/MAPInput.js';\r\nimport OverrideInput from './Inputs/OverrideInput.js';\r\nimport { WeaponProficiencyInput } from './Inputs/ProficiencyInput.js';\r\nimport { AttackAbilityScoreInput, DamageAbilityScoreInput } from './Inputs/AbilityScoreInput.js';\r\nimport ItemBonusInput from './Inputs/ItemBonusInput.js';\r\nimport ModifierInput from './Inputs/ModifierInput.js';\r\nimport { WeaponDiceNumInput } from './Inputs/NumberDiceInput.js';\r\nimport { DieSizeInput } from './Inputs/DieSizeInput.js';\r\nimport WeaponSpecInput from './Inputs/WeaponSpecInput.js';\r\nimport RuneInput from './Inputs/RuneInput.js';\r\n\r\nimport './PF2App.css';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst DEFAULT_PROF = [1, 1, 5, 13];\r\nconst DEFAULT_ABSCORE = [18, [true, true, true, true], 17];\r\nconst DEFAULT_ITEMB = new Array(20).fill(0);\r\nfor (let i = 0; i < 20; i++) {\r\n    if (i + 1 >= 16) { DEFAULT_ITEMB[i] = 3; continue; }\r\n    if (i + 1 >= 10) { DEFAULT_ITEMB[i] = 2; continue; }\r\n    if (i + 1 >= 2) { DEFAULT_ITEMB[i] = 1; continue; }\r\n}\r\nconst DEFAULT_WS = new Array(20).fill(0);\r\nfor (let level = 7; level <= 20; level++) {\r\n    if (level < 15) {\r\n        DEFAULT_WS[level - 1] = 1;\r\n    }\r\n    if (level >= 15) {\r\n        DEFAULT_WS[level - 1] = 2;\r\n    }\r\n}\r\nconst DEFAULT_DICENUMBER = new Array(20).fill(1);\r\nfor (let i = 0; i < 20; i++) {\r\n    if (i + 1 >= 19) { DEFAULT_DICENUMBER[i] = 4; continue; }\r\n    if (i + 1 >= 12) { DEFAULT_DICENUMBER[i] = 3; continue; }\r\n    if (i + 1 >= 4) { DEFAULT_DICENUMBER[i] = 2; continue; }\r\n}\r\nconst DEFAULT_DIESIZE = new Array(20).fill(8);\r\n\r\n\r\n// function CheckInput(props) {\r\n//     return (\r\n\r\n//     );\r\n// }\r\n\r\n\r\nfunction StrikeInput(props) {\r\n    /*\r\n        Proficiency, Primary Ability Scor\r\n    */\r\n\r\n    return (\r\n        <div className=\"StrikeInput\" >\r\n            <CollapsableInput\r\n                description={\"Total Bonus: \" + totalBonusDescription(props.effect, props.selectedLevel)}\r\n                listInput={\r\n                    <div className=\"CheckInput\">\r\n                        <CollapsableInput\r\n                            description={\"Attack Bonus: \" + attackBonusDescription(props.effect, props.selectedLevel)}\r\n                            listInput={\r\n                                <div>\r\n                                    <OverrideInput\r\n                                        effect={props.effect}\r\n                                        onEffectChange={props.onEffectChange}\r\n                                        selectedLevel={props.selectedLevel}\r\n                                    />\r\n                                    <WeaponProficiencyInput\r\n                                        effect={props.effect}\r\n                                        onEffectChange={props.onEffectChange}\r\n                                        selectedLevel={props.selectedLevel}\r\n                                    />\r\n\r\n                                    <AttackAbilityScoreInput\r\n                                        effect={props.effect}\r\n                                        onChange={props.onEffectChange.bind(null, \"attackAbilityScore\", null)}\r\n                                        selectedLevel={props.selectedLevel}\r\n                                    />\r\n\r\n                                    <ItemBonusInput\r\n                                        effect={props.effect}\r\n                                        onChange={props.onEffectChange.bind(null, \"itemBonus\")}\r\n                                        selectedLevel={props.selectedLevel}\r\n                                    />\r\n                                </div>\r\n                            } />\r\n                        <ModifierInput\r\n                            effect={props.effect}\r\n                            onEffectChange={props.onEffectChange}\r\n                            selectedLevel={props.selectedLevel}\r\n                        />\r\n                        <MAPInput\r\n                            effect={props.effect}\r\n                            onChange={props.onEffectChange.bind(null, \"MAP\", null)}\r\n                            selectedLevel={props.selectedLevel}\r\n\r\n                        />\r\n                    </div>\r\n\r\n                }\r\n            />\r\n\r\n            <CollapsableInput\r\n                description={\"Total Damage: \" + totalDamageDescription(props.effect, props.selectedLevel)}\r\n                listInput={\r\n                    <div className=\"DamageInput\">\r\n                        <DamageAbilityScoreInput\r\n                            effect={props.effect}\r\n                            onChange={props.onEffectChange.bind(null, \"damageAbilityScore\", null)}\r\n                            selectedLevel={props.selectedLevel}\r\n                        />\r\n                        <WeaponDiceNumInput\r\n                            effect={props.effect}\r\n                            onChange={props.onEffectChange.bind(null, \"weaponDiceNum\")}\r\n                            selectedLevel={props.selectedLevel}\r\n                        />\r\n                        <DieSizeInput\r\n                            effect={props.effect}\r\n                            onChange={props.onEffectChange.bind(null, \"dieSize\")}\r\n                            selectedLevel={props.selectedLevel}\r\n                        />\r\n                        <WeaponSpecInput\r\n                            effect={props.effect}\r\n                            onChange={props.onEffectChange.bind(null, \"weaponSpec\", null)}\r\n                            selectedLevel={props.selectedLevel}\r\n                        />\r\n                        <RuneInput\r\n                            effect={props.effect}\r\n                            onChange={props.onEffectChange.bind(null, \"runes\")}\r\n                            selectedLevel={props.selectedLevel}\r\n                        />\r\n                    </div>\r\n                }\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction EffectInput(props) {\r\n    // props: effect, selectedLevel, onEffectChange\r\n    return (\r\n        <StrikeInput\r\n            effect={props.effect}\r\n            selectedLevel={props.selectedLevel}\r\n            onEffectChange={props.onEffectChange}\r\n        />\r\n    );\r\n}\r\n\r\nfunction DisplayOutput(props) {\r\n    // props: effect, target\r\n    return (\r\n        <div className=\"Display\">\r\n            <CollapsableInput\r\n                description={\"Expected Damage: \" + calculateExpectedDamage(props.effect, props.target)}\r\n                listInput=\"\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction TargetInput(props) {\r\n    return (\r\n        <div className=\"TargetInput\">\r\n            <div>\r\n                <label>Target Level:\r\n                <input type=\"number\"\r\n                        min=\"1\"\r\n                        max=\"20\"\r\n                        step=\"1\"\r\n                        value={props.target.selectedLevel}\r\n                        onChange={props.onTargetChange.bind(null, \"selectedLevel\")}\r\n                    /><br />\r\n                1\r\n                <input type=\"range\"\r\n                        min=\"1\"\r\n                        max=\"20\"\r\n                        step=\"1\"\r\n                        value={props.target.selectedLevel}\r\n                        onChange={props.onTargetChange.bind(null, \"selectedLevel\")}\r\n                    />\r\n                20\r\n            </label>\r\n            </div>\r\n            <div>\r\n                <label>Target AC: {}\r\n                    <input type=\"number\"\r\n                        value={props.target.AC}\r\n                        onChange={props.onTargetChange.bind(null, \"AC\")}\r\n                    />\r\n\r\n                </label>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nclass PF2App extends React.Component {\r\n    /*\r\n        Target Selector\r\n        Graph Settings\r\n        Graph\r\n        Edit Current Effect\r\n        Select Effects\r\n    */\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            target: {\r\n                selectedLevel: 3,\r\n                AC: 15\r\n            },\r\n            routines: [\r\n                [\r\n                    { // effect\r\n                        MAP: new MAP(),\r\n\r\n                        useOverride: new Flag(),\r\n                        override: new Modifier(),\r\n\r\n                        proficiency: new Proficiency(...DEFAULT_PROF),\r\n                        attackAbilityScore: new AbilityScore(...DEFAULT_ABSCORE),\r\n                        itemBonus: new Modifier(DEFAULT_ITEMB),\r\n\r\n                        useMiscModifiers: new Flag(true),\r\n                        circumstanceBonus: new Modifier(),\r\n                        statusBonus: new Modifier(),\r\n                        circumstancePenalty: new Modifier(),\r\n                        statusPenalty: new Modifier(),\r\n                        itemPenalty: new Modifier(),\r\n                        untypedPenalty: new Modifier(),\r\n\r\n                        damageAbilityScore: new AbilityScore(...DEFAULT_ABSCORE),\r\n                        weaponDiceNum: new Modifier(DEFAULT_DICENUMBER),\r\n                        dieSize: new Modifier(DEFAULT_DIESIZE),\r\n                        weaponSpec: new Modifier(DEFAULT_WS),\r\n\r\n                        runes: new AdditionalEffectArray(),\r\n                    }\r\n                ]\r\n            ],\r\n            selectedRoutine: 0,\r\n            selectedEffect: 0,\r\n        };\r\n        this.handleEffectChange = this.handleEffectChange.bind(this);\r\n        this.handleTargetChange = this.handleTargetChange.bind(this);\r\n    }\r\n\r\n    handleTargetChange(propertyName, event) {\r\n        let newPropertyValue;\r\n        switch (propertyName) {\r\n            case \"selectedLevel\":\r\n                newPropertyValue = event.target.value;\r\n                break;\r\n            case \"AC\":\r\n                newPropertyValue = event.target.value;\r\n                break;\r\n            default:\r\n                newPropertyValue = event.target.value;\r\n        }\r\n        const newTarget = update(this.state.target, { [propertyName]: { $set: newPropertyValue } });\r\n\r\n        this.setState({ target: newTarget });\r\n    }\r\n\r\n    handleEffectChange(propertyName, index, key, event) {\r\n        const currentEffect = this.state.routines[this.state.selectedRoutine][this.state.selectedEffect];\r\n        const currentPropertyValue = currentEffect[propertyName];\r\n        const newPropertyValue = currentPropertyValue.createUpdated(key, event, index);\r\n\r\n        const newRoutines = update(this.state.routines, {\r\n            [this.state.selectedRoutine]: {\r\n                [this.state.selectedEffect]: {\r\n                    [propertyName]: { $set: newPropertyValue }\r\n                }\r\n            }\r\n        });\r\n\r\n        this.setState({ routines: newRoutines });\r\n    }\r\n\r\n    handleEffectItemChange(propertyName) {\r\n        \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"PF2App\">\r\n                <TargetInput\r\n                    target={this.state.target}\r\n                    onTargetChange={this.handleTargetChange}\r\n                />\r\n                <DisplayOutput\r\n                    target={this.state.target}\r\n                    effect={this.state.routines[this.state.selectedRoutine][this.state.selectedEffect]}\r\n                />\r\n                <EffectInput\r\n                    effect={this.state.routines[this.state.selectedRoutine][this.state.selectedEffect]}\r\n                    selectedLevel={this.state.target.selectedLevel}\r\n                    onEffectChange={this.handleEffectChange}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default PF2App","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport PF2App from './PF2App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <PF2App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}