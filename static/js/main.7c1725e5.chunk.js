(this.webpackJsonppf2=this.webpackJsonppf2||[]).push([[0],{189:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);for(var n,r,c=a(0),i=a.n(c),l=a(29),u=a.n(l),s=(a(78),a(7)),d=a(1),o=a(5),m=a(6),p=a(12),v={STRIKE:"Strike",SAVE:"Save"},f={FIGHTER:"Fighter Strike"},g={LOW:"Low",MODERATE:"Moderate",HIGH:"High",EXTREME:"Extreme"},E={TERRIBLE:"Terrible",LOW:"Low",MODERATE:"Moderate",HIGH:"High",EXTREME:"Extreme"},h={AC:"AC",FORT:"Fort",REF:"Ref",WILL:"Will",PER:"Perception"},b={N1:"0 (0x-5)",N2:"-5 (1x-5)",N3:"-10 (2x-5)",A1:"0 (0x-4)",A2:"-4 (1x-4)",A3:"-8 (2x-4)",R1:"0 (0x-3)",R2:"-3 (1x-3)",R3:"-6 (2x-3)",RA1:"0 (0x-2)",RA2:"-2 (1x-2)",RA3:"-4 (2x-2)",RAA1:"0 (0x-1)",RAA2:"-1 (1x-1)",RAA3:"-2 (2x-1)"},y={"0 (0x-5)":"-5 (1x-5)","-5 (1x-5)":"-10 (2x-5)","-10 (2x-5)":"-10 (2x-5)","0 (0x-4)":"-4 (1x-4)","-4 (1x-4)":"-8 (2x-4)","-8 (2x-4)":"-8 (2x-4)","0 (0x-3)":"-3 (1x-3)","-3 (1x-3)":"-6 (2x-3)","-6 (2x-3)":"-6 (2x-3)","0 (0x-2)":"-2 (1x-2)","-2 (1x-2)":"-4 (2x-2)","-4 (2x-2)":"-4 (2x-2)","0 (0x-1)":"-1 (1x-1)","-1 (1x-1)":"-2 (2x-1)","-2 (2x-1)":"-2 (2x-1)"},O={"0 (0x-5)":0,"-5 (1x-5)":-5,"-10 (2x-5)":-10,"0 (0x-4)":0,"-4 (1x-4)":-4,"-8 (2x-4)":-8,"0 (0x-3)":0,"-3 (1x-3)":-3,"-6 (2x-3)":-6,"0 (0x-2)":0,"-2 (1x-2)":-2,"-4 (2x-2)":-4,"0 (0x-1)":0,"-1 (1x-1)":-1,"-2 (2x-1)":-2},I={NONE:"None",B:"bludgeoning",P:"piercing",S:"slashing",FIRE:"fire"},C={NONE:"none",COLD_IRON:"cold iron",SILVER:"silver",ADAMANTINE:"adamantine"},A={ALWAYS:"Always",CRIT:"On Crit",SUCC:"On Success",FAIL:"On Failure",CRIF:"On Crit Fail",AT_LEAST_SUCC:"Success or better",AT_LEAST_FAIL:"Failure or better",FAIL_WORSE:"Failure or worse",SUCC_WORSE:"Success or worse"},x={STRIKE:"x1 hit, x2 crit",BASIC:"Basic save",ALWAYS:"Always",CRIT:"On Crit",SUCC:"On Success",FAIL:"On Failure",CRIF:"On Crit Fail",AT_LEAST_SUCC:"Success or better",AT_LEAST_FAIL:"Failure or better",FAIL_WORSE:"Failure or worse",SUCC_WORSE:"Success or worse"},R=Object(d.a)({},f.FIGHTER,v.STRIKE),k=Object(d.a)({},f.FIGHTER,h.AC),S=Object(d.a)({},f.FIGHTER,x.STRIKE),T={},N={},j={},D={},F={},L={},P={},w={},M={},W={},_=1;_<=20;_++)T[_]=4,N[_]=2,j[_]=2,D[_]=2,F[_]=0,L[_]=1,P[_]=0,w[_]=0,_>=2&&(F[_]=1),_>=4&&(L[_]=2),_>=5&&(N[_]=4),_>=7&&(j[_]=4,P[_]=1),_>=10&&(F[_]=2,T[_]=5),_>=11&&(D[_]=4),_>=12&&(L[_]=3),_>=13&&(N[_]=6,w[_]=1),_>=15&&(P[_]=2),_>=16&&(F[_]=3),_>=17&&(T[_]=6),_>=19&&(L[_]=4),_>=20&&(T[_]=7),M[_]=_+N[_]+T[_]+F[_]+2,W[_]=T[_]+P[_]*(N[_]+2)/2;var U=Object(d.a)({},f.FIGHTER,M),H=Object(d.a)({},f.FIGHTER,L),B=Object(d.a)({},f.FIGHTER,W),G={"-1":18,0:19,1:19,2:21,3:22,4:24,5:25,6:27,7:28,8:30,9:31,10:33,11:34,12:36,13:37,14:39,15:40,16:42,17:43,18:45,19:46,20:48,21:49,22:51,23:52,24:54},z=Object(p.a)({},G);for(var K in z)z[K]-=3;var Y=Object(p.a)({},G);for(var V in Y)Y[V]-=4;var X=Object(p.a)({},G);for(var J in X)X[J]-=6;var $=(n={},Object(d.a)(n,g.EXTREME,G),Object(d.a)(n,g.HIGH,z),Object(d.a)(n,g.MODERATE,Y),Object(d.a)(n,g.LOW,X),n),q=(r={},Object(d.a)(r,E.EXTREME,{"-1":9,0:10,1:11,2:12,3:14,4:15,5:17,6:18,7:20,8:21,9:23,10:24,11:26,12:27,13:29,14:30,15:32,16:33,17:35,18:36,19:38,20:39,21:41,22:43,23:44,24:46}),Object(d.a)(r,E.HIGH,{"-1":8,0:9,1:10,2:11,3:12,4:14,5:15,6:17,7:18,8:19,9:21,10:22,11:24,12:25,13:26,14:28,15:29,16:30,17:32,18:33,19:35,20:36,21:38,22:39,23:40,24:42}),Object(d.a)(r,E.MODERATE,{"-1":5,0:6,1:7,2:8,3:9,4:11,5:12,6:14,7:15,8:16,9:18,10:19,11:21,12:22,13:23,14:25,15:26,16:28,17:29,18:30,19:32,20:33,21:35,22:36,23:37,24:38}),Object(d.a)(r,E.LOW,{"-1":2,0:3,1:4,2:5,3:6,4:8,5:9,6:11,7:12,8:13,9:15,10:16,11:18,12:19,13:20,14:22,15:23,16:25,17:26,18:27,19:29,20:30,21:32,22:33,23:34,24:36}),Object(d.a)(r,E.TERRIBLE,{"-1":0,0:1,1:2,2:3,3:4,4:6,5:7,6:8,7:10,8:11,9:12,10:14,11:15,12:16,13:18,14:19,15:20,16:22,17:23,18:24,19:26,20:27,21:28,22:30,23:31,24:32}),r),Q=Object(m.b)(),Z=0,ee=Object(m.c)({name:"weaknesses",initialState:Q.getInitialState(),reducers:{weaknessAdded:Q.addOne,weaknessUpdated:Q.updateOne,weaknessCreated:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.type,c=a.value;Q.addOne(e,{id:n,type:r,value:c})},prepare:function(e){var t=e.parentId,a=e.type,n=e.value;return{payload:{id:++Z,parentId:t,type:a,value:n}}}},weaknessRemoved:Q.removeOne}}),te=ee.actions,ae=te.weaknessRemoved,ne=te.weaknessCreated,re=(te.weaknessAdded,te.weaknessUpdated),ce=ee.reducer,ie=Q.getSelectors((function(e){return e.weaknesses})),le=ie.selectById,ue=(ie.selectIds,ie.selectEntities),se=(ie.selectAll,ie.selectTotal,Object(m.b)()),de=Object(m.c)({name:"targets",initialState:se.getInitialState(),reducers:{targetAdded:se.addOne,targetUpdated:function(e,t){se.updateOne(e,t.payload);var a=e.entities[t.payload.id];a.level||(a.level=0),a.level<-1&&(a.level=-1),a.level>24&&(a.level=24),a.useDefaultAC&&(a[h.AC]=$[a.defaultAC][a.level]),a.useDefaultFort&&(a[h.FORT]=q[a.defaultFort][a.level]),a.useDefaultRef&&(a[h.REF]=q[a.defaultRef][a.level]),a.useDefaultWill&&(a[h.WILL]=q[a.defaultWill][a.level]),a.useDefaultPer&&(a[h.PER]=q[a.defaultPer][a.level])}},extraReducers:function(e){e.addCase(ne,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].weaknesses.push(r)})).addCase(ae,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].weaknesses=e.entities[n].weaknesses.filter((function(e){return e!==r}))}))}}),oe=de.actions,me=oe.targetAdded,pe=oe.targetUpdated,ve=de.reducer,fe=se.getSelectors((function(e){return e.targets})),ge=fe.selectById,Ee=(fe.selectIds,fe.selectEntities);fe.selectAll,fe.selectTotal;var he=function(e){var t=e.id,a=e.parentId,n=Object(o.c)((function(e){return le(e,t)})),r=n.type,c=n.value,l=Object(o.b)();return i.a.createElement("span",{className:"input"},i.a.createElement(Oe,{value:r,onChange:function(e){e.target.value===I.NONE?l(ae({id:t,parentId:a})):l(re({id:t,changes:{type:e.target.value}}))}}),i.a.createElement("input",{type:"number",value:c,onChange:function(e){isNaN(e.target.value)||l(re({id:t,changes:{value:parseInt(e.target.value)}}))}}))},be=0,ye=function(e){var t=e.parentId,a=Object(o.b)(),n=Object(c.useState)(0),r=Object(s.a)(n,2),l=r[0],u=r[1];return i.a.createElement("span",{className:"input"},i.a.createElement(Oe,{value:I.NONE,onChange:function(e){e.target.value!==I.NONE&&(be++,a(ne({id:be,type:e.target.value,value:l,parentId:t})))}}),i.a.createElement("input",{type:"number",value:l,onChange:function(e){return u(parseInt(e.target.value))}}))},Oe=function(e){var t=e.value,a=e.onChange,n=[];for(var r in I)n.push(i.a.createElement("option",{key:r},I[r]));for(var c in C)C[c]!==C.NONE&&n.push(i.a.createElement("option",{key:c},C[c]));return i.a.createElement("span",null,i.a.createElement("select",{value:t,onChange:function(e){return a(e)}},n))},Ie=function(e){var t=e.id,a=Object(o.c)((function(e){return ge(e,0)})),n=a.name,r=a.level,c=a[h.AC],l=a.defaultAC,u=a.useDefaultAC,s=a[h.FORT],m=a.defaultFort,p=a.useDefaultFort,v=a[h.REF],f=a.defaultRef,b=a.useDefaultRef,y=a[h.WILL],O=a.defaultWill,I=a.useDefaultWill,C=a[h.PER],A=a.defaultPer,x=a.useDefaultPer,R=a.flatfooted,k=a.weaknesses,S=Object(o.b)(),T=[];for(var N in g)T.push(i.a.createElement("option",{key:N},g[N]));var j=[];for(var D in E)j.push(i.a.createElement("option",{key:D},E[D]));return i.a.createElement("div",{className:"box flexbox"},i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"targetName"},"Target Name: "),i.a.createElement("input",{id:"targetName",type:"text",placeholder:"Enter Target name",value:n,onChange:function(e){return S(pe({id:t,changes:{name:e.target.value}}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Level"}," Level: "),i.a.createElement("input",{id:"Level",type:"number",value:r,onChange:function(e){return S(pe({id:t,changes:{level:parseInt(e.target.value)}}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"AC"}," AC: "),i.a.createElement("input",{type:"checkbox",checked:u,onChange:function(e){return S(pe({id:t,changes:{useDefaultAC:e.target.checked}}))}}),i.a.createElement("select",{value:l,onChange:function(e){return S(pe({id:t,changes:{defaultAC:e.target.value}}))}},T),i.a.createElement("input",{id:"AC",type:"number",value:c,onChange:function(e){return S(pe({id:t,changes:Object(d.a)({useDefaultAC:!1},h.AC,parseInt(e.target.value))}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Fort"}," Fort: "),i.a.createElement("input",{type:"checkbox",checked:p,onChange:function(e){return S(pe({id:t,changes:{useDefaultFort:e.target.checked}}))}}),i.a.createElement("select",{value:m,onChange:function(e){return S(pe({id:t,changes:{defaultFort:e.target.value}}))}},j),i.a.createElement("input",{id:"Fort",type:"number",value:s,onChange:function(e){return S(pe({id:t,changes:Object(d.a)({},h.FORT,parseInt(e.target.value))}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Ref"}," Ref: "),i.a.createElement("input",{type:"checkbox",checked:b,onChange:function(e){return S(pe({id:t,changes:{useDefaultRef:e.target.checked}}))}}),i.a.createElement("select",{value:f,onChange:function(e){return S(pe({id:t,changes:{defaultRef:e.target.value}}))}},j),i.a.createElement("input",{id:"Ref",type:"number",value:v,onChange:function(e){return S(pe({id:t,changes:Object(d.a)({},h.REF,parseInt(e.target.value))}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Will"}," Will: "),i.a.createElement("input",{type:"checkbox",checked:I,onChange:function(e){return S(pe({id:t,changes:{useDefaultWill:e.target.checked}}))}}),i.a.createElement("select",{value:O,onChange:function(e){return S(pe({id:t,changes:{defaultWill:e.target.value}}))}},j),i.a.createElement("input",{id:"Will",type:"number",value:y,onChange:function(e){return S(pe({id:t,changes:Object(d.a)({},h.WILL,parseInt(e.target.value))}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Perception"}," Perception: "),i.a.createElement("input",{type:"checkbox",checked:x,onChange:function(e){return S(pe({id:t,changes:{useDefaultPer:e.target.checked}}))}}),i.a.createElement("select",{value:A,onChange:function(e){return S(pe({id:t,changes:{defaultPer:e.target.value}}))}},j),i.a.createElement("input",{id:"Perception",type:"number",value:C,onChange:function(e){return S(pe({id:t,changes:Object(d.a)({},h.PER,parseInt(e.target.value))}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Flatfooted"}," Flatfooted: "),i.a.createElement("input",{id:"Flatfooted",type:"checkbox",checked:R,onChange:function(e){return S(pe({id:t,changes:{flatfooted:e.target.checked}}))}})),i.a.createElement("div",{className:"box flexbox"}," Resistance/Weakness: ",k.map((function(e){return i.a.createElement(he,{parentId:t,id:e,key:e})})),i.a.createElement(ye,{parentId:t})))},Ce=a(4),Ae=function(e,t){if(0===e.length||0===t.length)throw new Error("Vectors can not be empty!");for(var a=e,n=t,r=0,c=[],i=0;i<a.length;i++){for(var l=0;l<n.length;l++)r+l!==c.length?c[r+l]=c[r+l]+a[i]*n[l]:c.push(a[i]*n[l]);r++}return c},xe=function(){for(var e=0,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];for(var r=0,c=a;r<c.length;r++){var i=c[r];e=Math.max(e,i[0].staticDamage+i[0].damageDist.length)}for(var l=[],u=0;u<e;u++){l.push(0);var s,d=Object(Ce.a)(a);try{for(d.s();!(s=d.n()).done;){var o=s.value;if(o[0].staticDamage<=u){var m=u-o[0].staticDamage;m<o[0].damageDist.length&&(l[u]+=o[0].damageDist[m]*o[1])}}}catch(p){d.e(p)}finally{d.f()}}return l},Re=function(e,t,a){for(;e<a;)t.length>=2&&(t[1]+=t[0],t.shift()),e++;return[e,t]},ke=Object(m.b)(),Se=1,Te=Object(m.c)({name:"damages",initialState:ke.getInitialState(),reducers:{damageAdded:ke.addOne,damageUpdated:ke.updateOne,damageCreated:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.damageCondition,c=a.diceNum,i=a.diceSize,l=a.staticDamage,u=a.damageType,s=a.material,d=a.persistent;ke.addOne(e,{id:n,damageCondition:r,diceNum:c,diceSize:i,staticDamage:l,damageType:u,material:s,persistent:d})},prepare:function(e){var t=e.parentId;return{payload:{id:++Se,parentId:t,damageCondition:x.STRIKE,diceNum:0,diceSize:8,staticDamage:0,damageType:I.B,material:C.NONE,persistent:!1}}}},damageRemoved:function(e,t){ke.removeOne(e,t.payload.id)}}}),Ne=Te.actions,je=Ne.damageRemoved,De=Ne.damageCreated,Fe=(Ne.damageAdded,Ne.damageUpdated),Le=Te.reducer,Pe=ke.getSelectors((function(e){return e.damages})),we=Pe.selectById,Me=(Pe.selectIds,Pe.selectEntities);Pe.selectAll,Pe.selectTotal;var We=Object(m.b)(),_e=1,Ue={level:1,useDefault:!1,defaultActivity:f.FIGHTER,type:v.STRIKE,targetType:h.AC,value:9,MAP:b.N1,damageCondition:x.STRIKE,diceNum:1,diceSize:8,staticDamage:4,damageType:I.S,material:C.NONE},He=Object(m.c)({name:"activityPaths",initialState:We.getInitialState(),reducers:{activityPathAdded:We.addOne,activityPathUpdated:function(e,t){We.updateOne(e,t.payload),function(e,t){!function t(a){var n=e.entities[a];if(!n.override){var r=n.defaultActivity;n.type=R[r],n.targetType=k[r],n.value=U[r][n.level],n.damageCondition=S[r],n.diceNum=H[r][n.level],n.staticDamage=B[r][n.level];var c,i=Object(Ce.a)(n.apIds);try{for(i.s();!(c=i.n()).done;){var l=c.value;e.entities[l].level=n.level,t(l)}}catch(u){i.e(u)}finally{i.f()}}}(t)}(e,t.payload.id)},activityPathRemoved:function(e,t){var a=t.payload,n=a.id,r=a.parentId;We.removeOne(e,n),void 0!==r&&(e.entities[r].apIds=e.entities[r].apIds.filter((function(e){return e!==n})))},activityPathCreated:{reducer:function(e,t){var a,n=t.payload,r=n.id,c=n.parentId,i=n.applyMAP;a=void 0!==c?e.entities[c]:Ue,We.addOne(e,{id:r,condition:A.ALWAYS,override:!1,level:a.level,useDefault:a.useDefault,defaultActivity:a.defaultActivity,type:a.type,targetType:a.targetType,targetInfoId:0,value:a.value,MAP:i?y[a.MAP]:a.MAP,damageCondition:a.damageCondition,diceNum:a.diceNum,diceSize:a.diceSize,staticDamage:a.staticDamage,damageType:a.damageType,material:a.material,damages:[],effects:[],apIds:[]}),void 0!==c&&e.entities[c].apIds.push(r)},prepare:function(e){var t=e.parentId,a=e.routineId,n=e.applyMAP;return{payload:{id:++_e,parentId:t,routineId:a,applyMAP:n}}}}},extraReducers:function(e){e.addCase(De,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].damages.push(r)})).addCase(je,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].damages=e.entities[n].damages.filter((function(e){return e!==r}))}))}}),Be=He.actions,Ge=Be.activityPathCreated,ze=Be.activityPathAdded,Ke=Be.activityPathUpdated,Ye=Be.activityPathRemoved,Ve=He.reducer,Xe=We.getSelectors((function(e){return e.activityPaths})),Je=Xe.selectById,$e=(Xe.selectIds,Xe.selectEntities),qe=(Xe.selectAll,Xe.selectTotal,Object(m.b)()),Qe=1,Ze=Object(m.c)({name:"routines",initialState:qe.getInitialState({selectedRoutine:0}),reducers:{setRoutine:function(e,t){e.selectedRoutine=t.payload||0},routineAdded:qe.addOne,routineUpdated:qe.updateOne,routineCreated:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.name,c=a.apIds;e.selectedRoutine=n,qe.addOne(e,{id:n,name:r,apIds:c})},prepare:function(){return{payload:{id:++Qe,name:"New Routine",apIds:[]}}}}},extraReducers:function(e){e.addCase(Ge,(function(e,t){var a=t.payload,n=a.routineId,r=a.id;void 0!==n&&e.entities[n].apIds.push(r)})).addCase(Ye,(function(e,t){var a=t.payload,n=a.routineId,r=a.id;void 0!==n&&(e.entities[n].apIds=e.entities[n].apIds.filter((function(e){return e!==r})))}))}}),et=Ze.actions,tt=et.routineCreated,at=et.setRoutine,nt=(et.updateSelected,et.routineAdded),rt=et.routineUpdated,ct=Ze.reducer,it=qe.getSelectors((function(e){return e.routines})),lt=it.selectById,ut=(it.selectIds,it.selectEntities),st=it.selectAll,dt=(it.selectTotal,function(e){return e.routines.selectedRoutine}),ot=a(72),mt=a(2),pt=a(3);var vt=function(e,t,a,n,r,c,i){e=n?e.persistent:e.normal;var l=function(e,t,a){if(0===a)return[0,[1]];if(1===a)return[e,t];var n,r=[0],c=0,i=Math.floor(e*a),l=0,u=i,s=Object(Ce.a)(t);try{for(s.s();!(n=s.n()).done;){var d=n.value,o=Math.floor((e+l)*a);if(o===u)r[c]+=d;else{if(o>u+1)for(var m=0;m<o-(u+1);m++)r[++c]=0;r[++c]=d}u=o,l++}}catch(p){s.e(p)}finally{s.f()}return[i,r]}(r,c,i),u=Object(s.a)(l,2);r=u[0],c=u[1],t in e?(e[t].staticDamage+=r,e[t].damageDist=Ae(e[t].damageDist,c),a!==C.NONE&&(e[t].material=a)):e[t]={material:a,staticDamage:r,damageDist:c}};var ft=function(){function e(t,a,n,r){Object(mt.a)(this,e),this.activityPaths=t,this.targets=a,this.damages=n,this.weaknesses=r}return Object(pt.a)(e,[{key:"evalPath",value:function(e){var t=this,a=this.targets[0],n=e.damages.map((function(e){return t.damages[e]}));n.push(e);var r=a.weaknesses.map((function(e){return t.weaknesses[e]})),c=function(e,t,a,n){var r,c;switch(e.type){case v.STRIKE:r=e.value,r+=O[e.MAP],c=a[e.targetType],e.targetType===h.AC?a.flatfooted&&(c-=2):c+=10;break;case v.SAVE:r=a[e.targetType],c=e.value,e.targetType===h.AC&&(r-=10);break;default:console.log("Activity type ".concat(e.type," not implemented"))}var i=[function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e-t;return n<-20?0:-20===n?5:n<-9?a?10:5:n<8?5*(11+n):95}(r,c)/100,function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e-t;return n<-29?0:n<-20?5:-20===n?0:n<-9?5*(a?19:20+n):n<-1?50:n<9?5*(8-n):5}(r,c)/100,function(e,t){var a=e-t;return a<-29?5:a<-20?5*(29+a):a<-10?45:a<-1?5*(-2-a):a<9?5:0}(r,c)/100,function(e,t){var a=e-t;return a<-29?95:a<-10?5*(-10-a):a<-1?5:0}(r,c)/100],l={normal:{},persistent:{}},u={normal:{},persistent:{}},d={normal:{},persistent:{}},o={normal:{},persistent:{}},m=[l,u,d,o];t.forEach((function(e){var t=e.damageCondition,a=e.diceNum,n=e.diceSize,r=e.staticDamage,c=e.damageType,i=e.material,s=e.persistent;r||(r=0);for(var m=[1],p=[],v=0;v<n;v++)p.push(1/n);for(var f=0;f<a;f++)m=Ae(m,p);switch(r+=a,t){case x.STRIKE:vt(u,c,i,s,r,m,1),vt(l,c,i,s,r,m,2);break;case x.BASIC:vt(u,c,i,s,r,m,.5),vt(d,c,i,s,r,m,1),vt(o,c,i,s,r,m,2);break;case x.CRIF:vt(o,c,i,s,r,m,1);break;case x.FAIL:vt(d,c,i,s,r,m,1);break;case x.SUCC:vt(u,c,i,s,r,m,1);break;case x.CRIT:vt(l,c,i,s,r,m,1);break;case x.AT_LEAST_SUCC:vt(u,c,i,s,r,m,1),vt(l,c,i,s,r,m,1);break;case x.AT_LEAST_FAIL:vt(d,c,i,s,r,m,1),vt(u,c,i,s,r,m,1),vt(l,c,i,s,r,m,1);break;case x.FAIL_WORSE:vt(o,c,i,s,r,m,1),vt(d,c,i,s,r,m,1);break;case x.SUCC_WORSE:vt(o,c,i,s,r,m,1),vt(d,c,i,s,r,m,1),vt(u,c,i,s,r,m,1);break;case x.ALWAYS:vt(o,c,i,s,r,m,1),vt(d,c,i,s,r,m,1),vt(u,c,i,s,r,m,1),vt(l,c,i,s,r,m,1);break;default:console.log("Damage condition ".concat(e.condition," not implemented yet."))}}));for(var p=0,f=m;p<f.length;p++)for(var g=f[p],E=0,b=["normal","persistent"];E<b.length;E++){var y=b[E],I=0,C=[1],A=function(e){var t=g[y][e],a=t.material,r=t.staticDamage,c=t.damageDist;if(r<0){var i=Re(r,c,1),l=Object(s.a)(i,2);r=l[0],c=l[1]}var u=0,d=0;n.forEach((function(t){t.type!==e&&t.type!==a||(t.value<0?u=Math.min(u,t.value):t.value>0&&(d=Math.max(d,t.value)))}));var o=Re(r-=d+u,c,0),m=Object(s.a)(o,2);r=m[0],c=m[1],I+=r,C=Ae(C,c)};for(var R in g[y])A(R);g[y].staticDamage=I,g[y].damageDist=C}return[m,i]}(e,n,a,r),i=Object(s.a)(c,2),l=i[0],u=i[1];return e.apIds.forEach((function(e){var a=t.activityPaths[e],n=t.evalPath(a),r=Object(s.a)(n,2),c=r[0],i=r[1],u=[];switch(a.condition){case A.ALWAYS:u=[0,1,2,3];break;case A.AT_LEAST_FAIL:u=[0,1,2];break;case A.AT_LEAST_SUCC:u=[0,1];break;case A.CRIF:u=[3];break;case A.CRIT:u=[0];break;case A.FAIL:u=[2];break;case A.FAIL_WORSE:u=[2,3];break;case A.SUCC:u=[1];break;case A.SUCC_WORSE:u=[1,2,3]}for(var d=0,o=u;d<o.length;d++){var m=o[d];l[m].normal.damageDist=Ae(l[m].normal.damageDist,c),l[m].persistent.damageDist=Ae(l[m].persistent.damageDist,i)}})),[xe([l[0].normal,u[0]],[l[1].normal,u[1]],[l[2].normal,u[2]],[l[3].normal,u[3]]),xe([l[0].persistent,u[0]],[l[1].persistent,u[1]],[l[2].persistent,u[2]],[l[3].persistent,u[3]])]}}]),e}(),gt=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(2),l=Object(s.a)(r,2),u=l[0],d=l[1],m=Object(o.c)(ut),p=Object(o.c)($e),v=Object(o.c)(Ee),f=Object(o.c)(Me),g=Object(o.c)(ue),E=new ft(p,v,f,g),h=0,b=0,y=[],O=[],I=[];for(var C in m){for(var A=m[C],x=0,R=[1],k=[1],S=0;S<A.apIds.length;S++){var T=p[A.apIds[S]],N=E.evalPath(T),j=Object(s.a)(N,2),D=j[0],F=j[1];R=Ae(R,D),k=Ae(k,F)}h=Math.max(h,R.length-1),b=Math.max(b,k.length-1);for(var L=[],P=0;P<R.length;P++)L.push({x:P,y:R[P]}),x+=R[P]*P;y.push({fill:"origin",label:A.name,data:L,xAxisID:"damage",yAxisID:"chance",spanGaps:!1}),O.push(i.a.createElement("div",{key:A.id},A.name,": ",x.toFixed(2))),I.push(i.a.createElement("div",{key:A.id},A.name,": ",(0).toFixed(2)))}for(var w=[],M=0;M<=h;M++)w.push(M);var W={labels:w,datasets:y};return i.a.createElement("div",{className:"box"},"Add persistent damage:",i.a.createElement("input",{type:"checkbox",checked:a,onChange:function(e){return n(e.target.checked)}}),", persistent damage multiplier:",i.a.createElement("input",{type:"number",value:u||0,onChange:function(e){return d(e.target.valueAsNumber)}}),i.a.createElement("div",null,"Expected Damage:",O),i.a.createElement(ot.a,{data:W}),a?"":i.a.createElement("div",null,"Expected Persistent Damage:",I))},Et=[];for(var ht in A)Et.push(i.a.createElement("option",{key:ht},A[ht]));var bt=[];for(var yt in f)bt.push(i.a.createElement("option",{key:yt},f[yt]));var Ot=[];for(var It in v)Ot.push(i.a.createElement("option",{key:It},v[It]));var Ct=[];for(var At in b)Ct.push(i.a.createElement("option",{key:At},b[At]));var xt=[];for(var Rt in h)xt.push(i.a.createElement("option",{key:Rt},h[Rt]));var kt=[];for(var St in x)kt.push(i.a.createElement("option",{key:St},x[St]));var Tt=[];for(var Nt in{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20})Tt.push(i.a.createElement("option",{key:Nt},Nt));var jt=[];for(var Dt in{4:4,6:6,8:8,10:10,12:12})jt.push(i.a.createElement("option",{key:Dt},Dt));var Ft=[];for(var Lt in I)Ft.push(i.a.createElement("option",{key:Lt},I[Lt]));var Pt=[];for(var wt in C)Pt.push(i.a.createElement("option",{key:wt},C[wt]));var Mt=function(e){var t=e.id,a=Object(o.b)(),n=Object(o.c)((function(e){return lt(e,t)})).name;return i.a.createElement("div",{className:"box"},i.a.createElement("label",{htmlFor:"routineName"},"Routine Name:"),i.a.createElement("input",{id:"routineName",type:"text",placeholder:"Enter routine name",value:n,onChange:function(e){return a(rt({id:t,changes:{name:e.target.value}}))}}))},Wt=function e(t){var a=t.id,n=t.parentId,r=t.routineId,c=t.displayCondition,l=void 0===c||c,u=Object(o.c)((function(e){return Je(e,a)})),s=u.condition,d=u.level,m=u.override,p=u.defaultActivity,f=u.type,g=u.targetType,E=u.value,h=u.MAP,b=u.damageCondition,y=u.diceNum,O=u.diceSize,I=u.staticDamage,C=u.damageType,A=u.material,x=u.damages,R=u.effects,k=u.apIds,S=Object(o.b)();return i.a.createElement("div",{className:"box"},l?i.a.createElement("div",null,"Condition: ",i.a.createElement("select",{value:s,onChange:function(e){return S(Ke({id:a,changes:{condition:e.target.value}}))}},Et)):"",i.a.createElement("div",{className:""},i.a.createElement("div",{className:"flexbox"},i.a.createElement("button",{className:"delete",onClick:function(e){S(Ye({id:a,parentId:n,routineId:r}))}},"-"),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"override"},"Override: "),i.a.createElement("input",{id:"override",type:"checkbox",checked:m,onChange:function(e){return S(Ke({id:a,changes:{override:e.target.checked}}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("label",{htmlFor:"Level"}," Level: "),i.a.createElement("input",{id:"Level",type:"number",value:d,min:1,max:20,onChange:function(e){var t=parseInt(e.target.value)||1;t>20&&(t=20),S(Ke({id:a,changes:{level:t}}))}})),i.a.createElement("span",{className:"input"},i.a.createElement("select",{value:p,onChange:function(e){return S(Ke({id:a,changes:{defaultActivity:e.target.value}}))}},bt)),i.a.createElement("span",{className:"input"},i.a.createElement("select",{value:f,onChange:function(e){return S(Ke({id:a,changes:{type:e.target.value}}))}},Ot),f===v.STRIKE?" +":" DC: ",i.a.createElement("input",{type:"number",value:E||0,onChange:function(e){return S(Ke({id:a,changes:{value:parseInt(e.target.value)}}))}})),i.a.createElement("span",{className:"input"}," MAP: ",i.a.createElement("select",{value:h,onChange:function(e){return S(Ke({id:a,changes:{MAP:e.target.value}}))}},Ct)),i.a.createElement("span",{className:"input"}," VS: ",i.a.createElement("select",{value:g,onChange:function(e){S(Ke({id:a,changes:{targetType:e.target.value}}))}},xt))),i.a.createElement("div",{className:"flexbox"},"Damage:",i.a.createElement("select",{value:b,onChange:function(e){return S(Fe({id:a,changes:{damageCondition:e.target.value}}))}},kt),i.a.createElement("select",{value:y,onChange:function(e){return S(Fe({id:a,changes:{diceNum:parseInt(e.target.value)}}))}},Tt),"d",i.a.createElement("select",{value:O,onChange:function(e){return S(Fe({id:a,changes:{diceSize:parseInt(e.target.value)}}))}},jt)," + ",i.a.createElement("input",{type:"number",value:I,onChange:function(e){return S(Fe({id:a,changes:{staticDamage:parseInt(e.target.value)}}))}}),i.a.createElement("select",{value:C,onChange:function(e){S(Fe({id:a,changes:{damageType:e.target.value}}))}},Ft),i.a.createElement("select",{value:A,onChange:function(e){S(Fe({id:a,changes:{material:e.target.value}}))}},Pt)),i.a.createElement("div",{className:"box"},"Additional Damage: ",x.map((function(e){return i.a.createElement(_t,{parentId:a,id:e,key:e})})),i.a.createElement("button",{className:"add",onClick:function(){return S(De({parentId:a}))}},"+")),i.a.createElement("div",{className:"box"},"Effects: ",R)),i.a.createElement("div",{className:"box"},k.map((function(t){return i.a.createElement(e,{id:t,parentId:a,key:t})})),i.a.createElement("button",{className:"add",onClick:function(){return S(Ge({parentId:a}))}},"+"),i.a.createElement("button",{className:"add",onClick:function(){return S(Ge({parentId:a,applyMAP:!0}))}},"+MAP")))},_t=function(e){var t=e.parentId,a=e.id,n=Object(o.c)((function(e){return we(e,a)})),r=n.damageCondition,c=n.diceNum,l=n.diceSize,u=n.staticDamage,s=n.damageType,d=n.material,m=n.persistent,p=Object(o.b)();return i.a.createElement("div",{className:"box"},i.a.createElement("button",{className:"delete",onClick:function(e){p(je({id:a,parentId:t}))}},"-"),i.a.createElement("select",{value:r,onChange:function(e){return p(Fe({id:a,changes:{damageCondition:e.target.value}}))}},kt),i.a.createElement("select",{value:c,onChange:function(e){return p(Fe({id:a,changes:{diceNum:parseInt(e.target.value)}}))}},Tt),"d",i.a.createElement("select",{value:l,onChange:function(e){return p(Fe({id:a,changes:{diceSize:parseInt(e.target.value)}}))}},jt)," + ",i.a.createElement("input",{type:"number",value:u,onChange:function(e){return p(Fe({id:a,changes:{staticDamage:parseInt(e.target.value)}}))}}),i.a.createElement("select",{value:s,onChange:function(e){p(Fe({id:a,changes:{damageType:e.target.value}}))}},Ft),i.a.createElement("select",{value:d,onChange:function(e){p(Fe({id:a,changes:{material:e.target.value}}))}},Pt)," Persistent: ",i.a.createElement("input",{type:"checkbox",checked:m,onChange:function(e){return p(Fe({id:a,changes:{persistent:e.target.checked}}))}}))},Ut=function(){var e=Object(o.c)(dt),t=Object(o.c)((function(t){return lt(t,e)})).apIds,a=Object(o.b)();return i.a.createElement("div",{className:"selectedRoutine"},i.a.createElement(Mt,{id:e}),t.map((function(t){return i.a.createElement(Wt,{id:t,routineId:e,key:t,displayCondition:!1})})),i.a.createElement("button",{className:"add",onClick:function(){return a(Ge({routineId:e}))}},"+"))},Ht=function(){var e=Object(o.c)(st),t=Object(o.c)(dt),a=Object(o.b)(),n=[];return e.forEach((function(e){n.push(i.a.createElement("option",{value:e.id,key:e.id},e.name))})),i.a.createElement("div",{className:"box"},"Selected Routine:",i.a.createElement("select",{value:t,onChange:function(e){return a(at(e.target.value))}},n),i.a.createElement("button",{className:"add",onClick:function(){return a(tt())}},"+"))},Bt=function(){return i.a.createElement("div",{className:"box"},"Import and Export Here")};a(189);var Gt,zt=function(e){return i.a.createElement("div",{className:"PF2App"},i.a.createElement(Ie,{id:0}),i.a.createElement(gt,null),i.a.createElement(Ut,null),i.a.createElement(Ht,null),i.a.createElement(Bt,null))},Kt=Object(m.b)(),Yt=Object(m.c)({name:"effects",initialState:Kt.getInitialState(),reducers:{effectAdded:Kt.addOne,effectUpdated:Kt.updateOne}}),Vt=Yt.actions,Xt=(Vt.effectAdded,Vt.effectUpdated,Yt.reducer),Jt=Kt.getSelectors((function(e){return e.effects})),$t=(Jt.selectById,Jt.selectIds,Jt.selectEntities,Jt.selectAll,Jt.selectTotal,Object(m.a)({reducer:{routines:ct,activityPaths:Ve,damages:Le,effects:Xt,weaknesses:ce,targets:ve}}));$t.dispatch(nt({id:0,name:"Fighter",apIds:[0]})),$t.dispatch(ze({id:0,condition:A.ALWAYS,override:!1,level:1,useDefault:!1,defaultActivity:f.FIGHTER,type:v.STRIKE,targetType:h.AC,targetInfoId:0,value:9,MAP:b.N1,damageCondition:x.STRIKE,diceNum:1,diceSize:8,staticDamage:4,damageType:I.S,material:C.NONE,damages:[],effects:[],apIds:[]})),$t.dispatch(me((Gt={id:0,name:"Custom Target",overrideDefault:!0,addMods:!1,level:1,useDefaultAC:!0,defaultAC:g.HIGH},Object(d.a)(Gt,h.AC,16),Object(d.a)(Gt,"useDefaultFort",!0),Object(d.a)(Gt,"defaultFort",E.MODERATE),Object(d.a)(Gt,h.FORT,7),Object(d.a)(Gt,"useDefaultRef",!0),Object(d.a)(Gt,"defaultRef",E.MODERATE),Object(d.a)(Gt,h.REF,7),Object(d.a)(Gt,"useDefaultWill",!0),Object(d.a)(Gt,"defaultWill",E.MODERATE),Object(d.a)(Gt,h.WILL,7),Object(d.a)(Gt,"useDefaultPer",!0),Object(d.a)(Gt,"defaultPer",E.MODERATE),Object(d.a)(Gt,h.PER,7),Object(d.a)(Gt,"flatfooted",!1),Object(d.a)(Gt,"weaknesses",[]),Gt)));var qt=$t;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(o.a,{store:qt},i.a.createElement(zt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(190)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.7c1725e5.chunk.js.map