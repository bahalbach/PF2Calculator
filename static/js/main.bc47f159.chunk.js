(this.webpackJsonppf2=this.webpackJsonppf2||[]).push([[0],{175:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);for(var i,n,r,c,s,l,d,o,u=a(249),p=a(1),j=a.n(p),f=a(34),m=a.n(f),b=(a(175),a(259)),h=a(242),g=a(265),O=a(258),v=a(22),x=a.n(v),S=a(251),y=a(108),A=a(260),C=a(273),T=a(270),E=a(272),I=a(244),w=a(7),L=a(4),R={DISTRIBUTION:"Damage Distribution",PMDEFENSE:"+/- AC/Save Bonus",PMRES:"+/- Resistance/Weakness"},P="Importing",k="Successful",W="Failure",D="Message Seen",N={LOW:"Low",MODERATE:"Moderate",HIGH:"High",EXTREME:"Extreme"},F={TERRIBLE:"Terrible",LOW:"Low",MODERATE:"Moderate",HIGH:"High",EXTREME:"Extreme"},z={LOW:"Low",MODERATE:"Moderate",HIGH:"High"},M={ALWAYS:"Always",CRIT:"On Crit",SUCC:"On Success",FAIL:"On Failure",CRIF:"On Crit Fail",AT_LEAST_SUCC:"Success or better",AT_LEAST_FAIL:"Failure or better",FAIL_WORSE:"Failure or worse",SUCC_WORSE:"Success or worse"},B={NORMAL:"Normal",ADVANTAGE:"Advantage",DISADVANTAGE:"Disadvantage"},G={STRIKE:"Strike",SAVE:"Save",SKILL:"Skill Check",SPELLATTACK:"Spell Attack"},V={UNTRAINED:"Untrained",TRAINED:"Trained Proficiency",FIGHTERWEAPON:"Fighter Weapon (1, 5, 13)",MARTIALWEAPON:"Martial Weapon (5, 13)",CASTERWEAPON:"Caster Weapon (11)",ALCHWEAPON:"Alchemist Weapon (7)",CASTERSPELL:"Caster Spell (7, 15, 19)",CLASSDC1:"Class/Spell (9, 17)",CLASSDC2:"Class/Spell (11, 19)",MCSPELL:"MC Spell (12, 18)",MAXSKILL:"Max skill (3, 7, 15)",ANIMALCOMPANION:"Animal/Construct Companion (14)",SAVAGEACATHLETICS:"Construct/Savage AC Atheletics (8, 14)"},H={AS10:"10",AS18a:"18 to 24 apex(17)",AS18:"18 to 22",AS16a:"16 to 22 apex(17)",AS16pp:"16 to 20",AS16p:"16 to 18",AS14pp:"14 to 20",AS14p:"14 to 18",AS12p:"12 to 18",AS10p:"10 to 18",NIMBLEAC:"Dex 16 Nimble AC",SAVAGEAC:"Str 16 Construct/Savage AC"},U={NONE:"None",WEAPON:"Weapon (2, 10, 16)",Gate_Attenuator:"Gate Attenuator (3, 11)",SKILL:"Skill (3, 9, 17)",BOMB:"Bomb (3, 11, 17)",MUTAGEN:"Mutagen (1, 3, 11, 17)"},_={N1:"0 (0x-5)",N2:"-5 (1x-5)",N3:"-10 (2x-5)",A1:"0 (0x-4)",A2:"-4 (1x-4)",A3:"-8 (2x-4)",R1:"0 (0x-3)",R2:"-3 (1x-3)",R3:"-6 (2x-3)",RA1:"0 (0x-2)",RA2:"-2 (1x-2)",RA3:"-4 (2x-2)",RAA1:"0 (0x-1)",RAA2:"-1 (1x-1)",RAA3:"-2 (2x-1)"},K={"0 (0x-5)":"-5 (1x-5)","-5 (1x-5)":"-10 (2x-5)","-10 (2x-5)":"-10 (2x-5)","0 (0x-4)":"-4 (1x-4)","-4 (1x-4)":"-8 (2x-4)","-8 (2x-4)":"-8 (2x-4)","0 (0x-3)":"-3 (1x-3)","-3 (1x-3)":"-6 (2x-3)","-6 (2x-3)":"-6 (2x-3)","0 (0x-2)":"-2 (1x-2)","-2 (1x-2)":"-4 (2x-2)","-4 (2x-2)":"-4 (2x-2)","0 (0x-1)":"-1 (1x-1)","-1 (1x-1)":"-2 (2x-1)","-2 (2x-1)":"-2 (2x-1)"},Y={AC:"AC",FORT:"Fort",REF:"Ref",WILL:"Will",PER:"Perception",selfDC:"Self Standard DC",targetDC:"Target Standard DC"},J={STRIKE:"x1 hit, x2 crit",BASIC:"Basic save",ALWAYS:"Always",CRIT:"On Crit",SUCC:"On Success",FAIL:"On Failure",CRIF:"On Crit Fail",AT_LEAST_SUCC:"Success or better",AT_LEAST_FAIL:"Failure or better",FAIL_WORSE:"Failure or worse",SUCC_WORSE:"Success or worse"},X={NONE:"None",WEAPON:"Weapon (1, 4, 12, 19)",ELEMENTALBLAST:"Elemental Blast (1, 5, 9, 13, 17)",SPELLLEVEL1:"1 x Spell Level",SPELLLEVEL2:"2 x Spell Level",LEVEL:"Level",HALFLEVEL:"1/2 Level",RUNE:"Runes (8, 15)",RUNE2:"Runes (8, 10, 16)",DEADLY:"Deadly (1, 12, 19)",BOMB:"Bomb (1, 3, 11, 17)",SNEAK:"Sneak Attack (1, 5, 11, 17)",STRATEGIC:"Strategic Strike (1, 5, 9, 13, 17)",PRECISE:"Precise Strike (1, 1, 5, 9, 13, 17)",PRECISIONEDGE:"Precision Edge 1(1, 11, 19)",PRECISIONEDGE2:"Precision Edge 2(17, 19)",PRECISIONEDGE3:"Precision Edge 3(19)",KISTRIKE:"Ki Strike (1, 9, 17)",ANIMALCOMPANION:"Animal/Construct Companion (1, 4, 14)"},$=Object(L.a)(Object(L.a)({NONE:"None",FIGHTERWEAPONSPEC:"Fighter Weapon Specialization",MARTIALWEAPONSPEC:"Martial Weapon Specializaton",CASTERWEAPONSPEC:"Caster Weapon Specializaton"},H),{},{WEAPON:"Weapon (1, 4, 12, 19)",SPELLLEVEL1:"1 x Spell Level",LEVEL:"Level",HALFLEVEL:"1/2 Level",BOMB:"Bomb Splash (1, 3, 11, 17)",BOMBPLUS:"Max Int Calculated/Expanded Splash",RAGE:"Rage",ANIMALRAGE:"Animal Rage",DRAGONRAGE:"Dragon Rage",GIANTRAGE:"Giant Rage",SPIRITRAGE:"Spirit Rage",PRECISE:"Precise Strike (1, 1, 5, 9, 13, 17)",ARCANECASCADE:"Arcane Cascade",OVERDRIVES:"Overdrive Success",OVERDRIVEC:"Overdrive Critical",IMPLEMENT:"Implement's Empowerment",CONSTRUCT:"Construct Companion Damage",NIMBLE:"Str 14 Nimble AC Damage",SAVAGE:"Str 16 Savage AC Damage"}),q={NONE:"None",B:"bludgeoning",P:"piercing",S:"slashing",BLEED:"bleed",FIRE:"fire",COLD:"cold",MENTAL:"mental",FORCE:"force",PRECISION:"precision"},Q={NONE:"none",COLD_IRON:"cold iron",SILVER:"silver",ADAMANTINE:"adamantine"},Z={FLATFOOT:"Flatfooted",PRONE:"Prone",GRAPPLED:"Grappled",RESTRAINED:"Restrained"},ee={FRIGHTENED:"Frightened",CLUMSY:"Clumsy",BONUSC1:"Cicumstance Bonus to next attack",BONUSSA:"Status Bonus to all attacks"},te=Object(L.a)(Object(L.a)({},Z),ee),ae=Object(L.a)(Object(L.a)({Always:"Always"},Z),ee),ie={4:4,6:6,8:8,10:10,12:12},ne=a(267),re=a(268),ce=a(252),se=a(256),le=a(83),de=function(){return Object(le.b)()},oe=le.c,ue=a(29),pe=Object(ue.b)(),je=0,fe=Object(ue.c)({name:"weaknesses",initialState:pe.getInitialState(),reducers:{weaknessAdded:pe.addOne,weaknessUpdated:pe.updateOne,weaknessCreated:{reducer:function(e,t){var a=t.payload,i=a.id,n=a.type,r=a.value;pe.addOne(e,{id:i,type:n,value:r})},prepare:function(e){var t=e.parentId,a=e.type,i=e.value;return{payload:{id:++je,parentId:t,type:a,value:i}}}},weaknessRemoved:function(e,t){pe.removeOne(e,t.payload.id)}}}),me=fe.actions,be=me.weaknessRemoved,he=me.weaknessCreated,ge=(me.weaknessAdded,me.weaknessUpdated),Oe=fe.reducer,ve=pe.getSelectors((function(e){return e.weaknesses})),xe=ve.selectById,Se=(ve.selectIds,ve.selectEntities),ye=(ve.selectAll,ve.selectTotal,a(3)),Ae=a(16),Ce=function(e){return Te(e.concat(e),!0)},Te=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0,i={},n=1;n<=20;n++){var r,c=Object(Ae.a)(e);try{for(c.s();!(r=c.n()).done;){r.value===n&&(a+=1)}}catch(s){c.e(s)}finally{c.f()}i[n]=t?a+n:a}return i},Ee=function(e){for(var t=0,a={},i=1;i<=20;i++){var n,r=Object(Ae.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;c[0]===i&&(t+=c[1])}}catch(s){r.e(s)}finally{r.f()}a[i]=t}return a},Ie={},we={},Le={},Re={},Pe={},ke={},We={},De={},Ne={},Fe={},ze={},Me={},Be={},Ge={},Ve={},He={},Ue={},_e={},Ke={},Ye={},Je={},Xe={},$e={},qe={},Qe={},Ze={},et={},tt=1;tt<=20;tt++)Ze[tt]=Math.floor((tt+1)/2),et[tt]=2*Math.floor((tt+1)/2);for(var at={},it={},nt={},rt={},ct={},st={},lt={},dt={},ot={},ut={},pt={},jt={},ft={},mt={},bt={},ht={},gt={},Ot={},vt={},xt={},St={},yt={},At={},Ct={},Tt={},Et={},It={},wt={},Lt={},Rt={},Pt={},kt={},Wt={},Dt={},Nt={},Ft={},zt={},Mt={},Bt={},Gt={},Vt={},Ht={},Ut={},_t=1;_t<=20;_t++)Ie[_t]=0,we[_t]=_t,Le[_t]=Math.floor(_t/2),Re[_t]=_t+2,Pe[_t]=_t+2,ke[_t]=4,We[_t]=3,De[_t]=3,Ne[_t]=3,Fe[_t]=2,ze[_t]=2,Me[_t]=1,Be[_t]=0,Ge[_t]=3,Ve[_t]=3,He[_t]=2,Ue[_t]=2,_e[_t]=2,Ke[_t]=2,Wt[_t]=_t+2,Dt[_t]=_t+2,Nt[_t]=_t+2,Ft[_t]=_t+2,zt[_t]=_t+2,Ye[_t]=0,Je[_t]=0,Xe[_t]=0,$e[_t]=0,qe[_t]=1,Qe[_t]=1,at[_t]=0,it[_t]=0,nt[_t]=1,rt[_t]=1,ct[_t]=1,st[_t]=2,lt[_t]=1,pt[_t]=1,dt[_t]=1,ot[_t]=0,ut[_t]=0,jt[_t]=0,ft[_t]=0,mt[_t]=3,bt[_t]=2,ht[_t]=3,gt[_t]=1,Ot[_t]=2,vt[_t]=2,xt[_t]=4,St[_t]=6,yt[_t]=3,At[_t]=1,Ct[_t]=2,Tt[_t]=4,Et[_t]=2,_t>=2&&(Ye[_t]=1),_t>=3&&(Pe[_t]=_t+4,Je[_t]=1,Xe[_t]=1,$e[_t]=1,qe[_t]=2,gt[_t]=2,Ct[_t]=3,Tt[_t]=5,Et[_t]=4),_t>=4&&(Qe[_t]=2,pt[_t]=2,mt[_t]=4,bt[_t]=3,ht[_t]=4,gt[_t]=4,Ge[_t]=4,Ve[_t]=4),_t>=5&&(He[_t]=4,We[_t]=4,De[_t]=4,Ne[_t]=4,Fe[_t]=3,ze[_t]=3,Me[_t]=2,Be[_t]=1,rt[_t]=2,ct[_t]=2,st[_t]=3),_t>=7&&(Ue[_t]=4,jt[_t]=1,Ke[_t]=4,Pe[_t]=_t+6,Ot[_t]=6,vt[_t]=5,xt[_t]=8,St[_t]=10,yt[_t]=7,At[_t]=2,Ct[_t]=4,Tt[_t]=6),_t>=8&&(zt[_t]=_t+4,at[_t]=1,it[_t]=1,mt[_t]=8,bt[_t]=6,ht[_t]=9,Ge[_t]=6,Ve[_t]=6),_t>=9&&(Xe[_t]=2,Wt[_t]=_t+4,ct[_t]=3,st[_t]=4,lt[_t]=2),_t>=10&&(Ye[_t]=2,ke[_t]=5,Fe[_t]=4,ze[_t]=4,Me[_t]=3,Be[_t]=2,it[_t]=2,gt[_t]=7,Tt[_t]=7),_t>=11&&(_e[_t]=4,Dt[_t]=_t+4,Je[_t]=2,$e[_t]=2,qe[_t]=3,gt[_t]=8,rt[_t]=3,Et[_t]=6,dt[_t]=2),_t>=12&&(Qe[_t]=3,Nt[_t]=_t+4,nt[_t]=2),_t>=13&&(He[_t]=6,ft[_t]=1,ct[_t]=4,st[_t]=5),_t>=14&&(Ft[_t]=_t+4,zt[_t]=_t+6,pt[_t]=3,mt[_t]=11,bt[_t]=8,ht[_t]=13,Ge[_t]=8,Ve[_t]=7),_t>=15&&(jt[_t]=2,We[_t]=5,De[_t]=5,Me[_t]=4,Be[_t]=3,Ke[_t]=6,Pe[_t]=_t+8,at[_t]=2,Ot[_t]=12,vt[_t]=12,xt[_t]=16,St[_t]=18,yt[_t]=13,At[_t]=1,Ct[_t]=5,Tt[_t]=8),_t>=16&&(Ye[_t]=3,it[_t]=3),_t>=17&&(We[_t]=6,ke[_t]=6,Xe[_t]=3,Wt[_t]=_t+6,$e[_t]=3,qe[_t]=4,gt[_t]=10,rt[_t]=4,ct[_t]=5,st[_t]=6,lt[_t]=3,ot[_t]=1,Ct[_t]=6,Tt[_t]=9),_t>=18&&(Nt[_t]=_t+6),_t>=19&&(Qe[_t]=4,Ke[_t]=8,Dt[_t]=_t+6,nt[_t]=3,Et[_t]=8,dt[_t]=3,ot[_t]=2,ut[_t]=1),_t>=20&&(ke[_t]=7,Be[_t]=4,gt[_t]=11,Tt[_t]=10),It[_t]=_t+He[_t]+2,wt[_t]=_t+He[_t],Lt[_t]=_t+_e[_t],Rt[_t]=_t+Ue[_t],Pt[_t]=_t+Ke[_t],kt[_t]=10+_t+Ke[_t]+ke[_t],Mt[_t]=ke[_t]+jt[_t]*(He[_t]+2)/2,Bt[_t]=jt[_t]*(He[_t]+2)/2,Gt[_t]=ke[_t]+jt[_t]*He[_t]/2,Vt[_t]=jt[_t]*He[_t]/2,Ht[_t]=Ne[_t]+ft[_t]*_e[_t]/2,Ut[_t]=ft[_t]*_e[_t]/2;var Kt=(i={},Object(ye.a)(i,V.UNTRAINED,Te([])),Object(ye.a)(i,V.TRAINED,Ce([1])),Object(ye.a)(i,V.FIGHTERWEAPON,Ce([1,1,5,13])),Object(ye.a)(i,V.MARTIALWEAPON,Ce([1,5,13])),Object(ye.a)(i,V.CASTERWEAPON,Ce([1,11])),Object(ye.a)(i,V.ALCHWEAPON,Ce([1,7])),Object(ye.a)(i,V.CASTERSPELL,Ce([1,7,15,19])),Object(ye.a)(i,V.CLASSDC1,Ce([1,9,17])),Object(ye.a)(i,V.CLASSDC2,Ce([1,11,19])),Object(ye.a)(i,V.MCSPELL,Ce([1,12,18])),Object(ye.a)(i,V.MAXSKILL,Ce([1,3,7,15])),Object(ye.a)(i,V.ANIMALCOMPANION,Ce([1,14])),Object(ye.a)(i,V.SAVAGEACATHLETICS,Ce([1,4,14])),i),Yt=(n={},Object(ye.a)(n,H.AS10,Te([])),Object(ye.a)(n,H.AS18,Te([1,1,1,1,10,20])),Object(ye.a)(n,H.AS18a,Te([1,1,1,1,10,17,20])),Object(ye.a)(n,H.AS16a,Te([1,1,1,5,15,17])),Object(ye.a)(n,H.AS16pp,Te([1,1,1,5,15])),Object(ye.a)(n,H.AS16p,Te([1,1,1,5])),Object(ye.a)(n,H.AS14pp,Te([1,1,5,10,20])),Object(ye.a)(n,H.AS14p,Te([1,1,5,10])),Object(ye.a)(n,H.AS12p,Te([1,5,10,15])),Object(ye.a)(n,H.AS10p,Te([5,10,15,20])),Object(ye.a)(n,H.NIMBLEAC,Ge),Object(ye.a)(n,H.SAVAGEAC,Ve),n),Jt=(r={},Object(ye.a)(r,U.NONE,Te([])),Object(ye.a)(r,U.WEAPON,Ye),Object(ye.a)(r,U.Gate_Attenuator,Je),Object(ye.a)(r,U.SKILL,Xe),Object(ye.a)(r,U.BOMB,$e),Object(ye.a)(r,U.MUTAGEN,qe),r),Xt={"0 (0x-5)":0,"-5 (1x-5)":-5,"-10 (2x-5)":-10,"0 (0x-4)":0,"-4 (1x-4)":-4,"-8 (2x-4)":-8,"0 (0x-3)":0,"-3 (1x-3)":-3,"-6 (2x-3)":-6,"0 (0x-2)":0,"-2 (1x-2)":-2,"-4 (2x-2)":-4,"0 (0x-1)":0,"-1 (1x-1)":-1,"-2 (2x-1)":-2},$t=(c={},Object(ye.a)(c,X.NONE,Ie),Object(ye.a)(c,X.WEAPON,Qe),Object(ye.a)(c,X.ELEMENTALBLAST,Te([1,5,9,13,17])),Object(ye.a)(c,X.SPELLLEVEL1,Ze),Object(ye.a)(c,X.SPELLLEVEL2,et),Object(ye.a)(c,X.LEVEL,we),Object(ye.a)(c,X.HALFLEVEL,Le),Object(ye.a)(c,X.RUNE,at),Object(ye.a)(c,X.RUNE2,it),Object(ye.a)(c,X.DEADLY,nt),Object(ye.a)(c,X.BOMB,qe),Object(ye.a)(c,X.SNEAK,rt),Object(ye.a)(c,X.STRATEGIC,ct),Object(ye.a)(c,X.PRECISE,st),Object(ye.a)(c,X.PRECISIONEDGE,dt),Object(ye.a)(c,X.PRECISIONEDGE2,ot),Object(ye.a)(c,X.PRECISIONEDGE3,ut),Object(ye.a)(c,X.KISTRIKE,lt),Object(ye.a)(c,X.ANIMALCOMPANION,pt),c),qt=Object(L.a)(Object(L.a)({},Yt),{},(s={},Object(ye.a)(s,$.NONE,Ie),Object(ye.a)(s,$.FIGHTERWEAPONSPEC,Bt),Object(ye.a)(s,$.MARTIALWEAPONSPEC,Vt),Object(ye.a)(s,$.CASTERWEAPONSPEC,Ut),Object(ye.a)(s,$.WEAPON,Qe),Object(ye.a)(s,$.SPELLLEVEL1,Ze),Object(ye.a)(s,$.LEVEL,we),Object(ye.a)(s,$.HALFLEVEL,Le),Object(ye.a)(s,$.BOMB,qe),Object(ye.a)(s,$.BOMBPLUS,gt),Object(ye.a)(s,$.RAGE,Ot),Object(ye.a)(s,$.ANIMALRAGE,vt),Object(ye.a)(s,$.DRAGONRAGE,xt),Object(ye.a)(s,$.GIANTRAGE,St),Object(ye.a)(s,$.SPIRITRAGE,yt),Object(ye.a)(s,$.PRECISE,st),Object(ye.a)(s,$.ARCANECASCADE,At),Object(ye.a)(s,$.OVERDRIVES,Ct),Object(ye.a)(s,$.OVERDRIVEC,Tt),Object(ye.a)(s,$.IMPLEMENT,Et),Object(ye.a)(s,$.CONSTRUCT,mt),Object(ye.a)(s,$.NIMBLE,bt),Object(ye.a)(s,$.SAVAGE,ht),s)),Qt={"-1":18,0:19,1:19,2:21,3:22,4:24,5:25,6:27,7:28,8:30,9:31,10:33,11:34,12:36,13:37,14:39,15:40,16:42,17:43,18:45,19:46,20:48,21:49,22:51,23:52,24:54},Zt=Object(L.a)({},Qt);for(var ea in Zt)Zt[ea]-=3;var ta=Object(L.a)({},Qt);for(var aa in ta)ta[aa]-=4;var ia=Object(L.a)({},Qt);for(var na in ia)ia[na]-=6;var ra,ca=(l={},Object(ye.a)(l,N.EXTREME,Qt),Object(ye.a)(l,N.HIGH,Zt),Object(ye.a)(l,N.MODERATE,ta),Object(ye.a)(l,N.LOW,ia),l),sa=(d={},Object(ye.a)(d,F.EXTREME,{"-1":9,0:10,1:11,2:12,3:14,4:15,5:17,6:18,7:20,8:21,9:23,10:24,11:26,12:27,13:29,14:30,15:32,16:33,17:35,18:36,19:38,20:39,21:41,22:43,23:44,24:46}),Object(ye.a)(d,F.HIGH,{"-1":8,0:9,1:10,2:11,3:12,4:14,5:15,6:17,7:18,8:19,9:21,10:22,11:24,12:25,13:26,14:28,15:29,16:30,17:32,18:33,19:35,20:36,21:38,22:39,23:40,24:42}),Object(ye.a)(d,F.MODERATE,{"-1":5,0:6,1:7,2:8,3:9,4:11,5:12,6:14,7:15,8:16,9:18,10:19,11:21,12:22,13:23,14:25,15:26,16:28,17:29,18:30,19:32,20:33,21:35,22:36,23:37,24:38}),Object(ye.a)(d,F.LOW,{"-1":2,0:3,1:4,2:5,3:6,4:8,5:9,6:11,7:12,8:13,9:15,10:16,11:18,12:19,13:20,14:22,15:23,16:25,17:26,18:27,19:29,20:30,21:32,22:33,23:34,24:36}),Object(ye.a)(d,F.TERRIBLE,{"-1":0,0:1,1:2,2:3,3:4,4:6,5:7,6:8,7:10,8:11,9:12,10:14,11:15,12:16,13:18,14:19,15:20,16:22,17:23,18:24,19:26,20:27,21:28,22:30,23:31,24:32}),d),la={"-1":12,0:14,1:15,2:16,3:18,4:19,5:20,6:22,7:23,8:24,9:26,10:27,11:28,12:30,13:31,14:32,15:34,16:35,17:36,18:38,19:39,20:40,21:42,22:44,23:46,24:48,25:50},da=(o={},Object(ye.a)(o,z.HIGH,{"-1":9,0:18,1:25,2:38,3:56,4:75,5:94,6:119,7:144,8:169,9:194,10:219,11:244,12:269,13:294,14:319,15:344,16:369,17:394,18:419,19:444,20:469,21:499,22:538,23:575,24:625}),Object(ye.a)(o,z.MODERATE,{"-1":7,0:15,1:20,2:30,3:45,4:60,5:75,6:95,7:115,8:135,9:155,10:175,11:195,12:215,13:235,14:255,15:275,16:295,17:315,18:335,19:355,20:375,21:400,22:430,23:460,24:500}),Object(ye.a)(o,z.LOW,{"-1":5,0:12,1:15,2:23,3:34,4:45,5:56,6:71,7:86,8:101,9:116,10:131,11:146,12:161,13:176,14:191,15:206,16:221,17:236,18:251,19:266,20:281,21:300,22:323,23:345,24:375}),o),oa=Object(ue.b)(),ua=Object(ue.c)({name:"targets",initialState:oa.getInitialState(),reducers:{targetAdded:oa.addOne,targetUpdated:function(e,t){oa.updateOne(e,t.payload),"targetLevel"in t.payload.changes&&Oa(e,t.payload.changes.targetLevel)}},extraReducers:function(e){e.addCase(he,(function(e,t){var a=t.payload,i=a.parentId,n=a.id;e.entities[i].weaknesses.push(n)})).addCase(be,(function(e,t){var a=t.payload,i=a.parentId,n=a.id;e.entities[i].weaknesses=e.entities[i].weaknesses.filter((function(e){return e!==n}))}))}}),pa=ua.actions,ja=pa.targetAdded,fa=pa.targetUpdated,ma=ua.reducer,ba=oa.getSelectors((function(e){return e.targets})),ha=ba.selectById,ga=(ba.selectIds,ba.selectEntities),Oa=(ba.selectAll,ba.selectTotal,function(e,t){e.entities[0].overrideAC=ca[e.entities[0].ACTrend][t],e.entities[0].overrideFort=sa[e.entities[0].FortTrend][t],e.entities[0].overrideRef=sa[e.entities[0].RefTrend][t],e.entities[0].overrideWill=sa[e.entities[0].WillTrend][t],e.entities[0].overridePer=sa[e.entities[0].PerTrend][t],e.entities[0].currentHP=Math.round(e.entities[0].currentHP*da[e.entities[0].HPTrend][t]/e.entities[0].overrideHP),e.entities[0].overrideHP=da[e.entities[0].HPTrend][t]}),va=a(266),xa=a(0),Sa=function(e){var t,a=[];for(t in e)a.push(Object(xa.jsx)(va.a,{value:e[t],children:e[t]},t));return a},ya=[];for(ra in R)ya.push(Object(xa.jsx)("option",{children:R[ra]},ra));for(var Aa,Ca=[],Ta=1;Ta<=20;Ta++)Ca.push(Object(xa.jsx)(va.a,{value:Ta,children:Ta},Ta));var Ea,Ia=[];for(Aa in M)Ia.push(Object(xa.jsx)(va.a,{value:M[Aa],children:M[Aa]},Aa));var wa,La=[];for(Ea in B)La.push(Object(xa.jsx)(va.a,{value:B[Ea],children:B[Ea]},Ea));var Ra,Pa=[];for(wa in G)Pa.push(Object(xa.jsx)(va.a,{value:G[wa],children:G[wa]},wa));var ka,Wa=[];for(Ra in V)Wa.push(Object(xa.jsx)(va.a,{value:V[Ra],children:V[Ra]},Ra));var Da,Na=[];for(ka in H)Na.push(Object(xa.jsx)(va.a,{value:H[ka],children:H[ka]},ka));var Fa,za=[];for(Da in U)za.push(Object(xa.jsx)(va.a,{value:U[Da],children:U[Da]},Da));var Ma,Ba=[];for(Fa in _)Ba.push(Object(xa.jsx)(va.a,{value:_[Fa],children:_[Fa]},Fa));var Ga,Va=[];for(Ma in Y)Va.push(Object(xa.jsx)(va.a,{value:Y[Ma],children:Y[Ma]},Ma));var Ha,Ua=[];for(Ga in N)Ua.push(Object(xa.jsx)(va.a,{value:N[Ga],children:N[Ga]},Ga));var _a,Ka=[];for(Ha in F)Ka.push(Object(xa.jsx)(va.a,{value:F[Ha],children:F[Ha]},Ha));var Ya,Ja=[];for(_a in J)Ja.push(Object(xa.jsx)(va.a,{value:J[_a],children:J[_a]},_a));var Xa,$a=[];for(Ya in X)$a.push(Object(xa.jsx)(va.a,{value:X[Ya],children:X[Ya]},Ya));var qa,Qa=[];for(Xa in ie)Qa.push(Object(xa.jsx)(va.a,{value:Xa,children:"d"+Xa},Xa));var Za,ei=[];for(qa in $)ei.push(Object(xa.jsx)(va.a,{value:$[qa],children:$[qa]},qa));var ti,ai=[];for(Za in q)ai.push(Object(xa.jsx)(va.a,{value:q[Za],children:q[Za]},Za));var ii=[];for(ti in Q)ii.push(Object(xa.jsx)(va.a,{value:Q[ti],children:Q[ti]},ti));var ni=[];for(Za in q)ni.push(Object(xa.jsx)(va.a,{value:q[Za],children:q[Za]},Za));for(ti in Q)Q[ti]!==Q.NONE&&ni.push(Object(xa.jsx)(va.a,{value:Q[ti],children:Q[ti]},ti));for(var ri=[],ci=0,si=[.5,1,2];ci<si.length;ci++){var li=si[ci];ri.push(Object(xa.jsx)(va.a,{value:li,children:li},li))}var di,oi,ui=[];for(di in Z)ui.push(Object(xa.jsx)(va.a,{value:Z[di],children:Z[di]},di));for(oi in ee)ui.push(Object(xa.jsx)(va.a,{value:ee[oi],children:ee[oi]},oi));function pi(){var e=oe((function(e){return ha(e,0)})),t=e.name,a=e.levelDiff,i=e.ACTrend,n=e.FortTrend,r=e.RefTrend,c=e.WillTrend,s=e.PerTrend,l=e.HPTrend,d=e.percentHP,o=Object(p.useState)(t),u=Object(w.a)(o,2),j=u[0],f=u[1],m=de();return Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{my:0,py:1},children:[Object(xa.jsx)(O.a,{item:!0,xs:12,sm:6,md:12,lg:6,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Graph Name",placeholder:"Enter the name that will display on the graph",value:j,onChange:function(e){f(e.target.value)},onBlur:function(){return m(fa({id:0,changes:{name:j}}))}})}),Object(xa.jsxs)(O.a,{item:!0,xs:6,sm:3,md:6,lg:3,children:[Object(xa.jsxs)(y.a,{children:["Level Diff: ",a]}),Object(xa.jsx)(ce.a,{value:a,step:1,min:-5,max:5,marks:!0,onChange:function(e,t){m(fa({id:0,changes:{levelDiff:t}}))}})]}),Object(xa.jsx)(O.a,{item:!0,xs:6,sm:3,md:6,lg:3,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"AC-input",children:"AC"}),Object(xa.jsx)(S.a,{labelId:"AC-input",id:"AC",value:i,label:"AC",onChange:function(e){return m(fa({id:0,changes:{ACTrend:e.target.value}}))},children:Ua})]})}),Object(xa.jsx)(O.a,{item:!0,xs:3,sm:3,md:3,lg:3,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"Fort-input",children:"Fort"}),Object(xa.jsx)(S.a,{labelId:"Fort-input",id:"Fort",value:n,label:"Fort",onChange:function(e){return m(fa({id:0,changes:{FortTrend:e.target.value}}))},children:Ka})]})}),Object(xa.jsx)(O.a,{item:!0,xs:3,sm:3,md:3,lg:3,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"Ref-input",children:"Reflex"}),Object(xa.jsx)(S.a,{labelId:"Ref-input",id:"Ref",value:r,label:"Reflex",onChange:function(e){return m(fa({id:0,changes:{RefTrend:e.target.value}}))},children:Ka})]})}),Object(xa.jsx)(O.a,{item:!0,xs:3,sm:3,md:3,lg:3,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"Will-input",children:"Will"}),Object(xa.jsx)(S.a,{labelId:"Will-input",id:"Will",value:c,label:"Will",onChange:function(e){return m(fa({id:0,changes:{WillTrend:e.target.value}}))},children:Ka})]})}),Object(xa.jsx)(O.a,{item:!0,xs:3,sm:3,md:3,lg:3,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"Per-input",children:"Perception"}),Object(xa.jsx)(S.a,{labelId:"Per-input",id:"Per",value:s,label:"Perception",onChange:function(e){return m(fa({id:0,changes:{PerTrend:e.target.value}}))},children:Ka})]})}),Object(xa.jsx)(O.a,{item:!0,xs:6,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"HP-input",children:"Hit Points"}),Object(xa.jsx)(S.a,{labelId:"HP-input",id:"HP",value:l,label:"Hit Points",onChange:function(e){return m(fa({id:0,changes:{HPTrend:e.target.value}}))},children:Sa(z)})]})}),Object(xa.jsxs)(O.a,{item:!0,xs:6,container:!0,justifyContent:"center",children:[Object(xa.jsxs)(y.a,{id:"percent-HP",children:["Remaining HP: ",d,"%"]}),Object(xa.jsx)(h.a,{sx:{px:2,width:1},children:Object(xa.jsx)(ce.a,{"aria-labelledby":"percent-HP",valueLabelDisplay:"auto",value:d,min:0,max:100,step:1,onChange:function(e,t){var a=Number(t);m(fa({id:0,changes:{percentHP:a}}))}})})]})]})}var ji=a(15),fi={Strike:"Strike",Skill:"Skill Action",Cantrip:"Cantrip",Spell:"Spell",Impulse:"Kineticist Impulse"},mi=[X.NONE,X.RUNE,X.RUNE2],bi=["Alchemist","Barbarian","Bard","Champion","Cleric","Druid","Fighter","Gunslinger","Inventor","Investigator","Kineticist","Magus","Monk","Oracle","Ranger","Rogue","Sorcerer","Summoner","Swashbuckler","Witch","Wizard"],hi=[],gi=["Strike","Double Slice","Power Attack","Spell Strike","Ki Strike"],Oi={Alchemist:["Normal","Bomb Strike","Bomb w/ feats","Perpetual Bomb","Perpetual Bomb w/ feats"],Barbarian:["Normal","animal rage","dragon rage","rage","giant rage","spirit rage"],Bard:hi,Champion:hi,Cleric:["Cloistered","Warpriest"],Druid:hi,Fighter:hi,Gunslinger:hi,Inventor:["Normal","Overdrive Success","Overdrive Critical"],Investigator:["Normal","Strategic Strike"],Kineticist:hi,Magus:["Normal","Arcane Cascade"],Monk:hi,Oracle:hi,Ranger:["Normal","Flurry Edge","Precision Edge"],Rogue:["Normal","Sneak Attack"],Sorcerer:hi,Summoner:hi,Swashbuckler:["Normal","Precise Strike","Precise Finisher"],Witch:hi,Wizard:hi},vi=["agile","backswing","deadly","fatal","forceful","ranged","propulsive"],xi=["agile","ranged","propulsive"],Si=["Sword","Hammer","Spear","Other","Pick","Knife"],yi=[V.TRAINED,V.MAXSKILL],Ai=[V.TRAINED,V.CASTERSPELL,V.MCSPELL,V.CLASSDC1,V.CLASSDC2],Ci=[V.TRAINED,V.CASTERSPELL],Ti=["Trip","Grapple","Demoralize"],Ei=["Electric Arc","Daze","Gouging Claw","Produce Flame","Ray of Frost","Telekinetic Projectile"],Ii=["Fear","Fireball","Heroism"],wi=["Elemental Blast"],Li=["Gouging Claw","Produce Flame","Ray of Frost","Telekinetic Projectile"],Ri=function(e){var t="d"+e.dieSize;for(var a in e.traits)e.traits[a]&&(t+=" "+a,"fatal"===a&&(t+=" d"+e.fatalSize),"deadly"===a&&(t+=" d"+e.deadlySize));return e.critSpec&&(t+=" "+e.critSpecType),t},Pi=function(e,t){for(var a={},i=0,n=1;n<=20;n++)i=0,"Perpetual Bomb"!==e.classOption&&"Perpetual Bomb w/ feats"!==e.classOption||(i-=1),"Ranger"===e.cClass&&"Flurry Edge"===e.classOption&&n>=17&&(i+=Math.min(t+e.numPrevStrikes,2)),"Ki Strike"===e.activity&&(i+=1),"Double Slice"!==e.activity||1!==t||(e.twf?e.weapon2.traits.agile:e.weapon1.traits.agile)||(i-=2),a[n]=i;return a},ki=function(e){for(var t={},a=0,i=1;i<=20;i++)a=0,"Power Attack"===e.activity&&i>=1&&(a+=1),"Power Attack"===e.activity&&i>=10&&(a+=1),"Power Attack"===e.activity&&i>=18&&(a+=1),"Perpetual Bomb"!==e.classOption&&"Perpetual Bomb w/ feats"!==e.classOption||(a-=1),t[i]=a;return t},Wi=function(e,t){return"Ranger"===e.cClass&&"Precision Edge"===e.classOption&&t<3||("Rogue"===e.cClass&&"Sneak Attack"===e.classOption||("Investigator"===e.cClass&&"Strategic Strike"===e.classOption||"Swashbuckler"===e.cClass&&("Precise Finisher"===e.classOption||"Precise Strike"===e.classOption)))},Di=function(e,t){if("Ranger"===e.cClass&&"Precision Edge"===e.classOption&&t<3){var a=X.PRECISIONEDGE;return 1===t&&(a=X.PRECISIONEDGE2),2===t&&(a=X.PRECISIONEDGE3),{dieTrend:a,diceSize:ie[8],damageWhen:[ae.Always],damageTrend:[]}}return"Rogue"===e.cClass&&"Sneak Attack"===e.classOption?{dieTrend:X.SNEAK,diceSize:ie[6],damageWhen:[ae.FLATFOOT],damageTrend:[]}:"Investigator"===e.cClass&&"Strategic Strike"===e.classOption?{dieTrend:X.STRATEGIC,diceSize:ie[6],damageWhen:[ae.Always],damageTrend:[]}:"Swashbuckler"===e.cClass&&"Precise Finisher"===e.classOption?{dieTrend:X.PRECISE,diceSize:ie[6],damageWhen:[ae.Always],damageTrend:[]}:"Swashbuckler"===e.cClass&&"Precise Strike"===e.classOption?{dieTrend:X.NONE,diceSize:ie[6],damageWhen:[ae.Always],damageTrend:[$.PRECISE]}:{dieTrend:X.NONE,diceSize:ie[6],damageWhen:[ae.Always],damageTrend:[]}},Ni=function(e,t){var a=q.B,i=ie[4],n=X.SPELLLEVEL1,r=[t];return"Telekinetic Projectile"!==e&&"Gouging Claw"!==e||(i=ie[6]),"Produce Flame"===e&&(a=q.FIRE),"Gouging Claw"===e&&(a=q.S),"Ray of Frost"===e&&(a=q.COLD),{damageType:a,dieTrend:n,diceSize:i,damageTrend:r}},Fi=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=a?e.weapon2:e.weapon1,n=[];i.traits.propulsive||i.traits.ranged||n.push(e.damageScore),["Fighter","Gunslinger"].includes(e.cClass)?n.push($.FIGHTERWEAPONSPEC):["Bard","Cleric","Druid","Oracle","Sorcerer","Summoner","Witch","Wizard"].includes(e.cClass)||["Alchemist"].includes(e.cClass)?n.push($.CASTERWEAPONSPEC):n.push($.MARTIALWEAPONSPEC);var r=0;if(e.twf){r=i.numPrevStrikes;var c,s=Object(Ae.a)(e.isStrikeSecondaryWeapon);try{for(s.s();!(c=s.n()).done;){var l=c.value;(l&&a||!l&&!a)&&(r+=1)}}catch(d){s.e(d)}finally{s.f()}}else r=t+e.numPrevStrikes;if(i.traits.forceful&&(1===r?n.push($.WEAPON):r>=2&&(n.push($.WEAPON),n.push($.WEAPON))),"Barbarian"===e.cClass)switch(e.classOption){case"animal rage":n.push($.ANIMALRAGE);break;case"dragon rage":n.push($.DRAGONRAGE);break;case"rage":n.push($.RAGE);break;case"giant rage":n.push($.GIANTRAGE);break;case"spirit rage":n.push($.SPIRITRAGE)}if("Magus"===e.cClass&&"Arcane Cascade"===e.classOption)n.push($.ARCANECASCADE);return n},zi=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1,a={},i=0,n=1;n<=20;n++){if(i=0,t.traits.propulsive&&(i+=Math.floor(Yt[e.damageScore][n]/2)),"Gunslinger"===e.cClass&&(i+=1),"Inventor"===e.cClass){var r=0;switch(n>=3&&(r=1),n>=7&&(r=2),n>=15&&(r=3),e.classOption){case"Overdrive Success":i+=Math.floor(Yt[e.cantripScore][n]/2)+r;break;case"Overdrive Critical":i+=Yt[e.cantripScore][n]+r}}a[n]=i}return a},Mi=function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1).traits.deadly},Bi=function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1).traits.fatal},Gi=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1;return t.critSpec&&"Pick"===t.critSpecType},Vi=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1;return t.critSpec&&"Knife"===t.critSpecType},Hi=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1;return t.critSpec&&"Sword"===t.critSpecType},Ui=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1;return t.critSpec&&"Hammer"===t.critSpecType},_i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1;return t.critSpec&&"Spear"===t.critSpecType},Ki=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1,a={},i=0,n=1;n<=20;n++)n>=t.critSpecLevel&&t.critSpec&&"Knife"===t.critSpecType&&n>=1&&(i=1),a[n]=i;return a},Yi=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1,a={},i=0,n=1;n<=20;n++)n>=t.critSpecLevel&&(t.critSpec&&"Pick"===t.critSpecType&&(n>=1&&(i=2),n>=4&&(i=4),n>=12&&(i=6),n>=19&&(i=8)),t.critSpec&&"Knife"===t.critSpecType&&(n>=2&&(i=1),n>=10&&(i=2),n>=16&&(i=3))),a[n]=i;return a},Ji=function(e){switch(e.skillActivity){case"Trip":return Y.REF;case"Grapple":return Y.FORT;case"Demoralize":return Y.WILL;default:return Y.selfDC}};function Xi(e){return"object"===typeof e&&"string"===typeof e.name&&"boolean"===typeof e.display&&"number"===typeof e.levelDiff&&"string"===typeof e.description&&$i(e.apIds)&&"number"===typeof e.startLevel&&"number"===typeof e.endLevel}function $i(e){if(Array.isArray(e)){var t,a=Object(Ae.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(Object.values(M).includes(i.condition)&&Object.values(B).includes(i.rollType)&&Object.values(G).includes(i.type)&&Object.values(V).includes(i.profTrend)&&Object.values(H).includes(i.statTrend)&&Object.values(U).includes(i.itemTrend)&&qi(i.bonusAdjustments)&&Object.values(_).includes(i.MAP)&&Object.values(Y).includes(i.targetType)&&$i(i.apIds)&&Qi(i.damages)&&Zi(i.effects)))return!1}}catch(n){a.e(n)}finally{a.f()}return!0}return!1}function qi(e){if("object"!==typeof e)return!1;for(var t=1;t<=20;t++)if("number"!==typeof e[t])return!1;return!0}function Qi(e){if(Array.isArray(e)){var t,a=Object(Ae.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(Array.isArray(i.damageTrend)){var n,r=Object(Ae.a)(i.damageTrend);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(!Object.values($).includes(c))return!1}}catch(o){r.e(o)}finally{r.f()}}if(Array.isArray(i.damageWhen)){var s,l=Object(Ae.a)(i.damageWhen);try{for(l.s();!(s=l.n()).done;){var d=s.value;if(!Object.values(ae).includes(d))return!1}}catch(o){l.e(o)}finally{l.f()}}if(!(Object.values(J).includes(i.damageCondition)&&Object.values(X).includes(i.dieTrend)&&qi(i.dieAdjustments)&&"number"===typeof i.diceSize&&"boolean"===typeof i.fatal&&"number"===typeof i.fatalDie&&qi(i.damageAdjustments)&&Object.values(q).includes(i.damageType)&&Object.values(Q).includes(i.material)&&"boolean"===typeof i.persistent&&[.5,1,2].includes(i.multiplier)))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}return!1}function Zi(e){if(Array.isArray(e)){var t,a=Object(Ae.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(Array.isArray(i.damageWhen)){var n,r=Object(Ae.a)(i.damageWhen);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(!Object.values(ae).includes(c))return!1}}catch(s){r.e(s)}finally{r.f()}}if(!Object.values(M).includes(i.effectCondition)||!Object.values(te).includes(i.effectType)||"number"!==typeof i.startLevel||"number"!==typeof i.endLevel)return!1}}catch(s){a.e(s)}finally{a.f()}return!0}return!1}for(var en=Object(ue.b)(),tn=Object(ue.b)(),an=Object(ue.b)(),nn=Object(ue.b)(),rn=1,cn=1,sn=1,ln=1,dn={},on={},un=1;un<=20;un++)dn[un]=0,on[un]=1;var pn=function(){try{var e=localStorage.getItem("routineState");if(null!==e){var t=JSON.parse(e);return rn=Math.max.apply(Math,Object(ji.a)(t.routines.ids)),cn=Math.max.apply(Math,Object(ji.a)(t.activityPaths.ids)),sn=Math.max.apply(Math,Object(ji.a)(t.damages.ids)),ln=Math.max.apply(Math,Object(ji.a)(t.effects.ids)),t}return}catch(a){return void console.log(a)}}(),jn=pn||{selectedRoutine:0,selectedActivityPath:void 0,parentRoutine:0,parentActivity:void 0,routines:en.getInitialState(),activityPaths:tn.getInitialState(),damages:an.getInitialState(),effects:nn.getInitialState(),importRoutine:D},fn={name:"",type:G.STRIKE,condition:M.ALWAYS,rollType:B.NORMAL,profTrend:V.TRAINED,statTrend:H.AS10,itemTrend:U.NONE,bonusAdjustments:dn,MAP:_.N1,targetType:Y.AC,damages:[],effects:[],apIds:[]},mn={profTrend:V.MARTIALWEAPON,statTrend:H.AS18a,itemTrend:U.WEAPON,damages:[0,1],effects:[0]},bn={type:G.SAVE,profTrend:V.CASTERSPELL,statTrend:H.AS18a,targetType:Y.REF,damages:[2],effects:[]},hn={damageCondition:J.STRIKE,damageType:q.B,material:Q.NONE,persistent:!1,multiplier:1,damageWhen:[ae.Always],dieTrend:X.NONE,dieAdjustments:dn,diceSize:6,fatal:!1,fatalDie:10,damageTrend:[],damageAdjustments:dn},gn={effectCondition:M.ALWAYS,effectType:te.FLATFOOT,effectValue:1,startLevel:1,endLevel:20,damageWhen:[ae.Always]},On=Object(ue.c)({name:"routines",initialState:jn,reducers:{setRoutine:function(e,t){e.selectedRoutine=t.payload,e.selectedActivityPath=void 0,e.parentActivity=void 0,e.parentRoutine=void 0,function(e){try{var t=JSON.stringify(e);localStorage.setItem("routineState",t)}catch(a){}}(e)},setActivityPath:function(e,t){e.selectedActivityPath===t.payload?e.selectedActivityPath=void 0:e.selectedActivityPath=t.payload,e.parentActivity=void 0,e.parentRoutine=void 0},routineAdded:function(e,t){en.addOne(e.routines,t)},routineUpdated:function(e,t){en.updateOne(e.routines,t)},activityPathAdded:function(e,t){tn.addOne(e.activityPaths,t)},activityPathUpdated:function(e,t){tn.updateOne(e.activityPaths,t)},damageAdded:function(e,t){an.addOne(e.damages,t)},damageUpdated:function(e,t){an.updateOne(e.damages,t)},effectAdded:function(e,t){nn.addOne(e.effects,t)},effectUpdated:function(e,t){nn.updateOne(e.effects,t)},routineCreated:{reducer:function(e,t){var a=t.payload,i=a.id,n=a.copy;if(e.parentRoutine=void 0,n&&void 0!==e.selectedRoutine){var r=e.routines.entities[e.selectedRoutine],c=r.name+" Copy",s=xr(e,r.apIds,void 0,i);en.addOne(e.routines,Object(L.a)(Object(L.a)({},r),{},{id:i,name:c,apIds:s}))}else en.addOne(e.routines,{id:i,name:"",display:!0,apIds:[],levelDiff:0,description:"",startLevel:1,endLevel:20}),e.parentRoutine=i;e.selectedRoutine=i,e.selectedActivityPath=void 0,e.parentActivity=void 0},prepare:function(e){var t=e.copy;return{payload:{id:++rn,copy:void 0!==t&&t}}}},routineRemoved:function(e,t){var a=t.payload,i=e.routines.entities[a].apIds;sr(e,i),en.removeOne(e.routines,a),a===e.selectedRoutine&&(0===e.routines.ids.length?e.selectedRoutine=void 0:e.selectedRoutine=e.routines.entities[e.routines.ids[0]].id,e.selectedActivityPath=void 0,e.parentActivity=void 0,e.parentRoutine=void 0)},setNewActivityParent:function(e,t){e.parentRoutine=t.payload.routineId,e.parentActivity=t.payload.parentId,e.selectedActivityPath=void 0},emptyActivityPathCreated:{reducer:function(e,t){var a=t.payload,i=a.id,n=a.routineId,r=a.activityType,c=Object(L.a)(Object(L.a)({},fn),{},{profTrend:V.UNTRAINED,id:i,routineId:n}),s="";if(void 0!==r){if(r===G.STRIKE){var l=Sr(e,mn.damages),d=yr(e,mn.effects);s="Martial - Strike - d8 Sword",c=Object(L.a)(Object(L.a)(Object(L.a)({},fn),mn),{},{id:i,routineId:n,name:s,damages:l,effects:d}),s="Martial - 1 Strike - d8 Sword"}if(r===G.SAVE){var o=Sr(e,bn.damages),u=yr(e,bn.effects);s="Caster - Fireball",c=Object(L.a)(Object(L.a)(Object(L.a)({},fn),bn),{},{id:i,routineId:n,name:s,damages:o,effects:u})}}e.routines.entities[n].apIds.push(i),""===e.routines.entities[n].name&&(e.routines.entities[n].name=s),""===e.routines.entities[n].description&&(e.routines.entities[n].description=""),tn.addOne(e.activityPaths,c),e.selectedActivityPath=i,e.parentActivity=void 0,e.parentRoutine=void 0},prepare:function(e){var t=e.routineId,a=e.activityType;return{payload:{id:++cn,routineId:t,activityType:a}}}},activityPathCreated:function(e,t){var a=e.parentActivity,i=e.parentRoutine,n=t.payload,r=n.strikeInfo,c=n.skillInfo,s=n.cantripInfo,l=n.spellInfo,d=n.impulseInfo,o=0,u="",p="";if(void 0!==r){o=lr(e,a,i,r,0);var j=function(e){var t=e.weapon1,a=e.weapon2,i=e.cClass,n="".concat(e.numStrikes," ").concat(e.activity," with class ").concat(e.cClass," (").concat(e.classOption,") after ").concat(e.numPrevStrikes," previous strikes. Weapon is ").concat(Ri(t));return""!==e.classOption&&(i+=" ("+e.classOption+")"),i+=" - ","Double Slice"!==e.activity&&(i+=e.numStrikes+" "),i+=e.activity+" - "+Ri(t),e.twf&&(i+=" | "+Ri(a),n+=". Weapon two is "+Ri(a)),[i,n]}(r),f=Object(w.a)(j,2);u=f[0],p=f[1]}if(void 0!==c){var m=function(e){return[e.skillActivity,"Use action ".concat(e.skillActivity," with proficiency (").concat(e.proficiency,"), ability score (").concat(e.abilityScore,"), and item bonus (").concat(e.itemBonus,").")]}(c),b=Object(w.a)(m,2);u=b[0],p=b[1],o=ur(e,a,i,c)}if(void 0!==s){var h=function(e){return[e.cantrip,"Cast spell ".concat(e.cantrip," with proficiency (").concat(e.proficiency,") and ability score (").concat(e.abilityScore,").")]}(s),g=Object(w.a)(h,2);u=g[0],p=g[1],o=fr(e,a,i,s)}if(void 0!==l){var O=function(e){return[e.spell,"Cast spell ".concat(e.spell," with proficiency (").concat(e.proficiency,") and ability score (").concat(e.abilityScore,").")]}(l),v=Object(w.a)(O,2);u=v[0],p=v[1],o=br(e,a,i,l)}if(void 0!==d){var x=function(e){return[e.impulse,"Use ".concat(e.impulse," with proficiency (").concat(e.proficiency,") and ability score (").concat(e.abilityScore,").")]}(d),S=Object(w.a)(x,2);u=S[0],p=S[1],o=Or(e,a,i,d)}void 0!==i&&(e.routines.entities[i].apIds.push(o),""===e.routines.entities[i].name&&(e.routines.entities[i].name=u),""===e.routines.entities[i].description&&(e.routines.entities[i].description=p)),void 0!==a&&e.activityPaths.entities[a].apIds.push(o),e.selectedActivityPath=o,e.parentActivity=void 0,e.parentRoutine=void 0},activityPathContinued:{reducer:function(e,t){var a=t.payload,i=a.id,n=a.parentId;e.activityPaths.entities[n].apIds.push(i);var r=e.activityPaths.entities[n],c=Sr(e,r.damages),s=yr(e,r.effects);tn.addOne(e.activityPaths,Object(L.a)(Object(L.a)({},r),{},{id:i,parentId:n,routineId:void 0,MAP:K[r.MAP],damages:c,effects:s,apIds:[]})),e.selectedActivityPath=i},prepare:function(e){var t=e.parentId;return{payload:{id:++cn,parentId:t}}}},activityPathRemoved:function(e,t){var a=t.payload,i=a.id,n=a.parentId,r=a.routineId;sr(e,[i]),void 0!==n&&(e.activityPaths.entities[n].apIds=e.activityPaths.entities[n].apIds.filter((function(e){return e!==i}))),void 0!==r&&(e.routines.entities[r].apIds=e.routines.entities[r].apIds.filter((function(e){return e!==i}))),e.selectedActivityPath=void 0},damageCreated:{reducer:function(e,t){var a=t.payload,i=a.id,n=a.parentId;e.activityPaths.entities[n].damages.push(i),an.addOne(e.damages,Object(L.a)({id:i},hn))},prepare:function(e){var t=e.parentId;return{payload:{id:++sn,parentId:t}}}},damageRemoved:function(e,t){var a=t.payload,i=a.id,n=a.parentId;e.activityPaths.entities[n].damages=e.activityPaths.entities[n].damages.filter((function(e){return e!==i})),an.removeOne(e.damages,i)},effectCreated:{reducer:function(e,t){var a=t.payload,i=a.id,n=a.parentId;e.activityPaths.entities[n].effects.push(i),nn.addOne(e.effects,Object(L.a)(Object(L.a)({},gn),{},{id:i}))},prepare:function(e){var t=e.parentId;return{payload:{id:++ln,parentId:t}}}},effectRemoved:function(e,t){var a=t.payload,i=a.id,n=a.parentId;e.activityPaths.entities[n].effects=e.activityPaths.entities[n].effects.filter((function(e){return e!==i})),nn.removeOne(e.effects,i)},importRoutine:function(e,t){try{e.importRoutine=P;var a=JSON.parse(t.payload);Xi(a)?(e.selectedRoutine=Er(e,a),e.selectedActivityPath=void 0,e.parentActivity=void 0,e.parentRoutine=void 0,e.importRoutine=k):e.importRoutine=W}catch(i){console.log(i),console.log("Parsing failed"),e.importRoutine=W}}}}),vn=On.actions,xn=vn.setRoutine,Sn=vn.setActivityPath,yn=vn.setNewActivityParent,An=vn.routineAdded,Cn=vn.routineUpdated,Tn=vn.routineCreated,En=vn.routineRemoved,In=(vn.activityPathAdded,vn.activityPathUpdated),wn=vn.emptyActivityPathCreated,Ln=vn.activityPathCreated,Rn=vn.activityPathContinued,Pn=vn.activityPathRemoved,kn=(vn.damageAdded,vn.damageUpdated),Wn=vn.damageCreated,Dn=vn.damageRemoved,Nn=(vn.effectAdded,vn.effectUpdated),Fn=vn.effectCreated,zn=vn.effectRemoved,Mn=vn.importRoutine,Bn=On.reducer,Gn=en.getSelectors((function(e){return e.routines.routines})),Vn=Gn.selectById,Hn=(Gn.selectIds,Gn.selectEntities),Un=Gn.selectAll,_n=(Gn.selectTotal,tn.getSelectors((function(e){return e.routines.activityPaths}))),Kn=_n.selectById,Yn=(_n.selectIds,_n.selectEntities),Jn=(_n.selectAll,_n.selectTotal,an.getSelectors((function(e){return e.routines.damages}))),Xn=Jn.selectById,$n=(Jn.selectIds,Jn.selectEntities),qn=(Jn.selectAll,Jn.selectTotal,nn.getSelectors((function(e){return e.routines.effects}))),Qn=qn.selectById,Zn=(qn.selectIds,qn.selectEntities),er=(qn.selectAll,qn.selectTotal,function(e){return e.routines.selectedRoutine}),tr=function(e){return e.routines.selectedActivityPath},ar=function(e){return e.routines.parentActivity},ir=function(e){return void 0===e.routines.selectedActivityPath&&(void 0!==e.routines.parentRoutine||void 0!==e.routines.parentActivity)},nr=function(e){if(void 0!==e.routines.selectedRoutine){var t=e.routines.routines.entities[e.routines.selectedRoutine];return Object(L.a)(Object(L.a)({},t),{},{apIds:Ar(e.routines,t.apIds)})}},rr=function(e){return Object.values(e.routines.routines.entities).filter((function(e){return null===e||void 0===e?void 0:e.display})).map((function(e){return(null===e||void 0===e?void 0:e.name)+": "+(null===e||void 0===e?void 0:e.description)}))},cr=function(e){return e.routines.importRoutine},sr=function(e,t){for(var a=0;a<t.length;){var i=e.activityPaths.entities[t[a]];t.push.apply(t,Object(ji.a)(i.apIds)),an.removeMany(e.damages,i.damages),nn.removeMany(e.effects,i.effects),tn.removeOne(e.activityPaths,i.id),a+=1}},lr=function e(t,a,i,n,r){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M.ALWAYS,l=n.twf&&n.isStrikeSecondaryWeapon[r];n.twf&&"Double Slice"===n.activity&&(l=0!==r);var d=++cn,o=[];if(r<n.numStrikes-1)if("Double Slice"===n.activity){var u=e(t,d,void 0,n,r+1,c+1,M.CRIT),p=e(t,d,void 0,n,r+1,c+1,M.SUCC),j=e(t,d,void 0,n,r+1,c,M.FAIL_WORSE);o.push(u,p,j)}else if("Ranger"===n.cClass&&"Precision Edge"===n.classOption){var f=e(t,d,void 0,n,r+1,c+1,M.AT_LEAST_SUCC),m=e(t,d,void 0,n,r+1,c,M.FAIL_WORSE);o.push(f,m)}else o.push(e(t,d,void 0,n,r+1));var b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1,a=e.cClass;for(var i in""!==e.classOption&&(a+=" ("+e.classOption+")"),a+=" - ",a+=e.activity+" - d"+t.dieSize,t.traits)t.traits[i]&&(a+=" "+i,"fatal"===i&&(a+=" d"+t.fatalSize),"deadly"===i&&(a+=" d"+t.deadlySize));return t.critSpec&&(a+=" "+t.critSpecType),a}(n,l),h=[];h="Double Slice"===n.activity?r<n.numStrikes-1?[]:dr(t,n,r,l,c,!0,s):dr(t,n,r,l,c);var g=or(t,n,r,l),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1;return"Ranger"===e.cClass&&"Flurry Edge"===e.classOption?t.traits.agile?_.RA1:_.R1:t.traits.agile?_.A1:_.N1}(n,l),v=n.numPrevStrikes+("Double Slice"===n.activity?0:r);1===v?O=K[O]:v>=2&&(O=K[K[O]]);var x,S,y=U.WEAPON;return"Bomb Strike"!==n.classOption&&"Bomb w/ feats"!==n.classOption||(y=U.BOMB),"Perpetual Bomb"!==n.classOption&&"Perpetual Bomb w/ feats"!==n.classOption||(y=U.BOMB),tn.addOne(t.activityPaths,Object(L.a)(Object(L.a)({},fn),{},{id:d,parentId:a,routineId:i,condition:s,name:b,type:G.STRIKE,profTrend:(x=n.cClass,S=n.classOption,["Fighter","Gunslinger"].includes(x)?V.FIGHTERWEAPON:["Bard","Druid","Oracle","Sorcerer","Summoner","Witch","Wizard"].includes(x)?V.CASTERWEAPON:["Alchemist"].includes(x)?V.ALCHWEAPON:"Cleric"===x?"Warpriest"===S?V.ALCHWEAPON:V.CASTERWEAPON:V.MARTIALWEAPON),statTrend:n.attackScore,itemTrend:y,bonusAdjustments:Pi(n,r),MAP:O,damages:h,effects:g,apIds:o})),d},dr=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M.FAIL_WORSE,s=i?t.weapon2:t.weapon1,l=[];if(r){var d=t.weapon1;if(c===M.CRIT){var o=++sn,u=X.WEAPON;"Bomb Strike"!==t.classOption&&"Bomb w/ feats"!==t.classOption||(u=X.BOMB),"Perpetual Bomb"!==t.classOption&&"Perpetual Bomb w/ feats"!==t.classOption||(u=X.BOMB);var p=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,multiplier:2,id:o,dieTrend:u,dieAdjustments:ki(t),diceSize:Bi(t)?d.fatalSize:d.dieSize,fatal:Bi(t),fatalDie:d.fatalSize,damageTrend:Fi(t,a-1),damageAdjustments:zi(t)});if(an.addOne(e.damages,p),l.push(o),"Alchemist"!==t.cClass||"Normal"===t.classOption){o=++sn;var j=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,multiplier:2,id:o,dieTrend:d.runes,diceSize:ie[6],damageType:q.FIRE});an.addOne(e.damages,j),l.push(o)}if(Wi(t,n)){var f=Di(t,n),m=f.dieTrend,b=f.diceSize,h=f.damageWhen,g=f.damageTrend;o=++sn;var O=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,multiplier:2,id:o,dieTrend:m,diceSize:b,damageType:q.PRECISION,damageWhen:h,damageTrend:g});an.addOne(e.damages,O),l.push(o)}if(Mi(t)){var v=dn;!Bi(t)&&Gi(t)&&(v=Yi(t)),o=++sn;var x=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,id:o,dieTrend:X.DEADLY,diceSize:d.deadlySize,damageAdjustments:v});an.addOne(e.damages,x),l.push(o)}if(Bi(t)){var S=dn;Gi(t)&&(S=Yi(t)),o=++sn;var y=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,id:o,dieAdjustments:on,diceSize:d.fatalSize,damageAdjustments:S});an.addOne(e.damages,y),l.push(o)}if(!Mi(t)&&!Bi(t)&&Gi(t)){var A=Yi(t);o=++sn;var C=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,id:o,diceSize:d.fatalSize,damageAdjustments:A});an.addOne(e.damages,C),l.push(o)}if(Vi(t)){var T=Yi(t);o=++sn;var E=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,id:o,dieAdjustments:Ki(t),diceSize:ie[6],damageAdjustments:T,persistent:!0});an.addOne(e.damages,E),l.push(o)}}else if(c===M.SUCC){var I=++sn,w=X.WEAPON;"Bomb Strike"!==t.classOption&&"Bomb w/ feats"!==t.classOption||(w=X.BOMB),"Perpetual Bomb"!==t.classOption&&"Perpetual Bomb w/ feats"!==t.classOption||(w=X.BOMB);var R=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,id:I,dieTrend:w,dieAdjustments:ki(t),diceSize:d.dieSize,fatal:!1,fatalDie:d.fatalSize,damageTrend:Fi(t,a-1),damageAdjustments:zi(t)});if(an.addOne(e.damages,R),l.push(I),"Alchemist"!==t.cClass||"Normal"===t.classOption){I=++sn;var P=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.ALWAYS,id:I,dieTrend:d.runes,diceSize:ie[6],damageType:q.FIRE});an.addOne(e.damages,P),l.push(I)}if(Wi(t,n)){var k=Di(t,n),W=k.dieTrend,D=k.diceSize,N=k.damageWhen,F=k.damageTrend;I=++sn;var z=Object(L.a)(Object(L.a)({},hn),{},{damageCondition:J.FAIL_WORSE,id:I,dieTrend:W,diceSize:D,damageType:q.PRECISION,damageWhen:N,damageTrend:F});an.addOne(e.damages,z),l.push(I)}}}var B=++sn,G=X.WEAPON;"Bomb Strike"!==t.classOption&&"Bomb w/ feats"!==t.classOption||(G=X.BOMB),"Perpetual Bomb"!==t.classOption&&"Perpetual Bomb w/ feats"!==t.classOption||(G=X.BOMB);var V=Object(L.a)(Object(L.a)({},hn),{},{id:B,dieTrend:G,dieAdjustments:ki(t),diceSize:s.dieSize,fatal:Bi(t,i),fatalDie:s.fatalSize,damageTrend:Fi(t,a,i),damageAdjustments:zi(t,i)});if(an.addOne(e.damages,V),l.push(B),"Alchemist"!==t.cClass||"Normal"===t.classOption){B=++sn;var H=Object(L.a)(Object(L.a)({},hn),{},{id:B,dieTrend:s.runes,diceSize:ie[6],damageType:q.FIRE});an.addOne(e.damages,H),l.push(B)}if((!r||c!==M.CRIT)&&Wi(t,n)){var U=Di(t,n),_=U.dieTrend,K=U.diceSize,Y=U.damageWhen,Q=U.damageTrend;B=++sn;var Z=Object(L.a)(Object(L.a)({},hn),{},{id:B,dieTrend:_,diceSize:K,damageTrend:Q,damageType:q.PRECISION,damageWhen:Y});an.addOne(e.damages,Z),l.push(B)}if(function(e){return"Ki Strike"===e.activity||"Spell Strike"===e.activity}(t)){B=++sn;var ee=Object(L.a)(Object(L.a)({},hn),{},{id:B},function(e){return"Ki Strike"===e.activity?{dieTrend:X.KISTRIKE,diceSize:ie[6],damageType:q.FORCE}:"Spell Strike"===e.activity?Ni(e.spell,e.cantripScore):{dieTrend:X.NONE,diceSize:ie[6],damageType:q.NONE}}(t));an.addOne(e.damages,ee),l.push(B)}if(function(e){return"Spell Strike"===e.activity&&("Produce Flame"===e.spell||"Gouging Claw"===e.spell)}(t)){B=++sn;var te=Object(L.a)(Object(L.a)({},hn),{},{id:B,damageCondition:J.CRIT},function(e){var t=q.B,a=ie[4];return"Produce Flame"===e.spell&&(t=q.FIRE),"Gouging Claw"===e.spell&&(t=q.BLEED),{damageType:t,diceSize:a,dieTrend:X.SPELLLEVEL1,persistent:!0}}(t));an.addOne(e.damages,te),l.push(B)}if(function(e){return"Bomb Strike"===e.classOption||"Bomb w/ feats"===e.classOption||"Perpetual Bomb"===e.classOption||"Perpetual Bomb w/ feats"===e.classOption}(t)){B=++sn;var ae=Object(L.a)(Object(L.a)({},hn),{},{id:B,damageCondition:J.AT_LEAST_FAIL},function(e){return"Bomb Strike"===e.classOption?{damageTrend:[$.BOMB]}:"Bomb w/ feats"===e.classOption?{damageTrend:[$.BOMBPLUS]}:"Perpetual Bomb"===e.classOption?{damageTrend:[$.BOMB],damageAdjustments:Ee([[1,-1]])}:"Perpetual Bomb w/ feats"===e.classOption?{damageTrend:[$.BOMBPLUS],damageAdjustments:Ee([[1,-1],[4,1],[10,-1]])}:{}}(t));an.addOne(e.damages,ae),l.push(B)}if(Mi(t,i)){var ne=dn;!Bi(t,i)&&Gi(t,i)&&(ne=Yi(t,i)),B=++sn;var re=Object(L.a)(Object(L.a)({},hn),{},{id:B,damageCondition:J.CRIT,dieTrend:X.DEADLY,diceSize:s.deadlySize,damageAdjustments:ne});an.addOne(e.damages,re),l.push(B)}if(Bi(t,i)){var ce=dn;Gi(t,i)&&(ce=Yi(t,i)),B=++sn;var se=Object(L.a)(Object(L.a)({},hn),{},{id:B,damageCondition:J.CRIT,dieAdjustments:on,diceSize:s.fatalSize,damageAdjustments:ce});an.addOne(e.damages,se),l.push(B)}if(!Mi(t,i)&&!Bi(t,i)&&Gi(t,i)){var le=Yi(t,i);B=++sn;var de=Object(L.a)(Object(L.a)({},hn),{},{id:B,damageCondition:J.CRIT,diceSize:s.fatalSize,damageAdjustments:le});an.addOne(e.damages,de),l.push(B)}if(Vi(t,i)){var oe=Yi(t,i);B=++sn;var ue=Object(L.a)(Object(L.a)({},hn),{},{id:B,damageCondition:J.CRIT,dieAdjustments:Ki(t,i),diceSize:ie[6],damageType:q.BLEED,damageAdjustments:oe,persistent:!0});an.addOne(e.damages,ue),l.push(B)}return l},or=function(e,t,a){var i,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=n?t.weapon2:t.weapon1,c=[];if(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Hi(e,t)||Ui(e,t)||_i(e,t)}(t,n)){var s=Z.FLATFOOT;Hi(t,n)&&(s=Z.FLATFOOT),Ui(t,n)&&(s=Z.PRONE),_i(t,n)&&(s=ee.CLUMSY),i=++ln;var l=Object(L.a)(Object(L.a)({},gn),{},{id:i,effectCondition:M.CRIT,effectType:s,effectValue:1,startLevel:r.critSpecLevel});c.push(i),nn.addOne(e.effects,l)}if(function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.weapon2:e.weapon1).traits.backswing}(t,n)){i=++ln;var d=Object(L.a)(Object(L.a)({},gn),{},{id:i,effectCondition:M.FAIL_WORSE,effectType:ee.BONUSC1});c.push(i),nn.addOne(e.effects,d)}return c},ur=function(e,t,a,i){var n=++cn,r=pr(e,i),c=jr(e,i);return tn.addOne(e.activityPaths,Object(L.a)(Object(L.a)({},fn),{},{id:n,parentId:t,routineId:a,name:i.skillActivity,type:G.SKILL,profTrend:i.proficiency,statTrend:i.abilityScore,itemTrend:i.itemBonus,targetType:Ji(i),damages:r,effects:c})),n},pr=function(e,t){var a=[];if(function(e){return"Trip"===e.skillActivity}(t)){var i=++sn,n=Object(L.a)(Object(L.a)({},hn),{},{id:i,damageCondition:J.CRIT,dieAdjustments:on,diceSize:ie[6]});a.push(i),an.addOne(e.damages,n)}return a},jr=function(e,t){var a,i=[],n=Object(Ae.a)(function(e){switch(e.skillActivity){case"Trip":return[{effectCondition:M.AT_LEAST_SUCC,effectType:te.PRONE,effectValue:1}];case"Grapple":return[{effectCondition:M.SUCC,effectType:te.GRAPPLED,effectValue:1},{effectCondition:M.CRIT,effectType:te.RESTRAINED,effectValue:1}];case"Demoralize":return[{effectCondition:M.SUCC,effectType:te.FRIGHTENED,effectValue:1},{effectCondition:M.CRIT,effectType:te.FRIGHTENED,effectValue:2}];default:return[]}}(t));try{for(n.s();!(a=n.n()).done;){var r=a.value,c=r.effectCondition,s=r.effectType,l=r.effectValue,d=++ln,o=Object(L.a)(Object(L.a)({},gn),{},{id:d,effectCondition:c,effectType:s,effectValue:l});i.push(d),nn.addOne(e.effects,o)}}catch(u){n.e(u)}finally{n.f()}return i},fr=function(e,t,a,i){var n=++cn,r=mr(e,i);return tn.addOne(e.activityPaths,Object(L.a)(Object(L.a)(Object(L.a)({},fn),{},{id:n,parentId:t,routineId:a,name:i.cantrip,profTrend:i.proficiency,statTrend:i.abilityScore},function(e){switch(e.cantrip){case"Electric Arc":return{type:"Save",targetType:Y.REF};case"Daze":return{type:"Save",targetType:Y.WILL};default:return{targetType:Y.AC}}}(i)),{},{damages:r})),n},mr=function(e,t){var a=[],i=++sn,n=Object(L.a)(Object(L.a)({},hn),{},{id:i,dieTrend:X.SPELLLEVEL1,damageTrend:[t.abilityScore]},function(e){switch(e.cantrip){case"Electric Arc":return{damageCondition:J.BASIC,diceSize:ie[4]};case"Daze":return{damageCondition:J.BASIC,dieTrend:X.NONE,dieAdjustments:Te([5,9,13,17])};case"Telekinetic Projectile":return{};default:return{diceSize:ie[4]}}}(t));if(a.push(i),an.addOne(e.damages,n),"Produce Flame"===t.cantrip||"Gouging Claw"===t.cantrip){var r=++sn,c=Object(L.a)(Object(L.a)({},hn),{},{id:r,damageCondition:J.CRIT,diceSize:ie[4],dieTrend:X.SPELLLEVEL1,persistent:!0});a.push(r),an.addOne(e.damages,c)}return a},br=function(e,t,a,i){var n=++cn,r=hr(e,i),c=gr(e,i);return tn.addOne(e.activityPaths,Object(L.a)(Object(L.a)(Object(L.a)({},fn),{},{id:n,parentId:t,routineId:a,name:i.spell,type:G.SAVE,profTrend:i.proficiency,statTrend:i.abilityScore},function(e){switch(e.spell){case"Fireball":default:return{targetType:Y.REF};case"Fear":return{targetType:Y.WILL}}}(i)),{},{damages:r,effects:c})),n},hr=function(e,t){var a=[];if("Fireball"===t.spell){var i=++sn,n=Object(L.a)(Object(L.a)({},hn),{},{id:i,damageCondition:J.BASIC,dieTrend:X.SPELLLEVEL2});a.push(i),an.addOne(e.damages,n)}return a},gr=function(e,t){var a=[];if("Fear"===t.spell){var i=++ln,n=Object(L.a)(Object(L.a)({},gn),{},{id:i,effectCondition:M.CRIF,effectType:te.FRIGHTENED,effectValue:3});a.push(i),nn.addOne(e.effects,n),i=++ln;var r=Object(L.a)(Object(L.a)({},gn),{},{id:i,effectCondition:M.FAIL,effectType:te.FRIGHTENED,effectValue:2});a.push(i),nn.addOne(e.effects,r),i=++ln;var c=Object(L.a)(Object(L.a)({},gn),{},{id:i,effectCondition:M.SUCC,effectType:te.FRIGHTENED,effectValue:1});a.push(i),nn.addOne(e.effects,c)}else if("Heroism"===t.spell){var s=++ln,l=Object(L.a)(Object(L.a)({},gn),{},{id:s,effectCondition:M.ALWAYS,effectType:te.BONUSSA,effectValue:1,startLevel:5,endLevel:10});a.push(s),nn.addOne(e.effects,l),s=++ln;var d=Object(L.a)(Object(L.a)({},gn),{},{id:s,effectCondition:M.ALWAYS,effectType:te.BONUSSA,effectValue:1,startLevel:11,endLevel:16});a.push(s),nn.addOne(e.effects,d),s=++ln;var o=Object(L.a)(Object(L.a)({},gn),{},{id:s,effectCondition:M.ALWAYS,effectType:te.BONUSSA,effectValue:1,startLevel:17,endLevel:20});a.push(s),nn.addOne(e.effects,o)}return a},Or=function(e,t,a,i){var n=++cn,r=vr(e,i);return tn.addOne(e.activityPaths,Object(L.a)(Object(L.a)(Object(L.a)({},fn),{},{id:n,parentId:t,routineId:a,name:i.impulse,profTrend:i.proficiency,statTrend:i.abilityScore,itemTrend:U.Gate_Attenuator,MAP:i.weaponInfo.traits.agile?_.A1:_.N1},function(e){return"Elemental Blast"===e.impulse?{type:G.SPELLATTACK,targetType:Y.AC}:{targetType:Y.AC}}(i)),{},{damages:r})),n},vr=function(e,t){var a=[],i=++sn,n=Object(L.a)(Object(L.a)({},hn),{},{id:i},function(e){if("Elemental Blast"===e.impulse){var t=void 0,a=[];e.isTwoAction&&a.push(e.abilityScore);var i=e.weaponInfo.traits.ranged,n=e.weaponInfo.traits.propulsive;if(i||n||a.push(e.strScore),n){for(var r={},c=1;c<=20;c++)r[c]=Math.floor(Yt[e.strScore][c]/2);t=r}return Object(L.a)({dieTrend:X.ELEMENTALBLAST,diceSize:e.weaponInfo.dieSize,damageTrend:a},t?{damageAdjustments:t}:{})}return{diceSize:ie[4]}}(t));return a.push(i),an.addOne(e.damages,n),a},xr=function e(t,a,i,n){var r,c=[],s=Object(Ae.a)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value,d=++cn,o=t.activityPaths.entities[l],u=e(t,o.apIds,d),p=Sr(t,o.damages),j=yr(t,o.effects);tn.addOne(t.activityPaths,Object(L.a)(Object(L.a)({},o),{},{id:d,parentId:i,routineId:n,damages:p,effects:j,apIds:u})),c.push(d)}}catch(f){s.e(f)}finally{s.f()}return c},Sr=function(e,t){var a,i=[],n=Object(Ae.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,c=e.damages.entities[r],s=++sn;an.addOne(e.damages,Object(L.a)(Object(L.a)({},c),{},{id:s})),i.push(s)}}catch(l){n.e(l)}finally{n.f()}return i},yr=function(e,t){var a,i=[],n=Object(Ae.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,c=e.effects.entities[r],s=++ln;nn.addOne(e.effects,Object(L.a)(Object(L.a)({},c),{},{id:s})),i.push(s)}}catch(l){n.e(l)}finally{n.f()}return i},Ar=function e(t,a){var i,n=[],r=Object(Ae.a)(a);try{for(r.s();!(i=r.n()).done;){var c=i.value,s=t.activityPaths.entities[c],l=e(t,s.apIds),d=Cr(t,s.damages),o=Tr(t,s.effects);n.push(Object(L.a)(Object(L.a)({},s),{},{apIds:l,damages:d,effects:o}))}}catch(u){r.e(u)}finally{r.f()}return n},Cr=function(e,t){var a,i=[],n=Object(Ae.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,c=e.damages.entities[r];i.push(Object(L.a)({},c))}}catch(s){n.e(s)}finally{n.f()}return i},Tr=function(e,t){var a,i=[],n=Object(Ae.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,c=e.effects.entities[r];i.push(Object(L.a)({},c))}}catch(s){n.e(s)}finally{n.f()}return i},Er=function(e,t){var a=++rn,i=Ir(e,t.apIds,void 0,a);return en.addOne(e.routines,Object(L.a)(Object(L.a)({},t),{},{id:a,apIds:i})),a},Ir=function e(t,a,i,n){var r,c=[],s=Object(Ae.a)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value,d=++cn,o=e(t,l.apIds,d),u=wr(t,l.damages),p=Lr(t,l.effects);void 0===l.name&&(l.name=""),tn.addOne(t.activityPaths,Object(L.a)(Object(L.a)({},l),{},{id:d,parentId:i,routineId:n,damages:u,effects:p,apIds:o})),c.push(d)}}catch(j){s.e(j)}finally{s.f()}return c},wr=function(e,t){var a,i=[],n=Object(Ae.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,c=++sn;an.addOne(e.damages,Object(L.a)(Object(L.a)(Object(L.a)({},hn),r),{},{id:c})),i.push(c)}}catch(s){n.e(s)}finally{n.f()}return i},Lr=function(e,t){var a,i=[],n=Object(Ae.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value,c=++ln;nn.addOne(e.effects,Object(L.a)(Object(L.a)(Object(L.a)({},gn),r),{},{id:c})),i.push(c)}}catch(s){n.e(s)}finally{n.f()}return i},Rr=a(96),Pr=a(97),kr=function(e,t){if(0===e.length||0===t.length)throw new Error("Vectors can not be empty!");for(var a=e,i=t,n=0,r=[],c=0;c<a.length;c++){for(var s=0;s<i.length;s++)n+s!==r.length?r[n+s]=r[n+s]+a[c]*i[s]:r.push(a[c]*i[s]);n++}return r},Wr=function(e,t,a){if(0===a)return{staticDamage:0,damageDist:[1]};if(1===a)return{staticDamage:e,damageDist:Object(ji.a)(t)};var i,n=[0],r=0,c=Math.floor(e*a),s=0,l=c,d=Object(Ae.a)(t);try{for(d.s();!(i=d.n()).done;){var o=i.value,u=Math.floor((e+s)*a);if(u===l)n[r]+=o;else{if(u>l+1)for(var p=0;p<u-(l+1);p++)n[++r]=0;n[++r]=o}l=u,s++}}catch(j){d.e(j)}finally{d.f()}return{staticDamage:c,damageDist:n}},Dr=function(e,t,a){for(;e<a;)t.length>=2&&(t[1]+=t[0],t.shift()),e++;return{staticDamage:e,damageDist:t}};var Nr=function(e,t,a,i,n,r,c){var s;s=i?e.persistent:e.normal;var l=Wr(n,r,c);if(n=l.staticDamage,r=l.damageDist,t in s)if(i){for(var d=s[t].staticDamage,o=0;o<s[t].damageDist.length;o++)d+=o*s[t].damageDist[o];for(var u=n,p=0;p<r.length;p++)u+=p*r[p];u>d&&(s[t]={material:a,staticDamage:n,damageDist:r})}else s[t].staticDamage+=n,s[t].damageDist=kr(s[t].damageDist,r),a!==Q.NONE&&(s[t].material=a);else s[t]={material:a,staticDamage:n,damageDist:r}};function Fr(e,t){var a=[];switch(e){case M.ALWAYS:a=[0,1,2,3];break;case M.AT_LEAST_FAIL:a=[0,1,2];break;case M.AT_LEAST_SUCC:a=[0,1];break;case M.CRIF:a=[3];break;case M.CRIT:a=[0];break;case M.FAIL:a=[2];break;case M.FAIL_WORSE:a=[2,3];break;case M.SUCC:a=[1];break;case M.SUCC_WORSE:a=[1,2,3]}return a.includes(t)}var zr=function(){function e(t,a,i,n,r,c){Object(Rr.a)(this,e),this.activityPaths=void 0,this.target=void 0,this.damages=void 0,this.effects=void 0,this.weaknesses=void 0,this.selectedRoutine=void 0,this.activityPaths=t,this.target=a[0],this.damages=i,this.effects=n,this.weaknesses=r,this.selectedRoutine=c}return Object(Pr.a)(e,[{key:"canEvaluate",value:function(e,t){var a=this.target.levelDiff;return!(e<t.startLevel||e>t.endLevel)&&!(e+a<-1||e+a>24)}},{key:"canEvaluateSingleLevel",value:function(e){var t=this.target.routineLevel;return!(t<e.startLevel||t>e.endLevel)}},{key:"evalRoutine",value:function(e,t,a,i){var n;n=void 0===i?this.target.currentHP:Math.round(da[this.target.HPTrend][i]*(this.target.percentHP/100));for(var r={persistentDamages:{}},c=0,s=Object.values(Z);c<s.length;c++){r[s[c]]=!1}for(var l=0,d=Object.values(ee);l<d.length;l++){r[d[l]]=0}r.Flatfooted=this.target.flatfooted;for(var o=[],u=[],p=0,j=[1],f=0;f<e.apIds.length;f++){var m=this.activityPaths[e.apIds[f]],b=this.evalPath(m,r,t,a,i);j=kr(j,b)}var h=function(e,t,a){var i;if(e>=a)e=a,i=[1];else if(e+t.length-1>a){var n=1-(i=t.slice(0,a-e+1)).reduce((function(e,t){return e+t}));i[a-e]+=n}else i=t;return{staticDamage:e,damageDist:i}}(0,j,n);j=h.damageDist;for(var g=1,O=0;O<j.length;O++)o.push(O),u.push(g),g-=j[O],p+=j[O]*O;return{expD:p,dataArray:o,routineDDist:j,cumulative:u}}},{key:"evalPath",value:function(e,t,a,i,n){for(var r=this,c=this.target,s=e.damages.map((function(e){return r.damages[e]})),l=e.effects.map((function(e){return r.effects[e]})),d=c.weaknesses.map((function(e){return r.weaknesses[e]})),o=function(e,t,a,i,n,r,c,s,l){var d,o,u=0,p=10;if(void 0===l)switch(l=a.routineLevel,o=a.targetLevel,e.targetType){case Y.AC:d=a.overrideAC;break;case Y.FORT:d=a.overrideFort;break;case Y.REF:d=a.overrideRef;break;case Y.WILL:d=a.overrideWill;break;case Y.PER:d=a.overridePer;break;default:d=a.overrideAC}else{var j;switch(o=l+a.levelDiff,e.targetType){case Y.AC:j=ca[a.ACTrend];break;case Y.FORT:j=sa[a.FortTrend];break;case Y.REF:j=sa[a.RefTrend];break;case Y.WILL:j=sa[a.WillTrend];break;case Y.PER:j=sa[a.PerTrend];break;default:j=ca[a.ACTrend]}d=j[o]}var f=i.Frightened;switch(e.targetType!==Y.AC&&e.targetType!==Y.REF||(f=Math.max(f,i.Clumsy)),e.type){case G.STRIKE:case G.SPELLATTACK:case G.SKILL:u=Kt[e.profTrend][l],u+=Yt[e.statTrend][l],u+=Jt[e.itemTrend][l],u+=e.bonusAdjustments[l],u+=Xt[e.MAP],u+=i["Cicumstance Bonus to next attack"]+i["Status Bonus to all attacks"],i["Cicumstance Bonus to next attack"]=0,p=d+r-f,e.targetType===Y.AC?i.Flatfooted&&(p-=2):e.targetType===Y.selfDC?p=la[l]:e.targetType===Y.targetDC?p=la[o]:p+=10;break;case G.SAVE:u=d+r-f,p=10+Kt[e.profTrend][l],p+=Yt[e.statTrend][l],p+=Jt[e.itemTrend][l],p+=e.bonusAdjustments[l],e.targetType===Y.AC?u-=10:e.targetType===Y.selfDC?u=la[l]-10:e.targetType===Y.targetDC&&(u=la[o]-10);break;default:console.log("Activity type ".concat(e.type," not implemented"))}var m=function(e,t){var a=e-t;return a<-20?0:-20===a?5:a<-9?arguments.length>2&&void 0!==arguments[2]&&arguments[2]?10:5:a<8?5*(11+a):95}(u,p),b=function(e,t){var a=e-t;return a<-29?0:a<-20?5:-20===a?0:a<-9?5*(arguments.length>2&&void 0!==arguments[2]&&arguments[2]?19:20+a):a<-1?50:a<9?5*(8-a):5}(u,p),h=function(e,t){var a=e-t;return a<-29?5:a<-20?5*(29+a):a<-10?45:a<-1?5*(-2-a):a<9?5:0}(u,p),g=function(e,t){var a=e-t;return a<-29?95:a<-10?5*(-10-a):a<-1?5:0}(u,p);if(e.rollType===B.ADVANTAGE){var O=100-m,v=O-b,x=v-h;h=100-x*x/100-(b=100-v*v/100-(m=100-O*O/100))-m,g=g*g/100}else if(e.rollType===B.DISADVANTAGE){var S=100-g,y=S-h,A=y-b;b=100-A*A/100-(h=100-y*y/100-(g=100-S*S/100))-g,m=m*m/100}var C=[m/100,b/100,h/100,g/100],T={normal:{},persistent:Object(L.a)({},i.persistentDamages)},E={normal:{},persistent:Object(L.a)({},i.persistentDamages)},I={normal:{},persistent:Object(L.a)({},i.persistentDamages)},w={normal:{},persistent:Object(L.a)({},i.persistentDamages)},R=[T,E,I,w],P=[{normal:{staticDamage:0,damageDist:[1]},persistent:T.persistent},{normal:{staticDamage:0,damageDist:[1]},persistent:E.persistent},{normal:{staticDamage:0,damageDist:[1]},persistent:I.persistent},{normal:{staticDamage:0,damageDist:[1]},persistent:w.persistent}];t.forEach((function(e){var t,a=e.damageCondition,n=e.diceSize,r=e.fatal,c=e.fatalDie,s=e.damageTrend,d=e.damageType,o=e.material,u=e.persistent,p=e.multiplier,j=e.damageWhen,f=!1,m=Object(Ae.a)(j);try{for(m.s();!(t=m.n()).done;){var b=t.value;if(b===ae.Always){f=!0;break}if(i[b]){f=!0;break}}}catch(P){m.e(P)}finally{m.f()}if(f){var h=$t[e.dieTrend][l];(h+=e.dieAdjustments[l])<0&&(h=0);for(var g=0,O=0;O<s.length;O++)g+=qt[s[O]][l];g+=e.damageAdjustments[l];for(var v=[1],x=[1],S=[],y=0;y<n;y++)S.push(1/n);for(var A=0;A<h;A++)v=kr(v,S);if(r){for(var C=[],L=0;L<c;L++)C.push(1/c);for(var R=0;R<h;R++)x=kr(x,C)}switch(g+=h,a){case J.STRIKE:Nr(E,d,o,u,g,v,1*p),Nr(T,d,o,u,g,r?x:v,2*p);break;case J.BASIC:Nr(E,d,o,u,g,v,.5*p),Nr(I,d,o,u,g,v,1*p),Nr(w,d,o,u,g,v,2*p);break;case J.CRIF:Nr(w,d,o,u,g,v,1*p);break;case J.FAIL:Nr(I,d,o,u,g,v,1*p);break;case J.SUCC:Nr(E,d,o,u,g,v,1*p);break;case J.CRIT:Nr(T,d,o,u,g,v,1*p);break;case J.AT_LEAST_SUCC:Nr(E,d,o,u,g,v,1*p),Nr(T,d,o,u,g,v,1*p);break;case J.AT_LEAST_FAIL:Nr(I,d,o,u,g,v,1*p),Nr(E,d,o,u,g,v,1*p),Nr(T,d,o,u,g,v,1*p);break;case J.FAIL_WORSE:Nr(w,d,o,u,g,v,1*p),Nr(I,d,o,u,g,v,1*p);break;case J.SUCC_WORSE:Nr(w,d,o,u,g,v,1*p),Nr(I,d,o,u,g,v,1*p),Nr(E,d,o,u,g,v,1*p);break;case J.ALWAYS:Nr(w,d,o,u,g,v,1*p),Nr(I,d,o,u,g,v,1*p),Nr(E,d,o,u,g,v,1*p),Nr(T,d,o,u,g,v,1*p);break;default:console.log("Damage condition ".concat(a," not implemented yet."))}}}));for(var k=0;k<4;k++){var W=R[k],D=P[k],N="normal",F=0,z=[1],M=void 0;for(M in W[N]){var V=W[N][M],H=V.material,U=V.staticDamage,_=V.damageDist;if(!(1===_.length&&U<=0)){var K=Dr(U,_,1);U=K.staticDamage,_=K.damageDist;var X,$=0,q=0,Q=Object(Ae.a)(n);try{for(Q.s();!(X=Q.n()).done;){var Z=X.value;Z.type!==M&&Z.type!==H||(Z.value+c<0?$=Math.min($,Z.value+c):Z.value+c>0&&(q=Math.max(q,Z.value+c)))}}catch(ve){Q.e(ve)}finally{Q.f()}var ee=Dr(U-=q+$,_,0);U=ee.staticDamage,_=ee.damageDist,F+=U,z=kr(z,_)}}if(D[N].staticDamage=F,D[N].damageDist=z,s){var te="persistent",ie=0,ne=[1],re=void 0;for(re in W[te]){var ce=W[te][re],se=ce.material,le=ce.staticDamage,de=ce.damageDist;if(!(1===de.length&&le<=0)){var oe=Dr(le,de,1);le=oe.staticDamage,de=oe.damageDist;var ue,pe=0,je=0,fe=Object(Ae.a)(n);try{for(fe.s();!(ue=fe.n()).done;){var me=ue.value;me.type!==re&&me.type!==se||(me.value+c<0?pe=Math.min(pe,me.value+c):me.value+c>0&&(je=Math.max(je,me.value+c)))}}catch(ve){fe.e(ve)}finally{fe.f()}var be=Dr(le-=je+pe,de,0);le=be.staticDamage,de=be.damageDist,ie+=le,ne=kr(ne,de)}}var he=Wr(ie,ne,a.persistentMultiplier),ge=he.staticDamage,Oe=he.damageDist;D.normal.staticDamage+=ge,D.normal.damageDist=kr(D.normal.damageDist,Oe)}}return{damageTrees:P,chances:C}}(e,s,c,t,d,a,i,0===e.apIds.length,n),u=o.damageTrees,p=o.chances,j=[t,t,t,t],f=function(e){l.forEach((function(t){var a=t.effectCondition,i=t.effectType,c=t.effectValue,s=t.startLevel,l=t.endLevel,d=t.damageWhen;if(void 0!==n){if(n<s||n>l)return}else if(r.target.routineLevel<s||r.target.routineLevel>l)return;var o,u=!1,p=Object(Ae.a)(d);try{for(p.s();!(o=p.n()).done;){var f=o.value;if(f===ae.Always){u=!0;break}var m=j[e][f];if(m&&m>0){u=!0;break}}}catch(b){p.e(b)}finally{p.f()}if(u&&Fr(a,e))switch(i){case te.RESTRAINED:!0!==j[e].Restrained&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{Flatfooted:!0,Grappled:!0,Restrained:!0}));break;case te.GRAPPLED:!0!==j[e].Grappled&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{Flatfooted:!0,Grappled:!0}));break;case te.PRONE:!0!==j[e].Prone&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{Flatfooted:!0,Prone:!0}));break;case te.FLATFOOT:!0!==j[e].Flatfooted&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{Flatfooted:!0}));break;case te.FRIGHTENED:c&&j[e].Frightened<c&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{Frightened:c}));break;case te.CLUMSY:c&&j[e].Clumsy<c&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{Clumsy:c}));break;case te.BONUSC1:c&&j[e]["Cicumstance Bonus to next attack"]<c&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{"Cicumstance Bonus to next attack":c}));break;case te.BONUSSA:c&&j[e]["Status Bonus to all attacks"]<c&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{"Status Bonus to all attacks":c}));break;default:console.log("Effect type ".concat(i," not implemented"))}})),u[e].persistent&&JSON.stringify(u[e].persistent)!==JSON.stringify(j[e].persistentDamages)&&(j[e]=Object(L.a)(Object(L.a)({},j[e]),{},{persistentDamages:u[e].persistent}))},m=0;m<4;m++)f(m);e.apIds.forEach((function(e){for(var t=r.activityPaths[e],c=new Map,s=0;s<4;s++)if(Fr(t.condition,s)){if(c.has(j[s]));else{var l=r.evalPath(t,j[s],a,i,n);c.set(j[s],l)}u[s].normal.damageDist=kr(u[s].normal.damageDist,c.get(j[s]))}}));var b=function(){for(var e=0,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];for(var n=0,r=a;n<r.length;n++){var c=r[n];e=Math.max(e,c.distribution.staticDamage+c.distribution.damageDist.length)}for(var s=[],l=0;l<e;l++){s.push(0);var d,o=Object(Ae.a)(a);try{for(o.s();!(d=o.n()).done;){var u=d.value;if(u.distribution.staticDamage<=l){var p=l-u.distribution.staticDamage;p<u.distribution.damageDist.length&&(s[l]+=u.distribution.damageDist[p]*u.chance)}}}catch(j){o.e(j)}finally{o.f()}}return s}({distribution:u[0].normal,chance:p[0]},{distribution:u[1].normal,chance:p[1]},{distribution:u[2].normal,chance:p[2]},{distribution:u[3].normal,chance:p[3]});return b}}]),e}(),Mr=a(106),Br=a.n(Mr),Gr=a(144),Vr=a.n(Gr),Hr=Object(ue.c)({name:"sharing",initialState:{graphUrl:"",singleLevelGraphUrl:"",imgLink:""},reducers:{graphSaved:function(e,t){e.graphUrl=t.payload},singleLevelGraphSaved:function(e,t){e.singleLevelGraphUrl=t.payload},saveImgLink:function(e,t){e.imgLink=t.payload}}}),Ur=Hr.actions,_r=Ur.graphSaved,Kr=Ur.singleLevelGraphSaved,Yr=Ur.saveImgLink,Jr=Hr.reducer,Xr=Vr()(Br.a),$r=function(e,t){var a=[],i={};if(t.target.percentSelectedRoutine&&void 0!==t.selectedRoutine)for(var n=e[t.selectedRoutine],r=1;r<=20;r++)if(t.canEvaluate(r,n)){var c=t.evalRoutine(n,0,0,r).expD;i[r]=c}for(var s in e){var l=e[s];if(l.display){for(var d=[],o=[],u=1;u<=20;u++)if(t.canEvaluate(u,l)){var p=t.evalRoutine(l,0,0,u).expD;t.target.percentSelectedRoutine?u in i&&(d.push(u),o.push(p/i[u])):(d.push(u),o.push(p))}a.push({type:"scatter",name:l.name,x:d,y:o,yaxis:"y"})}}return{datasets:a}},qr=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[],n=[];for(var r in e){var c=e[r];if(c.display&&t.canEvaluateSingleLevel(c)){for(var s=[],l=[],d=-5;d<=5;d++){s.push(d);var o=t.evalRoutine(c,a?d:0,a?0:d).expD;0===d&&n.push(Object(xa.jsxs)("div",{children:[c.name,": ",o.toFixed(2)]},c.id)),l.push(o)}i.push({type:"scatter",name:c.name,x:s,y:l,yaxis:"y"})}}return{expectedDamages:n,datasets:i}},Qr=function(e,t){var a=[],i=[];for(var n in e){var r=e[n];if(r.display&&t.canEvaluateSingleLevel(r)){var c=t.evalRoutine(r,0,0),s=c.expD,l=c.dataArray,d=c.routineDDist,o=c.cumulative;i.push(Object(xa.jsxs)("div",{children:[r.name,": ",s.toFixed(2)]},r.id)),a.push({type:"scatter",name:r.name,x:l,y:o,yaxis:"y"}),a.push({type:"bar",name:s.toFixed(2),x:l,y:d})}}return{expectedDamages:i,datasets:a}},Zr=function(e){var t=oe(Hn),a=oe(Yn),i=oe(ga),n=oe($n),r=oe(Zn),c=oe(Se),s=oe(er),l=de(),d=function(e,t){Br.a.toImage(t,{format:"png",height:1e3,width:1e3}).then((function(e){l(_r(e))}))},o=function(e,t){Br.a.toImage(t,{format:"png",height:1e3,width:1e3}).then((function(e){l(Kr(e))}))},u=new zr(a,i,n,r,c,s),p=i[0],j="@"+p.routineLevel,f=p.name;j+=" Vs",p.flatfooted&&(j+=" flatfooted"),j+=" AC: "+p.overrideAC,j+=" F: "+p.overrideFort,j+=" R: "+p.overrideRef,j+=" W: "+p.overrideWill,j+=" P: "+p.overridePer;var m,b=[];switch(e){case R.DISTRIBUTION:var h=Qr(t,u);m=h.expectedDamages,b=h.datasets;break;case R.PMDEFENSE:var g=qr(t,u,!0);m=g.expectedDamages,b=g.datasets;break;default:var O=qr(t,u,!1);m=O.expectedDamages,b=O.datasets}var v,x,S=$r(t,u).datasets;return e===R.DISTRIBUTION?(v="damage",x="chance"):e===R.PMDEFENSE?(v="+/- AC/Save Bonus",x="Expected Damage"):e===R.PMRES&&(v="+/- Resistance/Weakness",x="Expected Damage"),{expectedDamages:m,damageChart:Object(xa.jsx)(Xr,{className:"plot",data:b,layout:{title:j,autosize:!0,xaxis:{title:v},yaxis:{title:x},legend:{x:0,y:-.2,xanchor:"left",yanchor:"top"},margin:{l:40,r:40}},useResizeHandler:!0,style:{width:"100%",height:"100%"},onInitialized:o,onUpdate:o}),byLevelDamageChart:Object(xa.jsx)(Xr,{className:"plot",data:S,layout:{title:f,autosize:!0,xaxis:{title:"Level"},yaxis:{title:"Expected Damage"},legend:{x:0,y:-.2,xanchor:"left",yanchor:"top"},margin:{l:40,r:40}},useResizeHandler:!0,style:{width:"100%",height:"100%"},onInitialized:d,onUpdate:d})}},ec=a(243),tc=a(250),ac=function(){var e=oe((function(e){return ha(e,0)})),t=e.routineLevel,a=e.targetLevel,i=e.overrideAC,n=e.overrideFort,r=e.overrideRef,c=e.overrideWill,s=e.overridePer,l=e.overrideHP,d=e.currentHP,o=e.weaknesses,u=Object(p.useState)(i.toString()),f=Object(w.a)(u,2),m=f[0],b=f[1],h=Object(p.useState)(n.toString()),g=Object(w.a)(h,2),v=g[0],x=g[1],S=Object(p.useState)(r.toString()),A=Object(w.a)(S,2),C=A[0],T=A[1],E=Object(p.useState)(c.toString()),I=Object(w.a)(E,2),L=I[0],R=I[1],P=Object(p.useState)(s.toString()),k=Object(w.a)(P,2),W=k[0],D=k[1],N=Object(p.useState)(l.toString()),F=Object(w.a)(N,2),z=F[0],M=F[1];Object(p.useEffect)((function(){b(i.toString()),x(n.toString()),T(r.toString()),R(c.toString()),D(s.toString()),M(l.toString())}),[i,n,r,c,s,l]);var B=de();return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{my:1,p:1},alignItems:"center",children:[Object(xa.jsxs)(O.a,{item:!0,xs:6,container:!0,justifyContent:"center",children:[Object(xa.jsxs)(y.a,{id:"routine-level",children:["Level: ",t]}),Object(xa.jsx)(ec.a,{sx:{px:2,width:1},children:Object(xa.jsx)(ce.a,{"aria-labelledby":"routine-level",valueLabelDisplay:"auto",value:t,step:1,min:1,max:20,marks:!0,onChange:function(e,i){var n=Number(i)+(a-t);n=Math.min(24,Math.max(-1,n)),B(fa({id:0,changes:{routineLevel:i,targetLevel:n}}))}})})]}),Object(xa.jsxs)(O.a,{item:!0,xs:6,container:!0,justifyContent:"center",children:[Object(xa.jsxs)(y.a,{id:"target-level",children:["Target Level: ",a]}),Object(xa.jsx)(ec.a,{sx:{px:2,width:1},children:Object(xa.jsx)(ce.a,{"aria-labelledby":"target-level",valueLabelDisplay:"auto",value:a,step:1,min:-1,max:24,marks:!0,onChange:function(e,t){B(fa({id:0,changes:{targetLevel:t}}))}})})]})]}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},justifyContent:"center",children:[Object(xa.jsx)(O.a,{item:!0,xs:4,sm:2,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"AC",value:m,onChange:function(e){b(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(m);b(e.toString()),B(fa({id:0,changes:{overrideAC:e}}))},inputProps:{step:1,min:0,max:100,type:"number"}})}),Object(xa.jsx)(O.a,{item:!0,xs:4,sm:2,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Fort",value:v,onChange:function(e){x(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(v);x(e.toString()),B(fa({id:0,changes:{overrideFort:e}}))},inputProps:{step:1,min:0,max:100,type:"number"}})}),Object(xa.jsx)(O.a,{item:!0,xs:4,sm:2,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Ref",value:C,onChange:function(e){T(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(C);T(e.toString()),B(fa({id:0,changes:{overrideRef:e}}))},inputProps:{step:1,min:0,max:100,type:"number"}})}),Object(xa.jsx)(O.a,{item:!0,xs:4,sm:2,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Will",value:L,onChange:function(e){R(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(L);R(e.toString()),B(fa({id:0,changes:{overrideWill:e}}))},inputProps:{step:1,min:0,max:100,type:"number"}})}),Object(xa.jsx)(O.a,{item:!0,xs:4,sm:2,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Perception",value:W,onChange:function(e){D(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(W);D(e.toString()),B(fa({id:0,changes:{overridePer:e}}))},inputProps:{step:1,min:0,max:100,type:"number"}})})]}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{my:1,p:1},children:[Object(xa.jsx)(O.a,{item:!0,xs:6,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Max Hit Points",value:z,onChange:function(e){M(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(z);M(e.toString()),B(fa({id:0,changes:{overrideHP:e}}))},inputProps:{step:1,min:1,max:1e3,type:"number"}})}),Object(xa.jsxs)(O.a,{item:!0,xs:6,container:!0,justifyContent:"center",children:[Object(xa.jsxs)(y.a,{id:"current-HP",children:["HP: ",d,"/",l]}),Object(xa.jsx)(ec.a,{sx:{px:2,width:1},children:Object(xa.jsx)(ce.a,{"aria-labelledby":"current-HP",valueLabelDisplay:"auto",value:d,min:0,max:l,step:1,onChange:function(e,t){var a=Number(t);B(fa({id:0,changes:{currentHP:a}}))}})})]})]}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{my:1,p:1},children:[Object(xa.jsx)(O.a,{item:!0,container:!0,alignItems:"center",xs:"auto",children:Object(xa.jsx)(y.a,{children:"Resistance/Weakness: "})}),o.map((function(e){return Object(xa.jsx)(ic,{parentId:0,id:e},e)})),Object(xa.jsx)(nc,{parentId:0})]})]})},ic=function(e){var t=e.id,a=e.parentId,i=oe((function(e){return xe(e,t)})),n=i.type,r=i.value,c=Object(p.useState)(r.toString()),s=Object(w.a)(c,2),l=s[0],d=s[1],o=de();return Object(xa.jsxs)(O.a,{item:!0,children:[Object(xa.jsx)(rc,{value:n,onChange:function(e){var i;(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)===q.NONE?o(be({id:t,parentId:a})):o(ge({id:t,changes:{type:e.target.value}}))}}),Object(xa.jsx)(tc.a,{title:"Positive numbers are resistances. Negative numbers are weaknesses.",children:Object(xa.jsx)(se.a,{size:"small",label:"Value",value:l,sx:{width:"9ch"},onChange:function(e){d(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(l);Number.isNaN(e)&&(e=0),d(e.toString()),o(ge({id:t,changes:{value:e}}))},inputProps:{step:1,min:-100,max:100,type:"number"}})})]})},nc=function(e){var t=e.parentId,a=de(),i=Object(p.useState)("0"),n=Object(w.a)(i,2),r=n[0],c=n[1];return Object(xa.jsxs)(O.a,{item:!0,children:[Object(xa.jsx)(rc,{value:q.NONE,onChange:function(e){if(e.target.value!==q.NONE){var i=Number(r);Number.isNaN(i)&&(i=0),a(he({type:e.target.value,value:i,parentId:t}))}}}),Object(xa.jsx)(tc.a,{title:"Positive numbers are resistances. Negative numbers are weaknesses.",children:Object(xa.jsx)(se.a,{size:"small",label:"Value",value:r,sx:{width:"9ch"},onChange:function(e){c(e.target.value)},inputProps:{step:1,min:-100,max:100,type:"number"}})})]})},rc=function(e){var t=e.value,a=e.onChange;return Object(xa.jsxs)(ne.a,{size:"small",children:[Object(xa.jsx)(re.a,{children:"Type"}),Object(xa.jsx)(S.a,{label:"Type",value:t,onChange:function(e){return a(e)},children:ni})]})},cc=function(){var e=oe((function(e){return ha(e,0)})),t=e.persistentMultiplier,a=e.flatfooted,i=e.percentSelectedRoutine,n=Object(p.useState)(t.toString()),r=Object(w.a)(n,2),c=r[0],s=r[1],l=de();return Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,xs:6,sm:3,md:6,lg:3,children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:a,onChange:function(e){return l(fa({id:0,changes:{flatfooted:e.target.checked}}))}}),label:"Flatfooted"})}),Object(xa.jsx)(O.a,{item:!0,xs:6,sm:3,md:6,lg:3,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Persistent Damage Multiplier",value:c,onChange:function(e){s(e.target.value),e.target.focus()},onBlur:function(){var e=parseFloat(c);Number.isNaN(e)&&(e=0),s(e.toString()),l(fa({id:0,changes:{persistentMultiplier:e}}))},inputProps:{step:.1,min:0,max:10,type:"number"}})}),Object(xa.jsx)(O.a,{item:!0,xs:12,sm:6,md:12,lg:6,children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:i,onChange:function(e){return l(fa({id:0,changes:{percentSelectedRoutine:e.target.checked}}))}}),label:"% of Selected Routine"})})]})},sc=a(145),lc=a.n(sc);x.a.initialize("G-JR2YK097BG");var dc=function(e){var t,a=e.byLevel,i=void 0===a||a,n=oe((function(e){return function(e,t){return t?e.sharing.graphUrl:e.sharing.singleLevelGraphUrl}(e,i)})).split(";base64,")[1],r=oe(rr),c=de(),s=Object(I.a)((function(e){return e.breakpoints.up("sm")})),l="",d=Object(Ae.a)(r);try{for(d.s();!(t=d.n()).done;){l+=t.value+" \r\n"}}catch(p){d.e(p)}finally{d.f()}l+="\n Graph made with https://bahalbach.github.io/PF2Calculator/ ";var o=new FormData;o.append("image",n),o.append("title","Graph from https://bahalbach.github.io/PF2Calculator/"),o.append("description",l);var u={method:"POST",headers:{Authorization:"Client-ID 9f68ffe6050491a"},body:o};return Object(xa.jsx)(b.a,{onClick:function(){x.a.event("share");var e=window.open("about:blank");fetch("https://api.imgur.com/3/image",u).then((function(e){return e.json()})).then((function(t){console.log("description is ".concat(t.data.description)),c(Yr(t.data.link)),null!==e&&(e.location=t.data.link,e.focus())})).catch((function(t){console.error(t),alert("Upload failed: "+t),null===e||void 0===e||e.close()}))},variant:"contained",color:"secondary",endIcon:Object(xa.jsx)(lc.a,{}),children:s?"Share with IMGUR":"Share"})},oc=function(){var e=Object(p.useState)(!0),t=Object(w.a)(e,2),a=t[0],i=t[1],n=Object(p.useState)(!1),r=Object(w.a)(n,2),c=r[0],s=r[1],l=Object(p.useState)(R.DISTRIBUTION),d=Object(w.a)(l,2),o=d[0],u=d[1],f=Zr(o),m=f.expectedDamages,b=f.damageChart,h=f.byLevelDamageChart,g=Object(I.a)((function(e){return e.breakpoints.up("sm")})),v=500+19*m.length,x=v;return o===R.DISTRIBUTION&&(x+=19*m.length),Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsxs)(A.a,{sx:{p:1,my:2},children:[Object(xa.jsxs)(O.a,{container:!0,children:[Object(xa.jsx)(O.a,{item:!0,xs:!0,children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:a,onChange:function(){return i(!a)}}),label:g?"Display By Level Graph":"By Level Graph"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(dc,{byLevel:!0})})]}),Object(xa.jsxs)(C.a,{in:a,children:[Object(xa.jsx)(pi,{}),Object(xa.jsx)(cc,{}),Object(xa.jsx)(ec.a,{sx:{height:v},children:h})]})]}),Object(xa.jsxs)(A.a,{sx:{p:1,my:2},children:[Object(xa.jsxs)(O.a,{container:!0,children:[Object(xa.jsx)(O.a,{item:!0,xs:!0,children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:c,onChange:function(){return s(!c)}}),label:g?"Display Single Level Graph":"Single Level Graph"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(dc,{byLevel:!1})})]}),Object(xa.jsxs)(C.a,{in:c,children:[Object(xa.jsx)(ac,{}),Object(xa.jsx)(y.a,{children:"Expected damage: "}),m,Object(xa.jsx)(S.a,{value:o,onChange:function(e){return u(e.target.value)},children:Sa(R)}),Object(xa.jsx)(ec.a,{sx:{height:x},children:b})]})]})]})},uc=a(269),pc=a(275),jc=a(257),fc=a(245),mc=a(247),bc=a(246),hc=a(274),gc=a(147),Oc=a.n(gc),vc=a(146),xc=a.n(vc),Sc=a(51),yc=a.n(Sc),Ac=function e(t){var a=t.id,i=t.level,n=t.displayChildren,r=void 0===n||n,c=oe((function(e){return Kn(e,a)})),s=c.parentId,l=c.routineId,d=c.name,o=c.condition,u=c.type,p=c.MAP,f=c.apIds,m=oe(tr),b=oe(ar),h=de(),g=Object(xa.jsx)(xc.a,{});if(u===G.SAVE)g=Object(xa.jsx)(Oc.a,{});var O=u!==G.SAVE&&0!==Xt[p];return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsx)(jc.a,{disablePadding:!0,secondaryAction:Object(xa.jsx)(hc.a,{edge:"end","aria-label":"delete",onClick:function(){return h(Pn({id:a,parentId:s,routineId:l}))},children:Object(xa.jsx)(yc.a,{})}),children:Object(xa.jsxs)(fc.a,{selected:m===a||b===a,sx:{pl:4*i+2},onClick:function(){return h(Sn(a))},children:[Object(xa.jsx)(bc.a,{children:g}),Object(xa.jsx)(mc.a,{primary:d+" "+(O?Xt[p]:""),secondary:i>0?o:""})]})}),r?f.map((function(t){return Object(xa.jsx)(e,{id:t,level:i+1},t)})):""]})},Cc=a(148),Tc=a.n(Cc),Ec=function(e){var t=e.title,a=e.label,i=e.value,n=e.onChange,r=e.children,c=e.fullWidth,s=void 0!==c&&c,l=Object(p.useState)(!1),d=Object(w.a)(l,2),o=d[0],u=d[1];return Object(xa.jsx)(tc.a,{title:t,open:o,onFocus:function(){console.log("focus1"),u(!1)},children:Object(xa.jsxs)(ne.a,{fullWidth:s,size:"small",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},onFocus:function(){return u(!1)},sx:{minWidth:100},children:[Object(xa.jsx)(re.a,{children:a}),Object(xa.jsx)(S.a,{label:a,value:i,onChange:n,children:r})]})})},Ic=function(e){for(var t={},a=0,i=0,n=0,r=1;r<=20;r++)e[n]&&e[n][0]===r&&((a=parseInt(e[n][1]))||(a=0),n++,i+=a),t[r]=i;return t},wc=function(e,t,a){return e[t]=[a,e[t][1]],e.sort((function(e,t){return e[0]-t[0]})),Ic(e)},Lc=function(e){var t=e.length>0?e[e.length-1]:[0,"0"];return e.push([t[0]+1,(0).toString()]),Ic(e)},Rc=function(e,t,a,i,n){var r=function(e){for(var t=0,a=[],i=1;i<=20;i++)t!==e[i]&&(a.push([i,(e[i]-t).toString()]),t=e[i]);return a}(n),c=Object(p.useState)(r),s=Object(w.a)(c,2),l=s[0],d=s[1],o=JSON.stringify(r);Object(p.useEffect)((function(){return d(r)}),[o]);for(var u=[],j=function(n){u.push(Object(xa.jsxs)(O.a,{item:!0,children:[Object(xa.jsx)(Ec,{title:"The level where this bonus is added, all later levels will have this bonus added. Please only add 1 bonus per level. Bonuses of 0 are removed.",label:"Level",value:l[n][0],onChange:function(r){return t(a({id:i,changes:Object(ye.a)({},e,wc(l,n,Number(r.target.value)))}))},children:Ca}),Object(xa.jsx)(se.a,{size:"small",label:"Bonus",sx:{width:"9ch"},value:l[n][1],onChange:function(e){var t=l.slice();t[n]=[t[n][0],e.target.value],d(t),e.target.focus()},onBlur:function(){for(var n=l.slice(),r=0;r<l.length;r++)n[r]=[n[r][0],parseInt(n[r][1]).toString()];d(n),t(a({id:i,changes:Object(ye.a)({},e,Ic(l))}))},inputProps:{step:1,min:-100,max:100,type:"number"}})]},n))},f=0;f<l.length;f++)j(f);return u.push(Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(tc.a,{title:"Add a bonus at a specified level.",children:Object(xa.jsx)(hc.a,{color:"primary","aria-label":"Add button",onClick:function(){return t(a({id:i,changes:Object(ye.a)({},e,Lc(l))}))},children:Object(xa.jsx)(Tc.a,{})})})},"addButton")),u},Pc=a(255),kc=a(248),Wc=function(e){var t=e.parentId,a=e.id,i=oe((function(e){return Xn(e,a)})),n=i.damageCondition,r=i.damageType,c=i.material,s=i.persistent,l=i.multiplier,d=i.damageWhen,o=i.dieTrend,u=i.dieAdjustments,f=i.diceSize,m=i.fatal,h=i.fatalDie,g=i.damageTrend,v=i.damageAdjustments,x=de(),y=Object(p.useState)(!1),A=Object(w.a)(y,2),I=A[0],L=A[1],R=Rc("dieAdjustments",x,kn,a,u),P=Rc("damageAdjustments",x,kn,a,v),k=g.map((function(e,t){return Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Adds bonus damage that applies the appropriate amount of damage at appropriate levels. For 'Weapon' and 'Precise Strike' the bonus is the number of dice.",label:"Damage Trend",value:e,onChange:function(e){var i=g.slice();e.target.value===$.NONE?i.splice(t,1):i[t]=e.target.value,x(kn({id:a,changes:{damageTrend:i}}))},children:ei})},t)}));return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsx)(Dc,{damageInfo:{damageCondition:n,dieTrend:o,dieAdjustments:u,diceSize:f,fatal:m,fatalDie:h,damageTrend:g,damageAdjustments:v,persistent:s,damageType:r,multiplier:l},onClick:function(){return L(!I)},id:a,parentId:t}),Object(xa.jsx)(C.a,{in:I,children:Object(xa.jsxs)(ec.a,{sx:{mt:1,p:1,mb:1,"&:hover":{bgcolor:"rgb(50,50,50,.05)"}},children:[Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{mb:1},children:[Object(xa.jsx)(O.a,{item:!0,xs:!0,children:Object(xa.jsx)(Ec,{fullWidth:!0,title:"When this damage instance applies. For example: for extra damage on a critical hit, like with deadly or fatal weapons, use 'On Crit'. Don't forget to change when using a save instead of an attack.",value:n,label:"Condition",onChange:function(e){return x(kn({id:a,changes:{damageCondition:e.target.value}}))},children:Ja})}),Object(xa.jsx)(O.a,{item:!0,xs:!0,children:Object(xa.jsxs)(ne.a,{size:"small",fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"damage-when-input",children:"When Target"}),Object(xa.jsx)(S.a,{labelId:"damage-when-input",id:"damage-when",multiple:!0,value:d,label:"When Target",renderValue:function(e){return e.join(" or ")},onChange:function(e){return x(kn({id:a,changes:{damageWhen:e.target.value}}))},children:Sa(ae)})]})})]}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"How much the damage is multiplied by. For example: if you want to average the damage of two different attacks, add both and set the multiplier to .5",value:l,label:"Multiplier",onChange:function(e){return x(kn({id:a,changes:{multiplier:Number(e.target.value)}}))},children:ri})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(ne.a,{size:"small",children:[Object(xa.jsx)(re.a,{id:"damage-type-input",children:"Type"}),Object(xa.jsx)(S.a,{labelId:"damage-type-input",id:"damage-type",value:r,label:"Type",onChange:function(e){return x(kn({id:a,changes:{damageType:e.target.value}}))},children:ai})]})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(ne.a,{size:"small",children:[Object(xa.jsx)(re.a,{id:"damage-material-input",children:"Material"}),Object(xa.jsx)(S.a,{labelId:"damage-material-input",id:"damage-material",value:c,label:"Material",onChange:function(e){return x(kn({id:a,changes:{material:e.target.value}}))},children:ii})]})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(tc.a,{title:"If this damage is persistent. Persistent damage is multiplied by the 'Persistent Damage Multiplier' above the By Level graph.",children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(Pc.a,{checked:s,onChange:function(e){return x(kn({id:a,changes:{persistent:e.target.checked}}))}}),label:"Persistent"})})})]}),Object(xa.jsx)(kc.a,{textAlign:"left",sx:{mt:1,mb:1},children:"Dice"}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"When dice are added to the damage. At each level in (), 1 die of the selected size is added to the damage",value:o,label:"Damage Dice",onChange:function(e){return x(kn({id:a,changes:{dieTrend:e.target.value}}))},children:$a})}),R,Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(ne.a,{size:"small",children:[Object(xa.jsx)(re.a,{id:"dice-size-input",children:"Die Size"}),Object(xa.jsx)(S.a,{labelId:"dice-size-input",id:"dice-size",value:f,label:"Die Size",onChange:function(e){return x(kn({id:a,changes:{diceSize:Number(e.target.value)}}))},children:Qa})]})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(tc.a,{title:"For Fatal. If this damage uses a different die size on a crit. For Fatal you still need to add another die with the 'On Crit' Condition.",children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:m,onChange:function(e){return x(kn({id:a,changes:{fatal:e.target.checked}}))}}),label:"On Crit Die"})})}),m?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(ne.a,{size:"small",children:[Object(xa.jsx)(re.a,{id:"fatal-size-input",children:"Die Size"}),Object(xa.jsx)(S.a,{labelId:"fatal-size-input",id:"fatal-size",value:h,label:"Die Size",onChange:function(e){return x(kn({id:a,changes:{fatalDie:Number(e.target.value)}}))},children:Qa})]})}):""]}),Object(xa.jsx)(kc.a,{textAlign:"left",sx:{mt:1,mb:1},children:"Static Damage"}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[k,Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(tc.a,{title:"Adds bonus damage that applies the appropriate amount of damage at appropriate levels. For 'Weapon' and 'Precise Strike' the bonus is the number of dice.",children:Object(xa.jsx)(b.a,{onClick:function(){var e=g.slice();e.push($.NONE),x(kn({id:a,changes:{damageTrend:e}}))},children:"Add damage scaling"})})}),P]})]})})]})},Dc=function(e){var t,a=e.damageInfo,i=a.damageCondition,n=a.dieTrend,r=a.dieAdjustments,c=a.diceSize,s=a.fatal,l=a.fatalDie,d=a.damageTrend,o=a.damageAdjustments,u=a.persistent,j=a.damageType,f=a.multiplier,m=e.onClick,b=e.id,h=e.parentId,g=Object(p.useState)(20),v=Object(w.a)(g,2),x=v[0],S=v[1],A=de(),C=$t[n][x]+r[x],T=o[x],E=Object(Ae.a)(d);try{for(E.s();!(t=E.n()).done;){var I=t.value;T+=qt[I][x]}}catch(k){E.e(k)}finally{E.f()}var L=T+(c+1)/2*C,R=" ("+C.toString()+"d"+l.toString()+" on Crit)",P=i+": "+C.toString()+"d"+c.toString()+(s?R:"")+(T?" + "+T.toString():"")+" (avg: "+L.toString()+") "+(u?"persistent ":"")+j+(1!==f?" x"+f:"");return Object(xa.jsxs)(O.a,{container:!0,alignItems:"center",columnSpacing:{xs:2},children:[Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(hc.a,{color:"primary",size:"small",onClick:function(e){A(Dn({id:b,parentId:h}))},children:Object(xa.jsx)(yc.a,{})})}),Object(xa.jsx)(O.a,{item:!0,xs:"auto",sx:{ml:-2},children:Object(xa.jsx)(fc.a,{onClick:m,children:Object(xa.jsx)(y.a,{variant:"h6",children:"Damage "})})}),Object(xa.jsx)(O.a,{item:!0,sx:{ml:-2,mt:1,width:100},children:Object(xa.jsx)(ce.a,{size:"small",value:x,min:1,max:20,marks:!0,onChange:function(e,t){return S(t)},valueLabelDisplay:"auto"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(y.a,{component:"span",children:P+" at level "+x.toString()})})]})},Nc=function(e){var t=e.parentId,a=e.id,i=oe((function(e){return Qn(e,a)})),n=i.effectCondition,r=i.effectType,c=i.effectValue,s=i.startLevel,l=i.endLevel,d=i.damageWhen,o=de(),u=Object(p.useState)(c?c.toString():"0"),f=Object(w.a)(u,2),m=f[0],b=f[1],h=Object.values(ee).includes(r),g=Object(p.useState)([s,l]),v=Object(w.a)(g,2),x=v[0],A=v[1];Object(p.useEffect)((function(){return A([s,l])}),[s,l]);var T=Object(p.useState)(!1),E=Object(w.a)(T,2),I=E[0],L=E[1];return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsxs)(O.a,{container:!0,columnSpacing:{xs:2},alignItems:"center",children:[Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(hc.a,{"aria-label":"delete",color:"primary",onClick:function(e){o(zn({id:a,parentId:t}))},children:Object(xa.jsx)(yc.a,{})})}),Object(xa.jsx)(O.a,{item:!0,xs:"auto",sx:{ml:-2},children:Object(xa.jsx)(fc.a,{onClick:function(){return L(!I)},children:Object(xa.jsx)(y.a,{variant:"h6",children:"Effect"})})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(y.a,{children:[n," ",": ",r," ",h?c:""]})})]}),Object(xa.jsx)(C.a,{in:I,children:Object(xa.jsxs)(ec.a,{sx:{p:1,mb:1,"&:hover":{bgcolor:"rgb(50,50,50,.05)"}},children:[Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{mb:1},children:[Object(xa.jsx)(O.a,{item:!0,xs:!0,children:Object(xa.jsx)(Ec,{fullWidth:!0,title:"When this effect applies, depending on the result of this activities roll. For example the spell 'fear' should have 'On Success' 'Frightened' '1', 'On Failure' 'Frightened' '2' etc.",value:n,label:"Condition",onChange:function(e){return o(Nn({id:a,changes:{effectCondition:e.target.value}}))},children:Ia})}),Object(xa.jsx)(O.a,{item:!0,xs:!0,children:Object(xa.jsxs)(ne.a,{size:"small",fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"damage-when-input",children:"When Target"}),Object(xa.jsx)(S.a,{labelId:"damage-when-input",id:"damage-when",multiple:!0,value:d,label:"When Target",renderValue:function(e){return e.join(" or ")},onChange:function(e){return o(Nn({id:a,changes:{damageWhen:e.target.value}}))},children:Sa(ae)})]})})]}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"The effect that is applied to the target when 'Condition' is met.",value:r,label:"Effect",onChange:function(e){return o(Nn({id:a,changes:{effectType:e.target.value}}))},children:ui})}),h?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(se.a,{size:"small",label:"Value",sx:{width:"9ch"},value:m,onChange:function(e){b(e.target.value),e.target.focus()},onBlur:function(){var e=parseInt(m);Number.isNaN(e)&&(e=0),b(e.toString()),o(Nn({id:a,changes:{effectValue:e}}))},inputProps:{step:1,min:0,max:10,type:"number"}})}):"",Object(xa.jsxs)(O.a,{item:!0,sx:{px:2},children:[Object(xa.jsxs)(y.a,{align:"center",children:["Valid Levels: ",s," to ",l]}),Object(xa.jsx)(ce.a,{size:"small",getAriaLabel:function(){return"Valid levels"},value:x,min:1,max:20,marks:!0,onChange:function(e,t){return A(t)},onBlur:function(){return o(Nn({id:a,changes:{startLevel:x[0],endLevel:x[1]}}))},valueLabelDisplay:"auto",getAriaValueText:function(e){return"".concat(e)}})]})]})]})})]})};x.a.initialize("G-JR2YK097BG");var Fc=function e(t){var a=t.id,i=t.level,n=void 0===i?0:i,r=t.open,c=void 0!==r&&r,s=oe((function(e){return Kn(e,a)})),l=s.parentId,d=s.routineId,o=s.condition,u=s.name,f=s.type,m=s.MAP,h=s.damages,g=s.effects,v=s.apIds,S=de(),T=Object(p.useState)(u),E=Object(w.a)(T,2),I=E[0],L=E[1];Object(p.useEffect)((function(){return L(u)}),[u]);var R=Object(p.useState)(c),P=Object(w.a)(R,2),k=P[0],W=P[1],D=f!==G.SAVE&&0!==Xt[m];return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsxs)(A.a,{sx:{my:2,p:1,ml:2*n},children:[Object(xa.jsxs)(O.a,{container:!0,columnSpacing:{xs:1,sm:2},alignItems:"center",children:[Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(hc.a,{color:"primary",size:"small",onClick:function(e){S(Pn({id:a,parentId:l,routineId:d}))},children:Object(xa.jsx)(yc.a,{})})}),Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(fc.a,{onClick:function(){return W(!k)},children:Object(xa.jsx)(y.a,{variant:"h6",children:"Activity"})})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(y.a,{children:[void 0!==l?o+": ":"",u,D?" "+Xt[m]:""]})})]}),Object(xa.jsxs)(C.a,{in:k,mountOnEnter:!0,children:[Object(xa.jsxs)(O.a,{container:!0,spacing:2,sx:{mt:1,px:1},children:[Object(xa.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(xa.jsx)(se.a,{fullWidth:!0,size:"small",label:"Activity Name",placeholder:"Fighter - Strike - d6 agile",value:I,onChange:function(e){L(e.target.value)},onBlur:function(){return S(In({id:a,changes:{name:I}}))}})}),void 0!==l?Object(xa.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(xa.jsx)(Ec,{title:'Depending on the roll of the parent activity, should this activity happen. For example: to add another strike only when you hit with the previous one, have the second strike be a child of the first with the condition "Success or Better"',value:o,label:"Condition",onChange:function(e){return S(In({id:a,changes:{condition:e.target.value}}))},children:Ia})}):""]}),Object(xa.jsx)(zc,{id:a}),h.map((function(e){return Object(xa.jsx)(Wc,{parentId:a,id:e},e)})),Object(xa.jsx)(b.a,{variant:"outlined",size:"small",onClick:function(){return S(Wn({parentId:a}))},children:"Add Damage"}),g.map((function(e){return Object(xa.jsx)(Nc,{parentId:a,id:e},e)})),Object(xa.jsx)(b.a,{variant:"outlined",size:"small",onClick:function(){return S(Fn({parentId:a}))},children:"Add Effect"}),Object(xa.jsx)(uc.a,{subheader:Object(xa.jsx)(pc.a,{children:"Child Activities"}),children:v.map((function(e){return Object(xa.jsx)(Ac,{id:e,level:0,displayChildren:!1},e)}))}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1},sx:{my:2,p:1},children:[Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,justifyContent:"center",children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){window.location.href="#routine-activity-list",x.a.event("select_content",{content_type:"new-activity",item_id:"continue-activity"}),S(Rn({parentId:a}))},children:"Continue Attack"})}),Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,justifyContent:"center",children:Object(xa.jsx)(b.a,{variant:"outlined",onClick:function(){window.location.href="#routine-activity-list",S(yn({parentId:a}))},children:"New Child Activity"})})]})]})]}),v.map((function(t){return Object(xa.jsx)(e,{id:t,level:n+1},t)}))]})},zc=function(e){var t=e.id,a=oe((function(e){return Kn(e,t)})),i=a.rollType,n=a.type,r=a.profTrend,c=a.statTrend,s=a.itemTrend,l=a.bonusAdjustments,d=a.MAP,o=a.targetType,u=de(),f=Object(p.useState)(!1),m=Object(w.a)(f,2),b=m[0],h=m[1],g=n===G.SAVE,v=Rc("bonusAdjustments",u,In,t,l);return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsx)(Mc,{rollInfo:{isSave:g,profTrend:r,statTrend:c,itemTrend:s,MAP:d,bonusAdjustments:l},onClick:function(){return h(!b)}}),Object(xa.jsx)(C.a,{in:b,children:Object(xa.jsx)(ec.a,{sx:{p:1,mb:1,"&:hover":{bgcolor:"rgb(50,50,50,.05)"}},children:Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Advantage is rolling twice and taking the higher roll, disadvantage is taking the lower",label:"Roll Type",value:i,onChange:function(e){u(In({id:t,changes:{rollType:e.target.value}}))},children:La})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsxs)(ne.a,{size:"small",children:[Object(xa.jsx)(re.a,{id:"activity-type-input",children:"Activity Type"}),Object(xa.jsx)(S.a,{labelId:"activity-type-input",label:"Activity Type",value:n,onChange:function(e){u(In({id:t,changes:{type:e.target.value}}))},children:Pa})]})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"An increase in proficiency (+2) is applied at each level in ()",label:"Proficiency",value:r,onChange:function(e){u(In({id:t,changes:{profTrend:e.target.value}}))},children:Wa})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Bonuses from the listed ability score are applied at the appropriate levels. An ability score starts at the first value and is increased at levels 5, 10, 15, and 20 or until it reaches the second value listed. 'apex' means a bonus from an apex item is added to that score at the level in ()",label:"Ability Score",value:c,onChange:function(e){u(In({id:t,changes:{statTrend:e.target.value}}))},children:Na})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Item bonuses are applied at the levels in ().",label:"Item Bonus",value:s,onChange:function(e){u(In({id:t,changes:{itemTrend:e.target.value}}))},children:za})}),v,g?"":Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"The multiple attack penalty that is applied to this attack.",label:"MAP",value:d,onChange:function(e){u(In({id:t,changes:{MAP:e.target.value}}))},children:Ba})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"What defense is targeted",label:"Target Defense",value:o,onChange:function(e){u(In({id:t,changes:{targetType:e.target.value}}))},children:Va})})]})})})]})},Mc=function(e){var t=e.rollInfo,a=t.isSave,i=t.MAP,n=t.profTrend,r=t.statTrend,c=t.itemTrend,s=t.bonusAdjustments,l=e.onClick,d=Object(p.useState)(20),o=Object(w.a)(d,2),u=o[0],j=o[1],f=0;return f=a?10:Xt[i],f+=Kt[n][u],f+=Yt[r][u],f+=Jt[c][u],f+=s[u],Object(xa.jsxs)(O.a,{container:!0,columnSpacing:{xs:2},alignItems:"center",children:[Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(fc.a,{onClick:l,children:Object(xa.jsx)(y.a,{variant:"h6",children:"Roll "})})}),Object(xa.jsx)(O.a,{item:!0,sx:{ml:-2,mt:1,width:100},children:Object(xa.jsx)(ce.a,{size:"small",value:u,min:1,max:20,marks:!0,onChange:function(e,t){return j(t)},valueLabelDisplay:"auto"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(y.a,{children:(a?"DC ":" +")+f.toString()+" at level "+u.toString()})})]})};x.a.initialize("G-JR2YK097BG");var Bc=function(e){var t=e.routineId,a=oe((function(e){return Vn(e,t)})),i=a.name,n=a.startLevel,r=a.endLevel,c=a.description,s=a.apIds,l=oe(tr),d=oe(ir),o=de(),u=Object(p.useState)(i),f=Object(w.a)(u,2),m=f[0],h=f[1],g=Object(p.useState)(c),v=Object(w.a)(g,2),S=v[0],C=v[1],T=Object(p.useState)([n,r]),E=Object(w.a)(T,2),I=E[0],L=E[1];Object(p.useEffect)((function(){return h(i)}),[i]),Object(p.useEffect)((function(){return C(c)}),[c]),Object(p.useEffect)((function(){return L([n,r])}),[n,r]);var R=void 0===l&&!d;return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsxs)(A.a,{sx:{my:2,p:1},children:[Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{p:1},children:[Object(xa.jsx)(O.a,{item:!0,xs:12,sm:8,md:12,lg:8,children:Object(xa.jsx)(se.a,{fullWidth:!0,label:"Routine Name",placeholder:"Fighter d8 2 strikes",value:m,onChange:function(e){h(e.target.value)},onBlur:function(){return o(Cn({id:t,changes:{name:m}}))}})}),Object(xa.jsxs)(O.a,{item:!0,xs:12,sm:4,md:12,lg:4,children:[Object(xa.jsxs)(y.a,{align:"center",children:["Valid Levels: ",n," to ",r]}),Object(xa.jsx)(ec.a,{sx:{px:2},children:Object(xa.jsx)(ce.a,{getAriaLabel:function(){return"Valid levels"},value:I,min:1,max:20,marks:!0,onChange:function(e,t){return L(t)},onBlur:function(){return o(Cn({id:t,changes:{startLevel:I[0],endLevel:I[1]}}))},valueLabelDisplay:"auto",getAriaValueText:function(e){return"".concat(e)}})})]}),Object(xa.jsx)(O.a,{item:!0,xs:12,children:Object(xa.jsx)(se.a,{fullWidth:!0,multiline:!0,label:"Routine Description",placeholder:"A Fighter making two strikes with a longsword. Critical Specialization at 5. 1d6 runes at 8 and 15.",value:S,onChange:function(e){C(e.target.value)},onBlur:function(){return o(Cn({id:t,changes:{description:S}}))}})})]}),Object(xa.jsx)(uc.a,{id:"routine-activity-list",subheader:Object(xa.jsx)(pc.a,{children:"Activities"}),children:s.map((function(e){return Object(xa.jsx)(Ac,{id:e,level:0},e)}))}),Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1},sx:{my:2,p:1},children:[Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,sm:3,md:6,lg:3,justifyContent:"center",children:Object(xa.jsx)(b.a,{size:"small",fullWidth:!0,variant:"contained",onClick:function(){return o(yn({routineId:t}))},children:"Create New Activity"})}),Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,sm:3,md:6,lg:3,justifyContent:"center",children:Object(xa.jsx)(b.a,{size:"small",fullWidth:!0,variant:"outlined",onClick:function(){x.a.event("select_content",{content_type:"new-activity",item_id:"empty-activity"}),o(wn({routineId:t}))},children:"New Empty Activity"})}),Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,sm:3,md:6,lg:3,justifyContent:"center",children:Object(xa.jsx)(b.a,{size:"small",fullWidth:!0,variant:"outlined",onClick:function(){x.a.event("select_content",{content_type:"new-activity",item_id:"strike-activity"}),o(wn({routineId:t,activityType:G.STRIKE}))},children:"New Martial Strike"})}),Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,sm:3,md:6,lg:3,justifyContent:"center",children:Object(xa.jsx)(b.a,{size:"small",fullWidth:!0,variant:"outlined",onClick:function(){x.a.event("select_content",{content_type:"new-activity",item_id:"save-activity"}),o(wn({routineId:t,activityType:G.SAVE}))},children:"New Caster Save"})})]})]}),R?s.map((function(e){return Object(xa.jsx)(Fc,{id:e,level:0},e)})):""]})},Gc=a(261),Vc=function(){var e=oe(Un),t=oe(er),a=de(),i=[],n=[];return e.forEach((function(e){i.push(Object(xa.jsx)(va.a,{value:e.id,children:e.name},e.id)),n.push(Object(xa.jsx)(ec.a,{component:"li",sx:{margin:.5,maxWidth:1},children:Object(xa.jsx)(Gc.a,{label:e.name,variant:e.display?"filled":"outlined",size:"small",color:"secondary",onClick:function(){a(Cn({id:e.id,changes:{display:!e.display}})),a(xn(e.id))},onDelete:function(){return a(En(e.id))},sx:{maxWidth:1}})},e.id))})),Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsx)(A.a,{variant:"outlined",sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",listStyle:"none",p:.5,my:2},component:"ul",children:n}),Object(xa.jsx)(A.a,{sx:{my:2,p:1},children:Object(xa.jsxs)(O.a,{container:!0,spacing:1,children:[void 0!==t?Object(xa.jsx)(O.a,{item:!0,xs:12,sm:6,md:12,lg:6,children:Object(xa.jsxs)(ne.a,{fullWidth:!0,children:[Object(xa.jsx)(re.a,{id:"select-routine-label",children:"Select Routine"}),Object(xa.jsx)(S.a,{labelId:"select-routine-label",id:"select-routine",value:t,label:"Select Routine",onChange:function(e){return a(xn(e.target.value))},children:i})]})}):"",Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,sm:3,md:6,lg:3,justifyContent:"center",children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){a(Tn({copy:!1}))},children:"Create New Routine"})}),Object(xa.jsx)(O.a,{item:!0,container:!0,xs:6,sm:3,md:6,lg:3,justifyContent:"center",children:Object(xa.jsx)(b.a,{variant:"outlined",onClick:function(){return a(Tn({copy:!0}))},children:"Copy Selected Routine"})})]})})]})},Hc=function(){var e=oe(nr),t=oe(cr),a=Object(p.useState)(!1),i=Object(w.a)(a,2),n=i[0],r=i[1],c=Object(p.useState)(""),s=Object(w.a)(c,2),l=s[0],d=s[1],o=de();Object(p.useEffect)((function(){n||(t===W?(d("Import failed"),r(!0)):t===k&&(d("Import successful"),r(!0)))}),[t,n]);return Object(xa.jsx)(A.a,{sx:{p:1},children:Object(xa.jsxs)(O.a,{container:!0,children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{onClick:function(){o(Mn(l)),r(!1)},children:"Import"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{onClick:function(){d(JSON.stringify(e))},children:"Export"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{onClick:function(){void 0!==navigator.clipboard&&(navigator.clipboard.writeText(l),d("Copied"))},children:"Copy"})}),Object(xa.jsx)(O.a,{item:!0,xs:12,children:Object(xa.jsx)(se.a,{fullWidth:!0,multiline:!0,maxRows:5,label:"Routine code",placeholder:"Enter routine code here to import.",value:l,onChange:function(e){return d(e.target.value)}})})]})})},Uc=(a(188),a(271)),_c=a(262),Kc=a(254),Yc=a(239);function Jc(e){e.routineId,e.parentId;var t=Object(p.useState)(fi.Strike),a=Object(w.a)(t,2),i=a[0],n=a[1];return Object(xa.jsxs)(A.a,{sx:{my:2,p:1},children:[Object(xa.jsxs)(ne.a,{fullWidth:!0,sx:{my:2,p:1},children:[Object(xa.jsx)(re.a,{children:"Activity Type"}),Object(xa.jsx)(S.a,{value:i,label:"Activity Type",onChange:function(e){n(e.target.value)},children:Sa(fi)})]}),fi.Strike===i?Object(xa.jsx)(Xc,{}):fi.Skill===i?Object(xa.jsx)(qc,{}):fi.Cantrip===i?Object(xa.jsx)(Qc,{}):fi.Spell===i?Object(xa.jsx)(Zc,{}):fi.Impulse===i?Object(xa.jsx)(es,{}):""]})}function Xc(){var e=Object(p.useState)({cClass:bi[6],classOption:"",activity:"Strike",spell:Li[0],attackScore:H.AS18a,damageScore:H.AS18a,cantripScore:H.AS16pp,numPrevStrikes:0,numStrikes:1,twf:!1,isStrikeSecondaryWeapon:[!1],previousHits:0,weapon1:{dieSize:8,traits:Object.fromEntries(vi.map((function(e){return[e,!1]}))),deadlySize:8,fatalSize:10,critSpec:!1,critSpecLevel:5,critSpecType:Si[0],runes:X.RUNE2,numPrevStrikes:0},weapon2:{dieSize:8,traits:Object.fromEntries(vi.map((function(e){return[e,!1]}))),deadlySize:8,fatalSize:10,critSpec:!1,critSpecLevel:5,critSpecType:Si[0],runes:X.RUNE2,numPrevStrikes:0}}),t=Object(w.a)(e,2),a=t[0],i=t[1],n=de();return Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{py:2},id:"create-new-activity",children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Which class's proficiency and weapon specialization to use.",value:a.cClass,label:"Class",onChange:function(e){!function(e){var t=Object(L.a)({},a);t.cClass=e,Oi[e].length>0?t.classOption=Oi[e][0]:t.classOption="",i(t)}(e.target.value)},children:Sa(bi)})}),Oi[a.cClass].length>0?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Which abilities are applied",value:a.classOption,label:"Class Option",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{classOption:e.target.value}))},children:Sa(Oi[a.cClass])})}):"",Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Which activity to use",value:a.activity,label:"Activity",onChange:function(e){var t=Object(L.a)({},a);t.activity=e.target.value,"Double Slice"===e.target.value&&(t.numStrikes=2,t.isStrikeSecondaryWeapon=[!1,!0]),i(t)},children:Sa(gi)})}),"Spell Strike"===a.activity?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Which spell to add to the strike",value:a.spell,label:"Spell",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{spell:e.target.value}))},children:Sa(Li)})}):"",Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"What ability score bonus progression to add to the attack roll.",value:a.attackScore,label:"Attack Abilitiy Score",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{attackScore:e.target.value}))},children:Sa(H)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"What ability score bonus progression to add to the damage roll. Not applied to ranged attacks.",value:a.damageScore,label:"Damage Abilitiy Score",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{damageScore:e.target.value}))},children:Sa(H)})}),"Inventor"===a.cClass&&("Overdrive Success"===a.classOption||"Overdrive Critical"===a.classOption)||"Spell Strike"===a.activity?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"What ability score bonus progression to add to the damage roll.",value:a.cantripScore,label:"Mental Abilitiy Score",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{cantripScore:e.target.value}))},children:Sa(H)})}):""]}),Object(xa.jsx)($c,{weapon:a.weapon1,setWeapon:function(e){return i(Object(L.a)(Object(L.a)({},a),{},{weapon1:e}))}}),Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:a.twf,onChange:function(e){return i(Object(L.a)(Object(L.a)({},a),{},{twf:e.target.checked}))}}),label:"Use Two Weapons",sx:{py:2}}),a.twf?Object(xa.jsx)($c,{weapon:a.weapon2,setWeapon:function(e){return i(Object(L.a)(Object(L.a)({},a),{},{weapon2:e}))}}):"",Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},sx:{py:2},children:[Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(Ec,{title:"Select the number of previous attacks.",value:a.numPrevStrikes,label:"Previous Attacks",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{numPrevStrikes:Number(e.target.value)}))},children:Sa([0,1,2])})}),"Double Slice"!==a.activity?Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(Ec,{title:"Select the number of attacks to make with the selected options.",value:a.numStrikes,label:"Number of Strikes",onChange:function(e){for(var t=Number(e.target.value),n=Object(L.a)({},a),r=[],c=0;c<t;c++)c<a.numStrikes?r.push(a.isStrikeSecondaryWeapon[c]):r.push(!1);n.numStrikes=t,n.isStrikeSecondaryWeapon=r,i(n)},children:Sa([1,2,3,4,5,6])})}):"","Ranger"===a.cClass&&"Precision Edge"===a.classOption?Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(Ec,{title:"Select the number of previous hits.",value:a.previousHits,label:"Previous Hits",onChange:function(e){i(Object(L.a)(Object(L.a)({},a),{},{previousHits:Number(e.target.value)}))},children:Sa([0,1,2,3])})}):"",Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){x.a.event("select_content",{content_type:"create-new-strike",item_id:a.cClass}),n(Ln({strikeInfo:a}))},children:"Create New Activity"})})]}),a.twf&&"Double Slice"!==a.activity?Object(xa.jsx)(Uc.a,{spacing:{xs:1,sm:2},children:a.isStrikeSecondaryWeapon.map((function(e,t){return Object(xa.jsxs)(ne.a,{component:"fieldset",children:[Object(xa.jsxs)(Yc.a,{component:"legend",children:["Strike ",t+1]}),Object(xa.jsxs)(_c.a,{row:!0,"aria-label":"strike-"+(t+1),value:e?2:1,onClick:function(e){var n=Object(L.a)({},a),r=a.isStrikeSecondaryWeapon.slice();r[t]="2"===e.target.value,n.isStrikeSecondaryWeapon=r,i(n)},children:[Object(xa.jsx)(T.a,{value:1,control:Object(xa.jsx)(Kc.a,{}),label:"Weapon 1"}),Object(xa.jsx)(T.a,{value:2,control:Object(xa.jsx)(Kc.a,{}),label:"Weapon 2"})]})]},t)}))}):""]})}function $c(e){var t=e.weapon,a=e.setWeapon,i=e.isElementalBlast,n=void 0!==i&&i;return Object(xa.jsxs)(O.a,{container:!0,columnSpacing:{xs:1,sm:2},sx:{py:2},alignItems:"center",children:[Object(xa.jsx)(O.a,{item:!0,xs:"auto",children:Object(xa.jsx)(y.a,{variant:"h6",children:n?"Blast details":"Weapon"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Weapon damage die",value:t.dieSize,label:"Damage Die",onChange:function(e){a(Object(L.a)(Object(L.a)({},t),{},{dieSize:Number(e.target.value)}))},children:Qa})}),n?null:Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:t.critSpec,onChange:function(e){return a(Object(L.a)(Object(L.a)({},t),{},{critSpec:e.target.checked}))}}),label:"Critical Specialization"})}),t.critSpec?Object(xa.jsxs)(O.a,{item:!0,children:[Object(xa.jsxs)(y.a,{align:"center",id:"crit-spec-level",children:["At Level ",t.critSpecLevel]}),Object(xa.jsx)(ce.a,{"aria-labelledby":"crit-spec-level",value:t.critSpecLevel,min:1,max:20,marks:!0,onChange:function(e,i){return a(Object(L.a)(Object(L.a)({},t),{},{critSpecLevel:Number(i)}))}})]}):"",t.critSpec?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"What weapon group's effect to apply on a critical hit.",value:t.critSpecType,label:"Weapon Group",onChange:function(e){return a(Object(L.a)(Object(L.a)({},t),{},{critSpecType:e.target.value}))},children:Sa(Si)})}):"",Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(A.a,{variant:"outlined",sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",listStyle:"none",p:.5,my:1},component:"ul",children:(n?xi:vi).map((function(e,i){return Object(xa.jsx)(h.a,{component:"li",sx:{margin:.5},children:Object(xa.jsx)(Gc.a,{label:e,size:"small",color:"secondary",variant:t.traits[e]?"filled":"outlined",onClick:function(){var i=Object(L.a)(Object(L.a)({},t.traits),{},Object(ye.a)({},e,!t.traits[e]));a(Object(L.a)(Object(L.a)({},t),{},{traits:i}))}})},e)}))})}),t.traits.deadly?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Deadly damage die.",value:t.deadlySize,label:"Deadly Die",onChange:function(e){a(Object(L.a)(Object(L.a)({},t),{},{deadlySize:Number(e.target.value)}))},children:Qa})}):"",t.traits.fatal?Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Fatal damage die.",value:t.fatalSize,label:"Fatal Die",onChange:function(e){a(Object(L.a)(Object(L.a)({},t),{},{fatalSize:Number(e.target.value)}))},children:Qa})}):"",n?null:Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"What levels the damages from property runes such as 'flaming' are applied.",value:t.runes,label:"Damage Rune Levels",onChange:function(e){a(Object(L.a)(Object(L.a)({},t),{},{runes:e.target.value}))},children:Sa(mi)})})]})}function qc(){var e=Object(p.useState)(V.MAXSKILL),t=Object(w.a)(e,2),a=t[0],i=t[1],n=Object(p.useState)(H.AS18a),r=Object(w.a)(n,2),c=r[0],s=r[1],l=Object(p.useState)(U.SKILL),d=Object(w.a)(l,2),o=d[0],u=d[1],j=Object(p.useState)(Ti[0]),f=Object(w.a)(j,2),m=f[0],h=f[1],g={proficiency:a,abilityScore:c,itemBonus:o,skillActivity:m},v=de();return Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which proficiency progression to apply.",label:"Proficiency",value:a,onChange:function(e){i(e.target.value)},children:Sa(yi)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which ability score progression to apply.",label:"Ability Score",value:c,onChange:function(e){s(e.target.value)},children:Sa(H)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which item bonus progression to apply.",label:"Item Bonus",value:o,onChange:function(e){u(e.target.value)},children:Sa(U)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which skill activity to use.",label:"Activity",value:m,onChange:function(e){h(e.target.value)},children:Sa(Ti)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){x.a.event("select_content",{content_type:"create-new-skill",item_id:m}),v(Ln({skillInfo:g}))},children:"Create New Activity"})})]})}function Qc(){var e=Object(p.useState)(V.CASTERSPELL),t=Object(w.a)(e,2),a=t[0],i=t[1],n=Object(p.useState)(H.AS18a),r=Object(w.a)(n,2),c=r[0],s=r[1],l=Object(p.useState)(Ei[0]),d=Object(w.a)(l,2),o=d[0],u=d[1],j={proficiency:a,abilityScore:c,cantrip:o},f=de();return Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which proficiency progression to apply.",label:"Proficiency",value:a,onChange:function(e){i(e.target.value)},children:Sa(Ai)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which ability score progression to apply.",label:"Ability Score",value:c,onChange:function(e){s(e.target.value)},children:Sa(H)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which cantrip to use.",label:"Cantrip",value:o,onChange:function(e){u(e.target.value)},children:Sa(Ei)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){x.a.event("select_content",{content_type:"create-new-cantrip",item_id:o}),f(Ln({cantripInfo:j}))},children:"Create New Activity"})})]})}function Zc(){var e=Object(p.useState)(V.CASTERSPELL),t=Object(w.a)(e,2),a=t[0],i=t[1],n=Object(p.useState)(H.AS18a),r=Object(w.a)(n,2),c=r[0],s=r[1],l=Object(p.useState)(Ii[0]),d=Object(w.a)(l,2),o=d[0],u=d[1],j={proficiency:a,abilityScore:c,spell:o},f=de();return Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which proficiency progression to apply.",label:"Proficiency",value:a,onChange:function(e){i(e.target.value)},children:Sa(Ai)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which ability score progression to apply.",label:"Ability Score",value:c,onChange:function(e){s(e.target.value)},children:Sa(H)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which spell to use.",label:"Spell",value:o,onChange:function(e){u(e.target.value)},children:Sa(Ii)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){x.a.event("select_content",{content_type:"create-new-spell",item_id:o}),f(Ln({spellInfo:j}))},children:"Create New Activity"})})]})}function es(){var e=Object(p.useState)(V.CASTERSPELL),t=Object(w.a)(e,2),a=t[0],i=t[1],n=Object(p.useState)(H.AS18a),r=Object(w.a)(n,2),c=r[0],s=r[1],l=Object(p.useState)(wi[0]),d=Object(w.a)(l,2),o=d[0],u=d[1],j=Object(p.useState)(!1),f=Object(w.a)(j,2),m=f[0],h=f[1],g=Object(p.useState)(H.AS16pp),v=Object(w.a)(g,2),S=v[0],y=v[1],A=Object(p.useState)({dieSize:8,traits:Object.fromEntries(vi.map((function(e){return[e,!1]}))),deadlySize:8,fatalSize:10,critSpec:!1,critSpecLevel:5,critSpecType:Si[1],runes:X.NONE,numPrevStrikes:0}),C=Object(w.a)(A,2),I=C[0],L=C[1],R={proficiency:a,abilityScore:c,impulse:o,isTwoAction:m,strScore:S,weaponInfo:I},P=de();return Object(xa.jsxs)(xa.Fragment,{children:[Object(xa.jsxs)(O.a,{container:!0,spacing:{xs:1,sm:2},children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which proficiency progression to apply.",label:"Proficiency",value:a,onChange:function(e){i(e.target.value)},children:Sa(Ci)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which ability score progression to apply.",label:"Ability Score",value:c,onChange:function(e){s(e.target.value)},children:Sa(H)})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which impulse to use.",label:"Impulse",value:o,onChange:function(e){u(e.target.value)},children:Sa(wi)})}),"Elemental Blast"===o?Object(xa.jsxs)(xa.Fragment,{children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(T.a,{control:Object(xa.jsx)(E.a,{checked:m,onChange:function(e){return h(e.target.checked)}}),label:"Is two action blast"})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(Ec,{title:"Select which ability score progression to apply.",label:"Strength Score",value:S,onChange:function(e){y(e.target.value)},children:Sa(H)})})]}):null]}),"Elemental Blast"===o?Object(xa.jsx)($c,{weapon:I,setWeapon:L,isElementalBlast:!0}):null,Object(xa.jsx)(O.a,{children:Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(b.a,{variant:"contained",onClick:function(){x.a.event("select_content",{content_type:"create-new-impulse",item_id:o}),P(Ln({impulseInfo:R}))},children:"Create New Activity"})})})]})}x.a.initialize("G-JR2YK097BG"),x.a.initialize("G-JR2YK097BG");for(var ts=function(){var e=oe(er),t=oe(tr),a=oe(ir);return Object(p.useEffect)((function(){a&&(window.location.href="#create-new-activity",x.a.event("select_content",{content_type:"new-activity",item_id:"create-new-activity"}))}),[a]),Object(xa.jsxs)(h.a,{sx:{},children:[Object(xa.jsx)(Vc,{}),void 0!==e?Object(xa.jsx)(Bc,{routineId:e}):"",void 0!==t?Object(xa.jsx)(Fc,{id:t,open:!0}):a?Object(xa.jsx)(Jc,{}):"",Object(xa.jsx)(Hc,{}),Object(xa.jsxs)(O.a,{container:!0,sx:{mb:2,mt:0},justifyContent:"space-evenly",alignItems:"center",spacing:2,children:[Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(as,{})}),Object(xa.jsx)(O.a,{item:!0,children:Object(xa.jsx)(is,{})})]})]})},as=function(){return Object(xa.jsx)(h.a,{sx:{height:60,width:217},onClick:function(){return x.a.event("select_content",{content_type:"buy-me-a-coffee"})},children:Object(xa.jsx)("a",{href:"https://www.buymeacoffee.com/bahalbach",target:"_blank",rel:"noreferrer",children:Object(xa.jsx)("img",{src:"https://cdn.buymeacoffee.com/buttons/v2/default-red.png",alt:"Buy Me A Coffee",width:"217px",height:"60px"})})})},is=function(){return Object(xa.jsx)(b.a,{sx:{height:60,width:217},variant:"contained",color:"primary",href:"mailto:bahalbach@gmail.com",children:"Contact Me"})},ns=function(){var e=Object(I.a)((function(e){return e.breakpoints.up("md")}));return x.a.send("pageview"),Object(xa.jsx)(j.a.Fragment,{children:Object(xa.jsx)(g.a,{maxWidth:"xl",children:e?Object(xa.jsxs)(O.a,{container:!0,columnSpacing:{xs:2,md:2,lg:3,xl:4},sx:{height:"100vh"},children:[Object(xa.jsx)(O.a,{id:"container",item:!0,xs:12,md:6,sx:{height:"100%",overflow:"auto"},children:Object(xa.jsx)(ts,{})}),Object(xa.jsx)(O.a,{item:!0,xs:12,md:6,sx:{mt:0,height:1,overflow:"hidden auto"},children:Object(xa.jsx)(oc,{})})]}):Object(xa.jsxs)(j.a.Fragment,{children:[Object(xa.jsx)(oc,{}),Object(xa.jsx)(ts,{})]})})})},rs=['{"id":101,"name":"Fighter - 2 Strike - d12 Sword","display":false,"apIds":[{"name":"Fighter - Strike - d12 Sword","type":"Strike","condition":"Always","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":12,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1003},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1004}],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1002}],"apIds":[{"name":"Fighter - Strike - d12 Sword","type":"Strike","condition":"Always","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"-5 (1x-5)","targetType":"AC","damages":[{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":12,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1001},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1002}],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1001}],"apIds":[],"id":1002,"parentId":1001}],"id":1001,"routineId":101}],"levelDiff":0,"description":"2 Strike with class Fighter () after 0 previous strikes. Weapon is d12 Sword","startLevel":1,"endLevel":20}','{"id":102,"name":"Fighter - 1 Power Attack - d12 Sword","display":false,"apIds":[{"name":"Fighter - Power Attack - d12 Sword","type":"Strike","condition":"Always","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":2,"11":2,"12":2,"13":2,"14":2,"15":2,"16":2,"17":2,"18":3,"19":3,"20":3},"diceSize":12,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1005},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1006}],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1003}],"apIds":[],"id":1003,"routineId":102}],"levelDiff":0,"description":"1 Power Attack with class Fighter () after 0 previous strikes. Weapon is d12 Sword","startLevel":1,"endLevel":20}','{"id":103,"name":"Fighter - Double Slice - d6 fatal d10 Pick | d4 agile fatal d8 Pick","display":false,"apIds":[{"name":"Fighter - Double Slice - d6 fatal d10 Pick","type":"Strike","condition":"Always","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[],"effects":[],"apIds":[{"name":"Fighter - Double Slice - d4 agile fatal d8 Pick","type":"Strike","condition":"On Crit","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"Always","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":2,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":10,"fatal":true,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1007},{"damageCondition":"Always","damageType":"fire","material":"none","persistent":false,"multiplier":2,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1008},{"damageCondition":"Always","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"None","dieAdjustments":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"diceSize":10,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":4,"6":4,"7":4,"8":4,"9":4,"10":4,"11":4,"12":6,"13":6,"14":6,"15":6,"16":6,"17":6,"18":6,"19":8,"20":8},"id":1009},{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":4,"fatal":true,"fatalDie":8,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1010},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1011},{"damageCondition":"On Crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"None","dieAdjustments":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"diceSize":8,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":4,"6":4,"7":4,"8":4,"9":4,"10":4,"11":4,"12":6,"13":6,"14":6,"15":6,"16":6,"17":6,"18":6,"19":8,"20":8},"id":1012}],"effects":[],"apIds":[],"id":1005,"parentId":1004},{"name":"Fighter - Double Slice - d4 agile fatal d8 Pick","type":"Strike","condition":"On Success","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"Always","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1013},{"damageCondition":"Always","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1014},{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":4,"fatal":true,"fatalDie":8,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1015},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1016},{"damageCondition":"On Crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"None","dieAdjustments":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"diceSize":8,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":4,"6":4,"7":4,"8":4,"9":4,"10":4,"11":4,"12":6,"13":6,"14":6,"15":6,"16":6,"17":6,"18":6,"19":8,"20":8},"id":1017}],"effects":[],"apIds":[],"id":1006,"parentId":1004},{"name":"Fighter - Double Slice - d4 agile fatal d8 Pick","type":"Strike","condition":"Failure or worse","rollType":"Normal","profTrend":"Fighter Weapon (1, 5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":4,"fatal":true,"fatalDie":8,"damageTrend":["18 to 24 apex(17)","Fighter Weapon Specialization"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1018},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1019},{"damageCondition":"On Crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"None","dieAdjustments":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1},"diceSize":8,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":4,"6":4,"7":4,"8":4,"9":4,"10":4,"11":4,"12":6,"13":6,"14":6,"15":6,"16":6,"17":6,"18":6,"19":8,"20":8},"id":1020}],"effects":[],"apIds":[],"id":1007,"parentId":1004}],"id":1004,"routineId":103}],"levelDiff":0,"description":"2 Double Slice with class Fighter () after 0 previous strikes. Weapon is d6 fatal d10 Pick. Weapon two is d4 agile fatal d8 Pick","startLevel":1,"endLevel":20}','{"id":105,"name":"Rogue (Sneak Attack) - Double Slice - d6 deadly d8 Sword | d6 agile Sword","display":true,"apIds":[{"name":"Rogue (Sneak Attack) - Double Slice - d6 deadly d8 Sword","type":"Strike","condition":"Always","rollType":"Normal","profTrend":"Martial Weapon (5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1009}],"apIds":[{"name":"Rogue (Sneak Attack) - Double Slice - d6 agile Sword","type":"Strike","condition":"On Crit","rollType":"Normal","profTrend":"Martial Weapon (5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"Always","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":2,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Martial Weapon Specializaton"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1025},{"damageCondition":"Always","damageType":"fire","material":"none","persistent":false,"multiplier":2,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1026},{"damageCondition":"Always","damageType":"precision","material":"none","persistent":false,"multiplier":2,"damageWhen":["Flatfooted"],"dieTrend":"Sneak Attack (1, 5, 11, 17)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1027},{"damageCondition":"Always","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Deadly (1, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":8,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1028},{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Martial Weapon Specializaton"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1029},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1030}],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1006}],"apIds":[],"id":1011,"parentId":1010},{"name":"Rogue (Sneak Attack) - Double Slice - d6 agile Sword","type":"Strike","condition":"On Success","rollType":"Normal","profTrend":"Martial Weapon (5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"Always","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Martial Weapon Specializaton"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1031},{"damageCondition":"Always","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1032},{"damageCondition":"Failure or worse","damageType":"precision","material":"none","persistent":false,"multiplier":1,"damageWhen":["Flatfooted"],"dieTrend":"Sneak Attack (1, 5, 11, 17)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1033},{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Martial Weapon Specializaton"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1034},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1035},{"damageCondition":"x1 hit, x2 crit","damageType":"precision","material":"none","persistent":false,"multiplier":1,"damageWhen":["Flatfooted"],"dieTrend":"Sneak Attack (1, 5, 11, 17)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1036}],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1007}],"apIds":[],"id":1012,"parentId":1010},{"name":"Rogue (Sneak Attack) - Double Slice - d6 agile Sword","type":"Strike","condition":"Failure or worse","rollType":"Normal","profTrend":"Martial Weapon (5, 13)","statTrend":"18 to 24 apex(17)","itemTrend":"Weapon (2, 10, 16)","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"AC","damages":[{"damageCondition":"x1 hit, x2 crit","damageType":"bludgeoning","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Weapon (1, 4, 12, 19)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":["18 to 24 apex(17)","Martial Weapon Specializaton"],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1037},{"damageCondition":"x1 hit, x2 crit","damageType":"fire","material":"none","persistent":false,"multiplier":1,"damageWhen":["Always"],"dieTrend":"Runes (8, 10, 16)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1038},{"damageCondition":"x1 hit, x2 crit","damageType":"precision","material":"none","persistent":false,"multiplier":1,"damageWhen":["Flatfooted"],"dieTrend":"Sneak Attack (1, 5, 11, 17)","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"id":1039}],"effects":[{"effectCondition":"On Crit","effectType":"Flatfooted","effectValue":1,"startLevel":5,"endLevel":20,"damageWhen":["Always"],"id":1008}],"apIds":[],"id":1013,"parentId":1010}],"id":1010,"routineId":105}],"levelDiff":0,"description":"2 Double Slice with class Rogue (Sneak Attack) after 0 previous strikes. Weapon is d6 deadly d8 Sword. Weapon two is d6 agile Sword","startLevel":1,"endLevel":20}','{"id":2,"name":"Fireball","display":false,"apIds":[{"name":"Fireball", "id":2,"condition":"Always","rollType":"Normal","type":"Save","profTrend":"Caster Spell (7, 15, 19)","statTrend":"18 to 24 apex(17)","itemTrend":"None","bonusAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"MAP":"0 (0x-5)","targetType":"Ref","targetInfoId":0,"damages":[{"id":7,"damageCondition":"Basic save","dieTrend":"2 x Spell Level","dieAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"diceSize":6,"fatal":false,"fatalDie":10,"damageTrend":[],"damageAdjustments":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},"damageType":"fire","material":"none","persistent":false,"multiplier":1}],"effects":[],"apIds":[]}],"levelDiff":0,"description":"A 2d6 / spell level basic reflex save.","startLevel":1,"endLevel":20}'],cs={},ss=1;ss<=20;ss++)cs[ss]=0;var ls=function(){var e=Object(ue.a)({reducer:{routines:Bn,weaknesses:Oe,targets:ma,sharing:Jr}});e.dispatch(ja({id:0,name:"AC: High, Saves: Moderate",levelDiff:0,persistentMultiplier:2,ACTrend:N.HIGH,FortTrend:F.MODERATE,RefTrend:F.MODERATE,WillTrend:F.MODERATE,PerTrend:F.MODERATE,HPTrend:z.MODERATE,percentHP:100,flatfooted:!1,percentSelectedRoutine:!1,weaknesses:[],graphType:R.DISTRIBUTION,routineLevel:1,targetLevel:1,overrideAC:16,overrideFort:7,overrideRef:7,overrideWill:7,overridePer:7,overrideHP:20,currentHP:20}));try{if(null===localStorage.getItem("routineState")){e.dispatch(An({id:0,name:"Baseline",display:!0,apIds:[],levelDiff:0,description:"No damage. Just so graphs display 0 with autoscalling.",startLevel:1,endLevel:20}));var t,a=Object(Ae.a)(rs);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.dispatch(Mn(i))}}catch(n){a.e(n)}finally{a.f()}e.dispatch(xn(2))}}catch(r){}return e}(),ds=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function os(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var us=a(127),ps=a(58),js=Object(us.a)({palette:{primary:{main:ps.a[900]},background:{default:"#222222"}}}),fs=a(253);m.a.render(Object(xa.jsx)(j.a.StrictMode,{children:Object(xa.jsx)(le.a,{store:ls,children:Object(xa.jsxs)(fs.a,{theme:js,children:[Object(xa.jsx)(u.a,{}),Object(xa.jsx)(ns,{})]})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/PF2Calculator",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/PF2Calculator","/service-worker.js");ds?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var i=a.headers.get("content-type");404===a.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):os(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):os(t,e)}))}}()}},[[189,1,2]]]);
//# sourceMappingURL=main.bc47f159.chunk.js.map