{"version":3,"sources":["types.js","defaults.js","Target/weaknessSlice.js","Target/targetSlice.js","Target/TargetInput.js","Calculation.js","Routine/damageSlice.js","Routine/activityPathSlice.js","Routine/routineSlice.js","Display.js","Routine/SelectedRoutine.js","Routines.js","Export.js","PF2App.js","Routine/effectSlice.js","store.js","serviceWorker.js","index.js"],"names":["activityTypes","STRIKE","SAVE","defaultValuesAC","LOW","MODERATE","HIGH","EXTREME","defaultValuesSaves","TERRIBLE","defenses","AC","FORT","REF","WILL","PER","MAPs","N1","N2","N3","A1","A2","A3","R1","R2","R3","RA1","RA2","RA3","RAA1","RAA2","RAA3","MAPvalues","damageTypes","NONE","B","P","S","FIRE","materials","COLD_IRON","SILVER","ADAMANTINE","conditions","ALWAYS","CRIT","SUCC","FAIL","CRIF","AT_LEAST_SUCC","AT_LEAST_FAIL","FAIL_WORSE","SUCC_WORSE","dCond","BASIC","diceNums","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","diceSizes","extremeAC","21","22","23","24","highAC","level","moderateAC","lowAC","defaultACs","defaultSaves","weaknessAdapter","createEntityAdapter","weakness","weaknessesSlice","createSlice","name","initialState","getInitialState","reducers","weaknessAdded","addOne","weaknessUpdated","updateOne","weaknessCreated","reducer","state","action","payload","id","type","value","prepare","parentId","weaknessRemoved","removeOne","actions","getSelectors","weaknesses","selectweaknessById","selectById","selectweaknessEntities","selectIds","selectEntities","targetAdapter","selectAll","selectTotal","targetsSlice","targetAdded","targetUpdated","target","entities","useDefaultAC","defaultAC","useDefaultFort","defaultFort","useDefaultRef","defaultRef","useDefaultWill","defaultWill","useDefaultPer","defaultPer","extraReducers","builder","addCase","weaknessId","push","filter","wid","targets","selecttargetById","selecttargetEntities","Weakness","useSelector","dispatch","useDispatch","className","onChange","e","changes","isNaN","parseInt","AddWeakness","useState","weaknessValue","setWeaknessValue","WeaknessSelect","options","dt","key","m","TargetInput","Fort","Ref","Will","Perception","flatfooted","ACOptions","dv","SaveOptions","htmlFor","placeholder","checked","map","convolve","vec1","vec2","length","Error","volume","kernel","displacement","convVec","i","j","consolidateDists","maxDamage","dists","dist","Math","max","staticDamage","damageDist","index","applyMin","min","shift","addDamage","context","material","persistent","multiplier","normal","dam","newDist","newDam","floor","oldValue","chance","newValue","diff","multiplyDist","damageAdapter","damageId","damagesSlice","damageAdded","damageUpdated","damageCreated","condition","diceNum","diceSize","damageRemoved","console","log","damages","selectdamageById","selectdamageEntities","activityPathAdapter","activityPathId","activityPathsSlice","activityPathAdded","activityPathUpdated","activityPathCreated","targetType","targetInfoId","MAP","effects","apIds","undefined","routineId","did","activityPaths","selectactivityPathById","selectactivityPathEntities","routinesAdapter","routinesSlice","selectedRoutine","setRoutine","routineAdded","routineUpdated","routineCreated","apId","updateSelected","routines","selectRoutineById","selectRoutineEntities","selectAllRoutines","selectSelectedRoutine","Display","addPersistent","setAddPersistent","perMulti","setPerMulti","evaluateActivityPath","activityPath","currentTarget","currentDamages","currentWeaknesses","activity","bonus","DC","chances","keen","dif","getCritSuccessPercent","getSuccessPercent","getFailurePercent","getCritFailurePercent","critDamages","succDamages","failDamages","crfaDamages","damageTrees","forEach","damage","diceArray","damageTree","damageQuality","totalStaticDamage","totalDamageDist","maxW","maxR","calculateExpectedDamage","ap","pathDist","pathPDist","indicies","maxPDamage","datasets","expectedDamages","expectedPersistentDamages","routine","expD","routineDDist","routinePDDist","PdamageDist","dataArray","x","y","fill","label","data","xAxisID","yAxisID","spanGaps","labels","valueAsNumber","NameInput","ActivityPath","conditionOptions","c","activityTypeOptions","at","MAPOptions","defenseOptions","d","onClick","Damage","dc","diceNumOptions","dn","diceSizeOptions","ds","damageTypeOptions","materialOptions","SelectedRoutine","Routines","routineOptions","ImportExport","PF2App","props","Export","effectAdapter","effectsSlice","effectAdded","effectUpdated","store","configureStore","routineReducer","activityPathReducer","damageReducer","effectReducer","weaknessReducer","targetReducer","overrideDefault","addMods","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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B,EAIE6F,EAJF7F,aACA3F,EAGEwL,EAHFxL,KACAmG,EAEEqF,EAFFrF,SACAC,EACEoF,EADFpF,WAEGT,IAAcA,EAAe,GAIlC,IAFA,IAAIC,EAAa,CAAC,GACZ6F,EAAY,GACTtG,EAAI,EAAGA,EAAIqC,EAAUrC,IAC5BsG,EAAUrJ,KAAK,EAAIoF,GAErB,IAAK,IAAIrC,EAAI,EAAGA,EAAIoC,EAASpC,IAC3BS,EAAalB,GAASkB,EAAY6F,GAIpC,OAFA9F,GAAgB4B,EAERD,GACN,KAAK7K,EAAMpD,OACT4M,GACEkF,EACAnL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEFK,GACEiF,EACAlL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAMC,MACTuJ,GACEkF,EACAnL,EACAmG,EACAC,EACAT,EACAC,EACA,IAEFK,GACEmF,EACApL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEFK,GACEoF,EACArL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAML,KACT6J,GACEoF,EACArL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAMN,KACT8J,GACEmF,EACApL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAMP,KACT+J,GACEkF,EACAnL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAMR,KACTgK,GACEiF,EACAlL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAMJ,cACT4J,GACEkF,EACAnL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEFK,GACEiF,EACAlL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAMH,cACT2J,GACEmF,EACApL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEFK,GACEkF,EACAnL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEFK,GACEiF,EACAlL,EACAmG,EACAC,EACAT,EACAC,EACA,GAEF,MAEF,KAAKnJ,EAAM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","file":"static/js/main.7f9c7e43.chunk.js","sourcesContent":["export const activityTypes = {\r\n  STRIKE: \"Strike\",\r\n  SAVE: \"Save\",\r\n};\r\n\r\nexport const defaultValuesAC = {\r\n  LOW: \"Low\",\r\n  MODERATE: \"Moderate\",\r\n  HIGH: \"High\",\r\n  EXTREME: \"Extreme\",\r\n};\r\n\r\nexport const defaultValuesSaves = {\r\n  TERRIBLE: \"Terrible\",\r\n  LOW: \"Low\",\r\n  MODERATE: \"Moderate\",\r\n  HIGH: \"High\",\r\n  EXTREME: \"Extreme\",\r\n};\r\n\r\nexport const defenses = {\r\n  AC: \"AC\",\r\n  FORT: \"Fort\",\r\n  REF: \"Ref\",\r\n  WILL: \"Will\",\r\n  PER: \"Perception\",\r\n};\r\n\r\nexport const MAPs = {\r\n  N1: \"0 (0x-5)\",\r\n  N2: \"-5 (1x-5)\",\r\n  N3: \"-10 (2x-5)\",\r\n  A1: \"0 (0x-4)\",\r\n  A2: \"-4 (1x-4)\",\r\n  A3: \"-8 (2x-4)\",\r\n  R1: \"0 (0x-3)\",\r\n  R2: \"-3 (1x-3)\",\r\n  R3: \"-6 (2x-3)\",\r\n  RA1: \"0 (0x-2)\",\r\n  RA2: \"-2 (1x-2)\",\r\n  RA3: \"-4 (2x-2)\",\r\n  RAA1: \"0 (0x-1)\",\r\n  RAA2: \"-1 (1x-1)\",\r\n  RAA3: \"-2 (2x-1)\",\r\n};\r\n\r\nexport const MAPvalues = {\r\n  \"0 (0x-5)\": 0,\r\n  \"-5 (1x-5)\": -5,\r\n  \"-10 (2x-5)\": -10,\r\n  \"0 (0x-4)\": 0,\r\n  \"-4 (1x-4)\": -4,\r\n  \"-8 (2x-4)\": -8,\r\n  \"0 (0x-3)\": 0,\r\n  \"-3 (1x-3)\": -3,\r\n  \"-6 (2x-3)\": -6,\r\n  \"0 (0x-2)\": 0,\r\n  \"-2 (1x-2)\": -2,\r\n  \"-4 (2x-2)\": -4,\r\n  \"0 (0x-1)\": 0,\r\n  \"-1 (1x-1)\": -1,\r\n  \"-2 (2x-1)\": -2,\r\n};\r\n\r\nexport const damageTypes = {\r\n  NONE: \"None\",\r\n  B: \"bludgeoning\",\r\n  P: \"piercing\",\r\n  S: \"slashing\",\r\n  FIRE: \"fire\",\r\n};\r\n\r\nexport const materials = {\r\n  NONE: \"none\",\r\n  COLD_IRON: \"cold iron\",\r\n  SILVER: \"silver\",\r\n  ADAMANTINE: \"adamantine\",\r\n};\r\n\r\nexport const conditions = {\r\n  ALWAYS: \"Always\",\r\n  CRIT: \"On Crit\",\r\n  SUCC: \"On Success\",\r\n  FAIL: \"On Failure\",\r\n  CRIF: \"On Crit Fail\",\r\n  AT_LEAST_SUCC: \"Success or better\",\r\n  AT_LEAST_FAIL: \"Failure or better\",\r\n  FAIL_WORSE: \"Failure or worse\",\r\n  SUCC_WORSE: \"Success or worse\",\r\n};\r\n\r\nexport const dCond = {\r\n  STRIKE: \"x1 hit, x2 crit\",\r\n  BASIC: \"Basic save\",\r\n  ALWAYS: \"Always\",\r\n  CRIT: \"On Crit\",\r\n  SUCC: \"On Success\",\r\n  FAIL: \"On Failure\",\r\n  CRIF: \"On Crit Fail\",\r\n  AT_LEAST_SUCC: \"Success or better\",\r\n  AT_LEAST_FAIL: \"Failure or better\",\r\n  FAIL_WORSE: \"Failure or worse\",\r\n  SUCC_WORSE: \"Success or worse\",\r\n};\r\n\r\nexport const diceNums = {\r\n  0: 0,\r\n  1: 1,\r\n  2: 2,\r\n  3: 3,\r\n  4: 4,\r\n  5: 5,\r\n  6: 6,\r\n  7: 7,\r\n  8: 8,\r\n  9: 9,\r\n  10: 10,\r\n  11: 11,\r\n  12: 12,\r\n  13: 13,\r\n  14: 14,\r\n  15: 15,\r\n  16: 16,\r\n  17: 17,\r\n  18: 18,\r\n  19: 19,\r\n  20: 20,\r\n};\r\n\r\nexport const diceSizes = {\r\n  4: 4,\r\n  6: 6,\r\n  8: 8,\r\n  10: 10,\r\n  12: 12,\r\n};\r\n","import { defaultValuesAC, defaultValuesSaves } from \"./types\";\r\n\r\nconst extremeAC = {\r\n  \"-1\": 18,\r\n  0: 19,\r\n  1: 19,\r\n  2: 21,\r\n  3: 22,\r\n  4: 24,\r\n  5: 25,\r\n  6: 27,\r\n  7: 28,\r\n  8: 30,\r\n  9: 31,\r\n  10: 33,\r\n  11: 34,\r\n  12: 36,\r\n  13: 37,\r\n  14: 39,\r\n  15: 40,\r\n  16: 42,\r\n  17: 43,\r\n  18: 45,\r\n  19: 46,\r\n  20: 48,\r\n  21: 49,\r\n  22: 51,\r\n  23: 52,\r\n  24: 54,\r\n};\r\nconst highAC = { ...extremeAC };\r\nfor (let level in highAC) highAC[level] -= 3;\r\n\r\nconst moderateAC = { ...extremeAC };\r\nfor (let level in moderateAC) moderateAC[level] -= 4;\r\n\r\nconst lowAC = { ...extremeAC };\r\nfor (let level in lowAC) lowAC[level] -= 6;\r\n\r\nexport const defaultACs = {\r\n  [defaultValuesAC.EXTREME]: extremeAC,\r\n  [defaultValuesAC.HIGH]: highAC,\r\n  [defaultValuesAC.MODERATE]: moderateAC,\r\n  [defaultValuesAC.LOW]: lowAC,\r\n};\r\n\r\nconst extremeSaves = {\r\n  \"-1\": 9,\r\n  0: 10,\r\n  1: 11,\r\n  2: 12,\r\n  3: 14,\r\n  4: 15,\r\n  5: 17,\r\n  6: 18,\r\n  7: 20,\r\n  8: 21,\r\n  9: 23,\r\n  10: 24,\r\n  11: 26,\r\n  12: 27,\r\n  13: 29,\r\n  14: 30,\r\n  15: 32,\r\n  16: 33,\r\n  17: 35,\r\n  18: 36,\r\n  19: 38,\r\n  20: 39,\r\n  21: 41,\r\n  22: 43,\r\n  23: 44,\r\n  24: 46,\r\n};\r\nconst highSaves = {\r\n  \"-1\": 8,\r\n  0: 9,\r\n  1: 10,\r\n  2: 11,\r\n  3: 12,\r\n  4: 14,\r\n  5: 15,\r\n  6: 17,\r\n  7: 18,\r\n  8: 19,\r\n  9: 21,\r\n  10: 22,\r\n  11: 24,\r\n  12: 25,\r\n  13: 26,\r\n  14: 28,\r\n  15: 29,\r\n  16: 30,\r\n  17: 32,\r\n  18: 33,\r\n  19: 35,\r\n  20: 36,\r\n  21: 38,\r\n  22: 39,\r\n  23: 40,\r\n  24: 42,\r\n};\r\nconst moderateSaves = {\r\n  \"-1\": 5,\r\n  0: 6,\r\n  1: 7,\r\n  2: 8,\r\n  3: 9,\r\n  4: 11,\r\n  5: 12,\r\n  6: 14,\r\n  7: 15,\r\n  8: 16,\r\n  9: 18,\r\n  10: 19,\r\n  11: 21,\r\n  12: 22,\r\n  13: 23,\r\n  14: 25,\r\n  15: 26,\r\n  16: 28,\r\n  17: 29,\r\n  18: 30,\r\n  19: 32,\r\n  20: 33,\r\n  21: 35,\r\n  22: 36,\r\n  23: 37,\r\n  24: 38,\r\n};\r\nconst lowSaves = {\r\n  \"-1\": 2,\r\n  0: 3,\r\n  1: 4,\r\n  2: 5,\r\n  3: 6,\r\n  4: 8,\r\n  5: 9,\r\n  6: 11,\r\n  7: 12,\r\n  8: 13,\r\n  9: 15,\r\n  10: 16,\r\n  11: 18,\r\n  12: 19,\r\n  13: 20,\r\n  14: 22,\r\n  15: 23,\r\n  16: 25,\r\n  17: 26,\r\n  18: 27,\r\n  19: 29,\r\n  20: 30,\r\n  21: 32,\r\n  22: 33,\r\n  23: 34,\r\n  24: 36,\r\n};\r\nconst terribleSaves = {\r\n  \"-1\": 0,\r\n  0: 1,\r\n  1: 2,\r\n  2: 3,\r\n  3: 4,\r\n  4: 6,\r\n  5: 7,\r\n  6: 8,\r\n  7: 10,\r\n  8: 11,\r\n  9: 12,\r\n  10: 14,\r\n  11: 15,\r\n  12: 16,\r\n  13: 18,\r\n  14: 19,\r\n  15: 20,\r\n  16: 22,\r\n  17: 23,\r\n  18: 24,\r\n  19: 26,\r\n  20: 27,\r\n  21: 28,\r\n  22: 30,\r\n  23: 31,\r\n  24: 32,\r\n};\r\nexport const defaultSaves = {\r\n  [defaultValuesSaves.EXTREME]: extremeSaves,\r\n  [defaultValuesSaves.HIGH]: highSaves,\r\n  [defaultValuesSaves.MODERATE]: moderateSaves,\r\n  [defaultValuesSaves.LOW]: lowSaves,\r\n  [defaultValuesSaves.TERRIBLE]: terribleSaves,\r\n};\r\n","import { createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const weaknessAdapter = createEntityAdapter();\r\n\r\nlet weakness = 0;\r\n\r\nexport const weaknessesSlice = createSlice({\r\n  name: \"weaknesses\",\r\n  initialState: weaknessAdapter.getInitialState(),\r\n  reducers: {\r\n    weaknessAdded: weaknessAdapter.addOne,\r\n    weaknessUpdated: weaknessAdapter.updateOne,\r\n    weaknessCreated: {\r\n      reducer: (state, action) => {\r\n        const { id, type, value } = action.payload;\r\n        weaknessAdapter.addOne(state, { id, type, value });\r\n      },\r\n      prepare: ({ parentId, type, value }) => {\r\n        const id = ++weakness;\r\n        return {\r\n          payload: {\r\n            id,\r\n            parentId,\r\n            type,\r\n            value,\r\n          },\r\n        };\r\n      },\r\n    },\r\n    weaknessRemoved: weaknessAdapter.removeOne,\r\n  },\r\n});\r\n\r\nexport const {\r\n  weaknessRemoved,\r\n  weaknessCreated,\r\n  weaknessAdded,\r\n  weaknessUpdated,\r\n} = weaknessesSlice.actions;\r\n\r\nexport default weaknessesSlice.reducer;\r\n\r\nexport const {\r\n  selectById: selectweaknessById,\r\n  selectIds: selectweaknessIds,\r\n  selectEntities: selectweaknessEntities,\r\n  selectAll: selectAllweaknesses,\r\n  selectTotal: selectTotalweaknesses,\r\n} = weaknessAdapter.getSelectors((state) => state.weaknesses);\r\n","import { createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport { defaultACs, defaultSaves } from \"../defaults\";\r\nimport { defenses } from \"../types\";\r\nimport { weaknessCreated, weaknessRemoved } from \"./weaknessSlice\";\r\n\r\nexport const targetAdapter = createEntityAdapter();\r\n\r\nexport const targetsSlice = createSlice({\r\n  name: \"targets\",\r\n  initialState: targetAdapter.getInitialState(),\r\n  reducers: {\r\n    targetAdded: targetAdapter.addOne,\r\n    targetUpdated: (state, action) => {\r\n      targetAdapter.updateOne(state, action.payload);\r\n      const target = state.entities[action.payload.id];\r\n      if (!target.level) target.level = 0;\r\n      if (target.level < -1) target.level = -1;\r\n      if (target.level > 24) target.level = 24;\r\n      if (target.useDefaultAC) {\r\n        target[defenses.AC] = defaultACs[target.defaultAC][target.level];\r\n      }\r\n      if (target.useDefaultFort) {\r\n        target[defenses.FORT] = defaultSaves[target.defaultFort][target.level];\r\n      }\r\n      if (target.useDefaultRef) {\r\n        target[defenses.REF] = defaultSaves[target.defaultRef][target.level];\r\n      }\r\n      if (target.useDefaultWill) {\r\n        target[defenses.WILL] = defaultSaves[target.defaultWill][target.level];\r\n      }\r\n      if (target.useDefaultPer) {\r\n        target[defenses.PER] = defaultSaves[target.defaultPer][target.level];\r\n      }\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(weaknessCreated, (state, action) => {\r\n        const { parentId: id, id: weaknessId } = action.payload;\r\n        state.entities[id].weaknesses.push(weaknessId);\r\n        // targetAdded.updateOne(state, { id, changes: { weaknesses: [...weaknesses, weaknessId] }});\r\n      })\r\n      .addCase(weaknessRemoved, (state, action) => {\r\n        const { parentId: id, id: weaknessId } = action.payload;\r\n        state.entities[id].weaknesses = state.entities[id].weaknesses.filter(\r\n          (wid) => wid !== weaknessId\r\n        );\r\n      });\r\n  },\r\n});\r\n\r\nexport const { targetAdded, targetUpdated } = targetsSlice.actions;\r\n\r\nexport default targetsSlice.reducer;\r\n\r\nexport const {\r\n  selectById: selecttargetById,\r\n  selectIds: selecttargetIds,\r\n  selectEntities: selecttargetEntities,\r\n  selectAll: selectAlltargets,\r\n  selectTotal: selectTotaltargets,\r\n} = targetAdapter.getSelectors((state) => state.targets);\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selecttargetById, targetUpdated } from \"./targetSlice\";\r\nimport {\r\n  damageTypes,\r\n  defaultValuesAC,\r\n  defaultValuesSaves,\r\n  defenses,\r\n  materials,\r\n} from \"../types\";\r\nimport {\r\n  selectweaknessById,\r\n  weaknessCreated,\r\n  weaknessRemoved,\r\n  weaknessUpdated,\r\n} from \"./weaknessSlice\";\r\n\r\nfunction TargetInput({ id }) {\r\n  const {\r\n    name,\r\n    level,\r\n    [defenses.AC]: AC,\r\n    defaultAC,\r\n    useDefaultAC,\r\n    [defenses.FORT]: Fort,\r\n    defaultFort,\r\n    useDefaultFort,\r\n    [defenses.REF]: Ref,\r\n    defaultRef,\r\n    useDefaultRef,\r\n    [defenses.WILL]: Will,\r\n    defaultWill,\r\n    useDefaultWill,\r\n    [defenses.PER]: Perception,\r\n    defaultPer,\r\n    useDefaultPer,\r\n    flatfooted,\r\n    weaknesses,\r\n  } = useSelector((state) => selecttargetById(state, 0));\r\n  const dispatch = useDispatch();\r\n\r\n  const ACOptions = [];\r\n  for (let dv in defaultValuesAC) {\r\n    ACOptions.push(<option key={dv}>{defaultValuesAC[dv]}</option>);\r\n  }\r\n  const SaveOptions = [];\r\n  for (let dv in defaultValuesSaves) {\r\n    SaveOptions.push(<option key={dv}>{defaultValuesSaves[dv]}</option>);\r\n  }\r\n\r\n  // name, level, ac, fort, ref, will, perception, resistances/weaknesses\r\n  return (\r\n    <div className=\"box flexbox\">\r\n      <span className=\"input\">\r\n        <label htmlFor=\"targetName\">{\"Target Name: \"}</label>\r\n        <input\r\n          id=\"targetName\"\r\n          type=\"text\"\r\n          placeholder=\"Enter Target name\"\r\n          value={name}\r\n          onChange={(e) =>\r\n            dispatch(targetUpdated({ id, changes: { name: e.target.value } }))\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"Level\">{\" Level: \"}</label>\r\n        <input\r\n          id=\"Level\"\r\n          type=\"number\"\r\n          value={level}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: {\r\n                  level: parseInt(e.target.value),\r\n                },\r\n              })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"AC\">{\" AC: \"}</label>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={useDefaultAC}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { useDefaultAC: e.target.checked } })\r\n            )\r\n          }\r\n        />\r\n        <select\r\n          value={defaultAC}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { defaultAC: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {ACOptions}\r\n        </select>\r\n        <input\r\n          id=\"AC\"\r\n          type=\"number\"\r\n          value={AC}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: {\r\n                  useDefaultAC: false,\r\n                  [defenses.AC]: parseInt(e.target.value),\r\n                },\r\n              })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"Fort\">{\" Fort: \"}</label>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={useDefaultFort}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { useDefaultFort: e.target.checked },\r\n              })\r\n            )\r\n          }\r\n        />\r\n        <select\r\n          value={defaultFort}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { defaultFort: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {SaveOptions}\r\n        </select>\r\n        <input\r\n          id=\"Fort\"\r\n          type=\"number\"\r\n          value={Fort}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { [defenses.FORT]: parseInt(e.target.value) },\r\n              })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"Ref\">{\" Ref: \"}</label>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={useDefaultRef}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { useDefaultRef: e.target.checked },\r\n              })\r\n            )\r\n          }\r\n        />\r\n        <select\r\n          value={defaultRef}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { defaultRef: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {SaveOptions}\r\n        </select>\r\n        <input\r\n          id=\"Ref\"\r\n          type=\"number\"\r\n          value={Ref}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { [defenses.REF]: parseInt(e.target.value) },\r\n              })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"Will\">{\" Will: \"}</label>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={useDefaultWill}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { useDefaultWill: e.target.checked },\r\n              })\r\n            )\r\n          }\r\n        />\r\n        <select\r\n          value={defaultWill}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { defaultWill: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {SaveOptions}\r\n        </select>\r\n        <input\r\n          id=\"Will\"\r\n          type=\"number\"\r\n          value={Will}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { [defenses.WILL]: parseInt(e.target.value) },\r\n              })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"Perception\">{\" Perception: \"}</label>\r\n        <input\r\n          type=\"checkbox\"\r\n          checked={useDefaultPer}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { useDefaultPer: e.target.checked },\r\n              })\r\n            )\r\n          }\r\n        />\r\n        <select\r\n          value={defaultPer}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { defaultPer: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {SaveOptions}\r\n        </select>\r\n        <input\r\n          id=\"Perception\"\r\n          type=\"number\"\r\n          value={Perception}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({\r\n                id,\r\n                changes: { [defenses.PER]: parseInt(e.target.value) },\r\n              })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <span className=\"input\">\r\n        <label htmlFor=\"Flatfooted\">{\" Flatfooted: \"}</label>\r\n        <input\r\n          id=\"Flatfooted\"\r\n          type=\"checkbox\"\r\n          checked={flatfooted}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              targetUpdated({ id, changes: { flatfooted: e.target.checked } })\r\n            )\r\n          }\r\n        />\r\n      </span>\r\n\r\n      <div className=\"box flexbox\">\r\n        {\" Resistance/Weakness: \"}\r\n        {weaknesses.map((weaknessId) => (\r\n          <Weakness parentId={id} id={weaknessId} key={weaknessId} />\r\n        ))}\r\n        <AddWeakness parentId={id} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// const TargetInfo = ({ id }) => {\r\n//   const { overrideDefault, type, value, weaknesses } = useSelector((state) =>\r\n//     selecttargetInfoById(state, id)\r\n//   );\r\n//   const dispatch = useDispatch();\r\n\r\n//   const defenseOptions = [];\r\n//   for (let d in defenses) {\r\n//     defenseOptions.push(<option key={d}>{defenses[d]}</option>);\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"box\">\r\n//       {\"Override Target: \"}\r\n//       <input\r\n//         type=\"checkbox\"\r\n//         checked={overrideDefault}\r\n//         onChange={(e) =>\r\n//           dispatch(\r\n//             targetInfoUpdated({\r\n//               id,\r\n//               changes: { overrideDefault: e.target.checked },\r\n//             })\r\n//           )\r\n//         }\r\n//       />\r\n\r\n// {/* <Weaknesses parentId={id} weaknessIds={weaknesses} /> */}\r\n\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// const Weaknesses = ({ parentId, weaknessIds }) => {\r\n//   return (\r\n//     <span>\r\n//       {weaknessIds.map((weaknessId) => (\r\n//         <Weakness id={weaknessId} key={weaknessId} />\r\n//       ))}\r\n//       <AddWeakness id={parentId} />\r\n//     </span>\r\n//   );\r\n// };\r\n\r\nconst Weakness = ({ id, parentId }) => {\r\n  // needs to have parent id to remove weakness\r\n  const { type, value } = useSelector((state) => selectweaknessById(state, id));\r\n  const dispatch = useDispatch();\r\n\r\n  const updateOrRemoveWeakness = (e) => {\r\n    if (e.target.value === damageTypes.NONE) {\r\n      // remove this weakness\r\n      dispatch(weaknessRemoved({ id, parentId }));\r\n    } else {\r\n      dispatch(weaknessUpdated({ id, changes: { type: e.target.value } }));\r\n    }\r\n  };\r\n  const updateWeaknessValue = (e) => {\r\n    if (!isNaN(e.target.value)) {\r\n      dispatch(\r\n        weaknessUpdated({ id, changes: { value: parseInt(e.target.value) } })\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <span className=\"input\">\r\n      <WeaknessSelect value={type} onChange={updateOrRemoveWeakness} />\r\n      <input type=\"number\" value={value} onChange={updateWeaknessValue} />\r\n    </span>\r\n  );\r\n};\r\n\r\nlet weaknessId = 0;\r\n\r\nconst AddWeakness = ({ parentId }) => {\r\n  const dispatch = useDispatch();\r\n  let [weaknessValue, setWeaknessValue] = useState(0);\r\n\r\n  // add a Weakness to TargetInfo id\r\n  const addWeakness = (e) => {\r\n    if (e.target.value !== damageTypes.NONE) {\r\n      // need to create a new weakness\r\n      weaknessId++;\r\n      dispatch(\r\n        weaknessCreated({\r\n          id: weaknessId,\r\n          type: e.target.value,\r\n          value: weaknessValue,\r\n          parentId: parentId,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <span className=\"input\">\r\n      <WeaknessSelect value={damageTypes.NONE} onChange={addWeakness} />\r\n      <input\r\n        type=\"number\"\r\n        value={weaknessValue}\r\n        onChange={(e) => setWeaknessValue(parseInt(e.target.value))}\r\n      />\r\n    </span>\r\n  );\r\n};\r\n\r\nconst WeaknessSelect = ({ value, onChange }) => {\r\n  const options = [];\r\n  for (let dt in damageTypes) {\r\n    options.push(<option key={dt}>{damageTypes[dt]}</option>);\r\n  }\r\n  for (let m in materials) {\r\n    if (materials[m] === materials.NONE) continue;\r\n    options.push(<option key={m}>{materials[m]}</option>);\r\n  }\r\n  return (\r\n    <span>\r\n      <select value={value} onChange={(e) => onChange(e)}>\r\n        {options}\r\n      </select>\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default TargetInput;\r\n","import { activityTypes, dCond, defenses, MAPvalues, materials } from \"./types\";\r\n\r\n// const diceCombinations = (number, size) => {\r\n//   if (number===0) return [1];\r\n\r\n//   const factor = 1 / (size ** number);\r\n//   const dist = [];\r\n//   for (let i=0; i<number; i++) {\r\n//     // (number choose i) * factor\r\n//   }\r\n// }\r\n\r\nexport const convolve = (vec1, vec2) => {\r\n  if (vec1.length === 0 || vec2.length === 0) {\r\n    throw new Error(\"Vectors can not be empty!\");\r\n  }\r\n  const volume = vec1;\r\n  const kernel = vec2;\r\n  let displacement = 0;\r\n  const convVec = [];\r\n\r\n  for (let i = 0; i < volume.length; i++) {\r\n    for (let j = 0; j < kernel.length; j++) {\r\n      if (displacement + j !== convVec.length) {\r\n        convVec[displacement + j] =\r\n          convVec[displacement + j] + volume[i] * kernel[j];\r\n      } else {\r\n        convVec.push(volume[i] * kernel[j]);\r\n      }\r\n    }\r\n    displacement++;\r\n  }\r\n\r\n  return convVec;\r\n};\r\n\r\nconst multiplyDist = (dam, dist, multiplier) => {\r\n  if (multiplier === 0) return [0, [1]];\r\n  if (multiplier === 1) return [dam, dist];\r\n\r\n  const newDist = [0];\r\n  let index = 0;\r\n  const newDam = Math.floor(dam * multiplier);\r\n\r\n  let i = 0;\r\n  let oldValue = newDam;\r\n  for (let chance of dist) {\r\n    let newValue = Math.floor((dam + i) * multiplier);\r\n    if (newValue === oldValue) {\r\n      // console.log(`adding ${newValue} at ${index} with ${chance}`);\r\n      newDist[index] += chance;\r\n    } else {\r\n      if (newValue > oldValue + 1) {\r\n        for (let diff = 0; diff < newValue - (oldValue + 1); diff++) {\r\n          index++;\r\n          // console.log(`adding ${newValue} at ${index} with ${0}`);\r\n          newDist[index] = 0;\r\n        }\r\n      }\r\n      index++;\r\n      // console.log(`adding ${newValue} at ${index} with ${chance}`);\r\n      newDist[index] = chance;\r\n    }\r\n    oldValue = newValue;\r\n    i++;\r\n  }\r\n\r\n  return [newDam, newDist];\r\n};\r\n\r\nexport const consolidateDists = (...dists) => {\r\n  // dists = [[{staticDamage, damageDist}, chance]]...]\r\n  // console.log(dists);\r\n  let maxDamage = 0;\r\n  for (let dist of dists) {\r\n    // console.log(`chance is ${dist[1]}`);\r\n    maxDamage = Math.max(\r\n      maxDamage,\r\n      dist[0].staticDamage + dist[0].damageDist.length\r\n    );\r\n  }\r\n  let damageDist = [];\r\n  for (let i = 0; i < maxDamage; i++) {\r\n    damageDist.push(0);\r\n    // console.log(`i is ${i}`);\r\n    for (let dist of dists) {\r\n      if (dist[0].staticDamage <= i) {\r\n        let index = i - dist[0].staticDamage;\r\n        // console.log(`val ${dist[0].damageDist[index]} at index ${index}`);\r\n        if (index < dist[0].damageDist.length)\r\n          damageDist[i] += dist[0].damageDist[index] * dist[1];\r\n      }\r\n    }\r\n  }\r\n  // console.log([staticDamage, damageDist]);\r\n  return damageDist;\r\n};\r\n\r\nconst applyMin = (staticDamage, damageDist, min) => {\r\n  // TODO: implement applyMin\r\n  while (staticDamage < min) {\r\n    if (damageDist.length >= 2) {\r\n      damageDist[1] += damageDist[0];\r\n      damageDist.shift();\r\n    }\r\n    staticDamage++;\r\n  }\r\n  return [staticDamage, damageDist];\r\n};\r\n\r\nfunction getCritSuccessPercent(bonus, DC, keen = false) {\r\n  const dif = bonus - DC;\r\n  let chance;\r\n  if (dif < -20) {\r\n    chance = 0;\r\n  } else if (dif === -20) {\r\n    chance = 5;\r\n  } else if (dif < -9) {\r\n    chance = keen ? 10 : 5;\r\n  } else if (dif < 8) {\r\n    chance = (11 + dif) * 5;\r\n  } else {\r\n    chance = 95;\r\n  }\r\n\r\n  return chance;\r\n}\r\n\r\nfunction getSuccessPercent(bonus, DC, keen = false) {\r\n  const dif = bonus - DC;\r\n  let chance;\r\n  if (dif < -29) {\r\n    chance = 0;\r\n  } else if (dif < -20) {\r\n    chance = 5;\r\n  } else if (dif === -20) {\r\n    chance = 0;\r\n  } else if (dif < -9) {\r\n    chance = (keen ? 19 : 20 + dif) * 5;\r\n  } else if (dif < -1) {\r\n    chance = 50;\r\n  } else if (dif < 9) {\r\n    chance = (8 - dif) * 5;\r\n  } else {\r\n    chance = 5;\r\n  }\r\n\r\n  return chance;\r\n}\r\n\r\nfunction getFailurePercent(bonus, DC, keen = false) {\r\n  const dif = bonus - DC;\r\n  let chance;\r\n  if (dif < -29) {\r\n    chance = 5;\r\n  } else if (dif < -20) {\r\n    chance = (29 + dif) * 5;\r\n  } else if (dif < -10) {\r\n    chance = 45;\r\n  } else if (dif < -1) {\r\n    chance = (-2 - dif) * 5;\r\n  } else if (dif < 9) {\r\n    chance = 5;\r\n  } else {\r\n    chance = 0;\r\n  }\r\n\r\n  return chance;\r\n}\r\n\r\nfunction getCritFailurePercent(bonus, DC, keen = false) {\r\n  const dif = bonus - DC;\r\n  let chance;\r\n  if (dif < -29) {\r\n    chance = 95;\r\n  } else if (dif < -10) {\r\n    chance = (-10 - dif) * 5;\r\n  } else if (dif < -1) {\r\n    chance = 5;\r\n  } else {\r\n    chance = 0;\r\n  }\r\n\r\n  return chance;\r\n}\r\n\r\nconst addDamage = (\r\n  context,\r\n  type,\r\n  material,\r\n  persistent,\r\n  staticDamage,\r\n  damageDist,\r\n  multiplier\r\n) => {\r\n  if (persistent) {\r\n    context = context.persistent;\r\n  } else {\r\n    context = context.normal;\r\n  }\r\n  [staticDamage, damageDist] = multiplyDist(\r\n    staticDamage,\r\n    damageDist,\r\n    multiplier\r\n  );\r\n  if (!(type in context)) {\r\n    context[type] = { material, staticDamage, damageDist };\r\n  } else {\r\n    context[type].staticDamage += staticDamage;\r\n    context[type].damageDist = convolve(context[type].damageDist, damageDist);\r\n    if (material !== materials.NONE) context[type].material = material;\r\n  }\r\n};\r\n\r\nfunction calculateExpectedDamage(activity, damages, target, weaknesses) {\r\n  let bonus;\r\n  let DC;\r\n  switch (activity.type) {\r\n    case activityTypes.STRIKE:\r\n      bonus = activity.value;\r\n      bonus += MAPvalues[activity.MAP];\r\n      DC = target[activity.targetType];\r\n      if (activity.targetType === defenses.AC) {\r\n        if (target.flatfooted) DC -= 2;\r\n      } else {\r\n        DC += 10;\r\n      }\r\n      break;\r\n\r\n    case activityTypes.SAVE:\r\n      bonus = target[activity.targetType];\r\n      DC = activity.value;\r\n      if (activity.targetType === defenses.AC) {\r\n        bonus -= 10;\r\n      }\r\n      break;\r\n\r\n    default:\r\n      console.log(`Activity type ${activity.type} not implemented`);\r\n  }\r\n\r\n  const critPercent = getCritSuccessPercent(bonus, DC);\r\n  const succPercent = getSuccessPercent(bonus, DC);\r\n  const failPercent = getFailurePercent(bonus, DC);\r\n  const crfaPercent = getCritFailurePercent(bonus, DC);\r\n  const chances = [\r\n    critPercent / 100,\r\n    succPercent / 100,\r\n    failPercent / 100,\r\n    crfaPercent / 100,\r\n  ];\r\n  const critDamages = { normal: {}, persistent: {} };\r\n  const succDamages = { normal: {}, persistent: {} };\r\n  const failDamages = { normal: {}, persistent: {} };\r\n  const crfaDamages = { normal: {}, persistent: {} };\r\n  const damageTrees = [critDamages, succDamages, failDamages, crfaDamages];\r\n\r\n  // go through each damage and evaluate it, put damage types together\r\n  damages.forEach((damage) => {\r\n    let {\r\n      condition,\r\n      diceNum,\r\n      diceSize,\r\n      staticDamage,\r\n      type,\r\n      material,\r\n      persistent,\r\n    } = damage;\r\n    if (!staticDamage) staticDamage = 0;\r\n\r\n    let damageDist = [1];\r\n    const diceArray = [];\r\n    for (let i = 0; i < diceSize; i++) {\r\n      diceArray.push(1 / diceSize);\r\n    }\r\n    for (let i = 0; i < diceNum; i++) {\r\n      damageDist = convolve(damageDist, diceArray);\r\n    }\r\n    staticDamage += diceNum;\r\n\r\n    switch (condition) {\r\n      case dCond.STRIKE:\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          critDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          2\r\n        );\r\n        break;\r\n\r\n      case dCond.BASIC:\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          0.5\r\n        );\r\n        addDamage(\r\n          failDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          crfaDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.CRIF:\r\n        addDamage(\r\n          crfaDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.FAIL:\r\n        addDamage(\r\n          failDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.SUCC:\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.CRIT:\r\n        addDamage(\r\n          critDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.AT_LEAST_SUCC:\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          critDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.AT_LEAST_FAIL:\r\n        addDamage(\r\n          failDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          critDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.FAIL_WORSE:\r\n        addDamage(\r\n          crfaDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          failDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      case dCond.SUCC_WORSE:\r\n        addDamage(\r\n          crfaDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          failDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n\r\n        break;\r\n\r\n      case dCond.ALWAYS:\r\n        addDamage(\r\n          crfaDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          failDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          succDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        addDamage(\r\n          critDamages,\r\n          type,\r\n          material,\r\n          persistent,\r\n          staticDamage,\r\n          damageDist,\r\n          1\r\n        );\r\n        break;\r\n\r\n      default:\r\n        console.log(\r\n          `Damage condition ${damage.condition} not implemented yet.`\r\n        );\r\n    }\r\n  });\r\n\r\n  // for each damage group\r\n  // console.log(damageTrees);\r\n  for (let damageTree of damageTrees) {\r\n    for (let damageQuality of [\"normal\", \"persistent\"]) {\r\n      let totalStaticDamage = 0;\r\n      let totalDamageDist = [1];\r\n      for (let type in damageTree[damageQuality]) {\r\n        let { material, staticDamage, damageDist } =\r\n          damageTree[damageQuality][type];\r\n        // console.log(type);\r\n        // make min damage 1 before resistances\r\n        [staticDamage, damageDist] = applyMin(staticDamage, damageDist, 1);\r\n\r\n        // find max weakness and resistance, weaknesses are negative numbers\r\n        let maxW = 0;\r\n        let maxR = 0;\r\n        weaknesses.forEach((weakness) => {\r\n          if (weakness.type === type || weakness.type === material) {\r\n            if (weakness.value < 0) {\r\n              maxW = Math.min(maxW, weakness.value);\r\n            } else if (weakness.value > 0) {\r\n              maxR = Math.max(maxR, weakness.value);\r\n            }\r\n          }\r\n        });\r\n        staticDamage = staticDamage - (maxR + maxW);\r\n\r\n        // make min damage 0 after resistances\r\n        [staticDamage, damageDist] = applyMin(staticDamage, damageDist, 0);\r\n\r\n        // console.log([staticDamage, damageDist]);\r\n\r\n        // damageTree[damageQuality][type].staticDamage = staticDamage;\r\n        // damageTree[damageQuality][type].damageDist = damageDist;\r\n        totalStaticDamage += staticDamage;\r\n        totalDamageDist = convolve(totalDamageDist, damageDist);\r\n      }\r\n      damageTree[damageQuality].staticDamage = totalStaticDamage;\r\n      damageTree[damageQuality].damageDist = totalDamageDist;\r\n    }\r\n  }\r\n\r\n  return [damageTrees, chances];\r\n}\r\n\r\nexport {\r\n  //   totalBonusDescription,\r\n  //   attackBonusDescription,\r\n  //   totalDamageDescription,\r\n  calculateExpectedDamage,\r\n};\r\n","import { createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport { damageTypes, dCond, materials } from \"../types\";\r\n\r\nexport const damageAdapter = createEntityAdapter();\r\n\r\n// damageAdded({\r\n//   id: 0,\r\n//   condition: dCond.STRIKE,\r\n//   diceNum: 1,\r\n//   diceSize: 8,\r\n//   staticDamage: 6,\r\n//   type: damageTypes.PIERCE,\r\n//   material: materials.COLD_IRON,\r\n// });\r\n\r\nlet damageId = 1;\r\nexport const damagesSlice = createSlice({\r\n  name: \"damages\",\r\n  initialState: damageAdapter.getInitialState(),\r\n  reducers: {\r\n    damageAdded: damageAdapter.addOne,\r\n    damageUpdated: damageAdapter.updateOne,\r\n    damageCreated: {\r\n      reducer: (state, action) => {\r\n        const {\r\n          id,\r\n          condition,\r\n          diceNum,\r\n          diceSize,\r\n          staticDamage,\r\n          type,\r\n          material,\r\n          persistent,\r\n        } = action.payload;\r\n        damageAdapter.addOne(state, {\r\n          id,\r\n          condition,\r\n          diceNum,\r\n          diceSize,\r\n          staticDamage,\r\n          type,\r\n          material,\r\n          persistent,\r\n        });\r\n      },\r\n      prepare: ({ parentId }) => {\r\n        const id = ++damageId;\r\n        return {\r\n          payload: {\r\n            id,\r\n            parentId,\r\n            condition: dCond.STRIKE,\r\n            diceNum: 0,\r\n            diceSize: 8,\r\n            staticDamage: 0,\r\n            type: damageTypes.B,\r\n            material: materials.NONE,\r\n            persistent: false,\r\n          },\r\n        };\r\n      },\r\n    },\r\n    damageRemoved: (state, action) => {\r\n      console.log(action);\r\n      damageAdapter.removeOne(state, action.payload.id);\r\n    },\r\n  },\r\n});\r\n\r\nexport const { damageRemoved, damageCreated, damageAdded, damageUpdated } =\r\n  damagesSlice.actions;\r\n\r\nexport default damagesSlice.reducer;\r\n\r\nexport const {\r\n  selectById: selectdamageById,\r\n  selectIds: selectdamageIds,\r\n  selectEntities: selectdamageEntities,\r\n  selectAll: selectAlldamages,\r\n  selectTotal: selectTotaldamages,\r\n} = damageAdapter.getSelectors((state) => state.damages);\r\n","import { createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport { activityTypes, conditions, defenses, MAPs } from \"../types\";\r\nimport { damageCreated, damageRemoved } from \"./damageSlice\";\r\n\r\nexport const activityPathAdapter = createEntityAdapter();\r\n\r\nlet activityPathId = 1;\r\nexport const activityPathsSlice = createSlice({\r\n  name: \"activityPaths\",\r\n  initialState: activityPathAdapter.getInitialState(),\r\n  reducers: {\r\n    activityPathAdded: activityPathAdapter.addOne,\r\n    activityPathUpdated: activityPathAdapter.updateOne,\r\n    activityPathCreated: {\r\n      reducer: (state, action) => {\r\n        const {\r\n          id,\r\n          parentId,\r\n          condition,\r\n          type,\r\n          targetType,\r\n          targetInfoId,\r\n          value,\r\n          MAP,\r\n          damages,\r\n          effects,\r\n          apIds,\r\n        } = action.payload;\r\n        activityPathAdapter.addOne(state, {\r\n          id,\r\n          condition,\r\n          type,\r\n          targetType,\r\n          targetInfoId,\r\n          value,\r\n          MAP,\r\n          damages,\r\n          effects,\r\n          apIds,\r\n        });\r\n        // console.log(parentId);\r\n        if (parentId !== undefined) state.entities[parentId].apIds.push(id);\r\n      },\r\n      prepare: ({ parentId, routineId }) => {\r\n        const id = ++activityPathId;\r\n        return {\r\n          payload: {\r\n            id,\r\n            parentId,\r\n            routineId,\r\n            condition: conditions.ALWAYS,\r\n            type: activityTypes.STRIKE,\r\n            targetType: defenses.AC,\r\n            targetInfoId: 0,\r\n            value: 9,\r\n            MAP: MAPs.A1,\r\n            damages: [],\r\n            effects: [],\r\n            apIds: [],\r\n          },\r\n        };\r\n      },\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(damageCreated, (state, action) => {\r\n        const { parentId: id, id: damageId } = action.payload;\r\n        state.entities[id].damages.push(damageId);\r\n      })\r\n      .addCase(damageRemoved, (state, action) => {\r\n        const { parentId: id, id: damageId } = action.payload;\r\n        state.entities[id].damages = state.entities[id].damages.filter(\r\n          (did) => did !== damageId\r\n        );\r\n      });\r\n  },\r\n});\r\n\r\nexport const { activityPathCreated, activityPathAdded, activityPathUpdated } =\r\n  activityPathsSlice.actions;\r\n\r\nexport default activityPathsSlice.reducer;\r\n\r\nexport const {\r\n  selectById: selectactivityPathById,\r\n  selectIds: selectactivityPathIds,\r\n  selectEntities: selectactivityPathEntities,\r\n  selectAll: selectAllactivityPaths,\r\n  selectTotal: selectTotalactivityPaths,\r\n} = activityPathAdapter.getSelectors((state) => state.activityPaths);\r\n","import { createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport { activityPathCreated } from \"./activityPathSlice\";\r\n\r\nexport const routinesAdapter = createEntityAdapter();\r\n\r\nlet routineId = 1;\r\nexport const routinesSlice = createSlice({\r\n  name: \"routines\",\r\n  initialState: routinesAdapter.getInitialState({ selectedRoutine: 0 }),\r\n  reducers: {\r\n    setRoutine: (state, action) => {\r\n      state.selectedRoutine = action.payload || 0;\r\n    },\r\n    routineAdded: routinesAdapter.addOne,\r\n    routineUpdated: routinesAdapter.updateOne,\r\n    routineCreated: {\r\n      reducer: (state, action) => {\r\n        const { id, name, apIds } = action.payload;\r\n        state.selectedRoutine = id;\r\n        routinesAdapter.addOne(state, { id, name, apIds });\r\n      },\r\n      prepare: () => {\r\n        const id = ++routineId;\r\n        return { payload: { id, name: \"New Routine\", apIds: [] } };\r\n      },\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(activityPathCreated, (state, action) => {\r\n      const { routineId: id, id: apId } = action.payload;\r\n      if (id !== undefined) state.entities[id].apIds.push(apId);\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  routineCreated,\r\n  setRoutine,\r\n  updateSelected,\r\n  routineAdded,\r\n  routineUpdated,\r\n} = routinesSlice.actions;\r\n\r\nexport default routinesSlice.reducer;\r\n\r\nexport const {\r\n  selectById: selectRoutineById,\r\n  selectIds: selectRoutineIds,\r\n  selectEntities: selectRoutineEntities,\r\n  selectAll: selectAllRoutines,\r\n  selectTotal: selectTotalRoutines,\r\n} = routinesAdapter.getSelectors((state) => state.routines);\r\n\r\nexport const selectSelectedRoutine = (state) => state.routines.selectedRoutine;\r\n","import React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  calculateExpectedDamage,\r\n  convolve,\r\n  consolidateDists,\r\n} from \"./Calculation\";\r\nimport { selectactivityPathEntities } from \"./Routine/activityPathSlice\";\r\nimport { selectdamageEntities } from \"./Routine/damageSlice\";\r\nimport { selectRoutineEntities } from \"./Routine/routineSlice\";\r\nimport { selecttargetEntities } from \"./Target/targetSlice\";\r\nimport { selectweaknessEntities } from \"./Target/weaknessSlice\";\r\nimport { conditions } from \"./types\";\r\nimport { Bar } from \"react-chartjs-2\";\r\n\r\nconst Display = () => {\r\n  const [addPersistent, setAddPersistent] = useState(false);\r\n  const [perMulti, setPerMulti] = useState(2);\r\n\r\n  const routines = useSelector(selectRoutineEntities);\r\n  const activityPaths = useSelector(selectactivityPathEntities);\r\n  const targets = useSelector(selecttargetEntities);\r\n  const damages = useSelector(selectdamageEntities);\r\n  const weaknesses = useSelector(selectweaknessEntities);\r\n\r\n  // const selectedRoutine = routines[useSelector(selectSelectedRoutine)];\r\n\r\n  function evaluateActivityPath(activityPath) {\r\n    let currentTarget = targets[0];\r\n    let currentDamages = activityPath.damages.map(\r\n      (damageId) => damages[damageId]\r\n    );\r\n    let currentWeaknesses = currentTarget.weaknesses.map(\r\n      (weaknessId) => weaknesses[weaknessId]\r\n    );\r\n\r\n    // damage tress = [critDamages, succDamages, failDamages, crfaDamages]\r\n    // critDamages = {normal, persistent}\r\n    // normal = {fire..., staticDamage, damageDist}\r\n    let [damageTrees, chances] = calculateExpectedDamage(\r\n      activityPath,\r\n      currentDamages,\r\n      currentTarget,\r\n      currentWeaknesses\r\n    );\r\n    // console.log(`chances are ${chances}`);\r\n\r\n    // go through each activity path, depending on its condition add its damage distributions to this activities appropriately\r\n    activityPath.apIds.forEach((apId) => {\r\n      let ap = activityPaths[apId];\r\n      let [pathDist, pathPDist] = evaluateActivityPath(ap);\r\n\r\n      let indicies = [];\r\n      // console.log(`cond is: ${ap.condition}`);\r\n      switch (ap.condition) {\r\n        case conditions.ALWAYS:\r\n          indicies = [0, 1, 2, 3];\r\n          break;\r\n\r\n        case conditions.AT_LEAST_FAIL:\r\n          indicies = [0, 1, 2];\r\n          break;\r\n\r\n        case conditions.AT_LEAST_SUCC:\r\n          indicies = [0, 1];\r\n          break;\r\n\r\n        case conditions.CRIF:\r\n          indicies = [3];\r\n          break;\r\n\r\n        case conditions.CRIT:\r\n          indicies = [0];\r\n          break;\r\n\r\n        case conditions.FAIL:\r\n          indicies = [2];\r\n          break;\r\n\r\n        case conditions.FAIL_WORSE:\r\n          indicies = [2, 3];\r\n          break;\r\n\r\n        case conditions.SUCC:\r\n          indicies = [1];\r\n          break;\r\n\r\n        case conditions.SUCC_WORSE:\r\n          indicies = [1, 2, 3];\r\n          break;\r\n\r\n        default:\r\n      }\r\n      // console.log(`indies are: ${indicies}`);\r\n      for (let index of indicies) {\r\n        // console.log(\r\n        //   `adding damage to index ${index} w/ chance ${chances[index]}`\r\n        // );\r\n        // damageTrees[index].normal.staticDamage += pathSD;\r\n        damageTrees[index].normal.damageDist = convolve(\r\n          damageTrees[index].normal.damageDist,\r\n          pathDist\r\n        );\r\n        // damageTrees[index].persistent.staticDamage += pathPSD;\r\n        damageTrees[index].persistent.damageDist = convolve(\r\n          damageTrees[index].persistent.damageDist,\r\n          pathPDist\r\n        );\r\n      }\r\n      // console.log(pathChance);\r\n    });\r\n\r\n    let damageDist = consolidateDists(\r\n      [damageTrees[0].normal, chances[0]],\r\n      [damageTrees[1].normal, chances[1]],\r\n      [damageTrees[2].normal, chances[2]],\r\n      [damageTrees[3].normal, chances[3]]\r\n    );\r\n    let PdamageDist = consolidateDists(\r\n      [damageTrees[0].persistent, chances[0]],\r\n      [damageTrees[1].persistent, chances[1]],\r\n      [damageTrees[2].persistent, chances[2]],\r\n      [damageTrees[3].persistent, chances[3]]\r\n    );\r\n\r\n    return [damageDist, PdamageDist];\r\n  }\r\n\r\n  let maxDamage = 0;\r\n  let maxPDamage = 0;\r\n  const datasets = [];\r\n  const expectedDamages = [];\r\n  const expectedPersistentDamages = [];\r\n  // TODO: use distribution\r\n  for (let id in routines) {\r\n    let routine = routines[id];\r\n    let expD = 0;\r\n    let expP = 0;\r\n    let routineDDist = [1];\r\n    let routinePDDist = [1];\r\n    for (let i = 0; i < routine.apIds.length; i++) {\r\n      let activityPath = activityPaths[routine.apIds[i]];\r\n      let [damageDist, PdamageDist] = evaluateActivityPath(activityPath);\r\n      routineDDist = convolve(routineDDist, damageDist);\r\n      routinePDDist = convolve(routinePDDist, PdamageDist);\r\n    }\r\n    maxDamage = Math.max(maxDamage, routineDDist.length - 1);\r\n    maxPDamage = Math.max(maxPDamage, routinePDDist.length - 1);\r\n    const dataArray = [];\r\n    for (let i = 0; i < routineDDist.length; i++) {\r\n      dataArray.push({ x: i, y: routineDDist[i] });\r\n      expD += routineDDist[i] * i;\r\n    }\r\n    datasets.push({\r\n      fill: \"origin\",\r\n      label: routine.name,\r\n      data: dataArray,\r\n      xAxisID: \"damage\",\r\n      yAxisID: \"chance\",\r\n      spanGaps: false,\r\n    });\r\n    // }\r\n    // maxDamage += damageDist.length-1;\r\n\r\n    // routine.apIds.forEach((apId) => {\r\n    //   let activityPath = activityPaths[apId];\r\n    //   let [damageDist, PdamageDist] = evaluateActivityPath(activityPath);\r\n    //   maxDamage = Math.max(maxDamage, damageDist.length);\r\n\r\n    //   const dataArray = [];\r\n    //   const labels = [];\r\n    //   for (let i = 0; i < damageDist.length; i++) {\r\n\r\n    //     labels.push(i);\r\n    //     dataArray.push({ x: i, y: damageDist[i] });\r\n    //   }\r\n    //   const data = {\r\n    //     labels,\r\n    //     datasets: [\r\n    //       {\r\n    //         fill: \"origin\",\r\n    //         label: \"Chance\",\r\n    //         data: dataArray,\r\n    //         xAxisID: \"damage\",\r\n    //         yAxisID: \"chance\",\r\n    //         spanGaps: false,\r\n    //       },\r\n    //     ],\r\n    //   };\r\n\r\n    //   // expectedDamages.push(\r\n    //   //   <Bar key={routine.id} data={data} />\r\n    //   //   // <p key={routine.id}>\r\n    //   //   //   {routine.name}\r\n    //   //   //   {\": \"}\r\n    //   //   //   {addPersistent ? expD + expP * perMulti : expD}\r\n    //   //   // </p>\r\n    //   // );\r\n    // });\r\n\r\n    expectedDamages.push(\r\n      <div key={routine.id}>\r\n        {routine.name}\r\n        {\": \"}\r\n        {expD}\r\n      </div>\r\n    );\r\n    // expectedDamages.push(\r\n    //   <Bar key={routine.id} data={data} />\r\n    //   // <p key={routine.id}>\r\n    //   //   {routine.name}\r\n    //   //   {\": \"}\r\n    //   //   {addPersistent ? expD + expP * perMulti : expD}\r\n    //   // </p>\r\n    // );\r\n    expectedPersistentDamages.push(\r\n      <div key={routine.id}>\r\n        {routine.name}\r\n        {\": \"}\r\n        {expP}\r\n      </div>\r\n    );\r\n  }\r\n  const labels = [];\r\n  for (let i = 0; i <= maxDamage; i++) {\r\n    labels.push(i);\r\n  }\r\n  const data = {\r\n    labels,\r\n    datasets,\r\n  };\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      Add persistent damage:\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={addPersistent}\r\n        onChange={(e) => setAddPersistent(e.target.checked)}\r\n      />\r\n      , persistent damage multiplier:\r\n      <input\r\n        type=\"number\"\r\n        value={perMulti ? perMulti : 0}\r\n        onChange={(e) => setPerMulti(e.target.valueAsNumber)}\r\n      />\r\n      <div>\r\n        Expected Damage:\r\n        {expectedDamages}\r\n      </div>\r\n      <Bar data={data} />\r\n      {addPersistent ? (\r\n        \"\"\r\n      ) : (\r\n        <div>\r\n          Expected Persistent Damage:\r\n          {expectedPersistentDamages}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Display;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  activityTypes,\r\n  conditions,\r\n  damageTypes,\r\n  dCond,\r\n  defenses,\r\n  diceNums,\r\n  diceSizes,\r\n  MAPs,\r\n  materials,\r\n} from \"../types\";\r\nimport {\r\n  activityPathCreated,\r\n  activityPathUpdated,\r\n  selectactivityPathById,\r\n} from \"./activityPathSlice\";\r\n\r\nimport {\r\n  damageCreated,\r\n  damageRemoved,\r\n  damageUpdated,\r\n  selectdamageById,\r\n} from \"./damageSlice\";\r\nimport {\r\n  routineUpdated,\r\n  selectRoutineById,\r\n  selectSelectedRoutine,\r\n} from \"./routineSlice\";\r\n\r\nfunction SelectedRoutine() {\r\n  const selectedRoutine = useSelector(selectSelectedRoutine);\r\n  const apIds = useSelector((state) =>\r\n    selectRoutineById(state, selectedRoutine)\r\n  ).apIds;\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"selectedRoutine\">\r\n      <NameInput id={selectedRoutine} />\r\n      {apIds.map((apId) => (\r\n        <ActivityPath id={apId} key={apId} />\r\n      ))}\r\n      <button\r\n        className=\"add\"\r\n        onClick={() =>\r\n          dispatch(activityPathCreated({ routineId: selectedRoutine }))\r\n        }\r\n      >\r\n        +\r\n      </button>\r\n      {/* <EffectInput /> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst NameInput = ({ id }) => {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector((state) => selectRoutineById(state, id)).name;\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      <label htmlFor=\"routineName\">Routine Name:</label>\r\n      <input\r\n        id=\"routineName\"\r\n        type=\"text\"\r\n        placeholder=\"Enter routine name\"\r\n        value={name}\r\n        onChange={(e) =>\r\n          dispatch(routineUpdated({ id, changes: { name: e.target.value } }))\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ActivityPath = ({ id }) => {\r\n  const { condition, type, targetType, value, MAP, damages, effects, apIds } =\r\n    useSelector((state) => selectactivityPathById(state, id));\r\n  const dispatch = useDispatch();\r\n\r\n  const conditionOptions = [];\r\n  for (let c in conditions) {\r\n    conditionOptions.push(<option key={c}>{conditions[c]}</option>);\r\n  }\r\n  const activityTypeOptions = [];\r\n  for (let at in activityTypes) {\r\n    activityTypeOptions.push(<option key={at}>{activityTypes[at]}</option>);\r\n  }\r\n  const MAPOptions = [];\r\n  for (let m in MAPs) {\r\n    MAPOptions.push(<option key={m}>{MAPs[m]}</option>);\r\n  }\r\n  const defenseOptions = [];\r\n  for (let d in defenses) {\r\n    defenseOptions.push(<option key={d}>{defenses[d]}</option>);\r\n  }\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      {condition ? (\r\n        <div>\r\n          Condition:\r\n          <select\r\n            value={condition}\r\n            onChange={(e) =>\r\n              dispatch(\r\n                activityPathUpdated({\r\n                  id,\r\n                  changes: { condition: e.target.value },\r\n                })\r\n              )\r\n            }\r\n          >\r\n            {conditionOptions}\r\n          </select>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n      <div className=\"box\">\r\n        <select\r\n          value={type}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              activityPathUpdated({ id, changes: { type: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {activityTypeOptions}\r\n        </select>\r\n        {type === activityTypes.STRIKE ? \" +\" : \" DC: \"}\r\n        <input\r\n          type=\"number\"\r\n          value={value ? value : 0}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              activityPathUpdated({\r\n                id,\r\n                changes: { value: parseInt(e.target.value) },\r\n              })\r\n            )\r\n          }\r\n        />\r\n        {\" MAP: \"}\r\n        <select\r\n          value={MAP}\r\n          onChange={(e) =>\r\n            dispatch(\r\n              activityPathUpdated({ id, changes: { MAP: e.target.value } })\r\n            )\r\n          }\r\n        >\r\n          {MAPOptions}\r\n        </select>\r\n\r\n        {\" VS: \"}\r\n        <select\r\n          value={targetType}\r\n          onChange={(e) => {\r\n            dispatch(\r\n              activityPathUpdated({\r\n                id,\r\n                changes: { targetType: e.target.value },\r\n              })\r\n            );\r\n          }}\r\n        >\r\n          {defenseOptions}\r\n        </select>\r\n\r\n        <div className=\"box\">\r\n          {\"Damage: \"}\r\n          {damages.map((damageId) => (\r\n            <Damage parentId={id} id={damageId} key={damageId} />\r\n          ))}\r\n          <button\r\n            className=\"add\"\r\n            onClick={() => dispatch(damageCreated({ parentId: id }))}\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n        <div className=\"box\">Effects: {effects}</div>\r\n      </div>\r\n\r\n      <div className=\"box\">\r\n        {apIds.map((apId) => (\r\n          <ActivityPath id={apId} key={apId} />\r\n        ))}\r\n        <button\r\n          className=\"add\"\r\n          onClick={() => dispatch(activityPathCreated({ parentId: id }))}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Damage = ({ parentId, id }) => {\r\n  const {\r\n    condition,\r\n    diceNum,\r\n    diceSize,\r\n    staticDamage,\r\n    type,\r\n    material,\r\n    persistent,\r\n  } = useSelector((state) => selectdamageById(state, id));\r\n  const dispatch = useDispatch();\r\n\r\n  const conditionOptions = [];\r\n  for (let dc in dCond) {\r\n    conditionOptions.push(<option key={dc}>{dCond[dc]}</option>);\r\n  }\r\n  const diceNumOptions = [];\r\n  for (let dn in diceNums) {\r\n    diceNumOptions.push(<option key={dn}>{dn}</option>);\r\n  }\r\n  const diceSizeOptions = [];\r\n  for (let ds in diceSizes) {\r\n    diceSizeOptions.push(<option key={ds}>{ds}</option>);\r\n  }\r\n  const damageTypeOptions = [];\r\n  for (let dt in damageTypes) {\r\n    damageTypeOptions.push(<option key={dt}>{damageTypes[dt]}</option>);\r\n  }\r\n  const materialOptions = [];\r\n  for (let m in materials) {\r\n    materialOptions.push(<option key={m}>{materials[m]}</option>);\r\n  }\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      <button\r\n        className=\"delete\"\r\n        onClick={(e) => {\r\n          dispatch(damageRemoved({ id, parentId }));\r\n        }}\r\n      >\r\n        -\r\n      </button>\r\n      <select\r\n        value={condition}\r\n        onChange={(e) =>\r\n          dispatch(\r\n            damageUpdated({ id, changes: { condition: e.target.value } })\r\n          )\r\n        }\r\n      >\r\n        {conditionOptions}\r\n      </select>\r\n      <select\r\n        value={diceNum}\r\n        onChange={(e) =>\r\n          dispatch(\r\n            damageUpdated({\r\n              id,\r\n              changes: { diceNum: parseInt(e.target.value) },\r\n            })\r\n          )\r\n        }\r\n      >\r\n        {diceNumOptions}\r\n      </select>\r\n      d\r\n      <select\r\n        value={diceSize}\r\n        onChange={(e) =>\r\n          dispatch(\r\n            damageUpdated({\r\n              id,\r\n              changes: { diceSize: parseInt(e.target.value) },\r\n            })\r\n          )\r\n        }\r\n      >\r\n        {diceSizeOptions}\r\n      </select>\r\n      {\" + \"}\r\n      <input\r\n        type=\"number\"\r\n        value={staticDamage}\r\n        onChange={(e) =>\r\n          dispatch(\r\n            damageUpdated({\r\n              id,\r\n              changes: { staticDamage: parseInt(e.target.value) },\r\n            })\r\n          )\r\n        }\r\n      />\r\n      <select\r\n        value={type}\r\n        onChange={(e) => {\r\n          dispatch(damageUpdated({ id, changes: { type: e.target.value } }));\r\n        }}\r\n      >\r\n        {damageTypeOptions}\r\n      </select>\r\n      <select\r\n        value={material}\r\n        onChange={(e) => {\r\n          dispatch(\r\n            damageUpdated({ id, changes: { material: e.target.value } })\r\n          );\r\n        }}\r\n      >\r\n        {materialOptions}\r\n      </select>\r\n      {\" Persistent: \"}\r\n      <input\r\n        type=\"checkbox\"\r\n        checked={persistent}\r\n        onChange={(e) =>\r\n          dispatch(\r\n            damageUpdated({\r\n              id,\r\n              changes: { persistent: e.target.checked },\r\n            })\r\n          )\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectedRoutine;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  routineCreated,\r\n  selectAllRoutines,\r\n  selectSelectedRoutine,\r\n  setRoutine,\r\n} from \"./Routine/routineSlice\";\r\n\r\nconst Routines = () => {\r\n  const routines = useSelector(selectAllRoutines);\r\n  const selectedRoutine = useSelector(selectSelectedRoutine);\r\n  const dispatch = useDispatch();\r\n\r\n  const routineOptions = [];\r\n  routines.forEach((routine) => {\r\n    routineOptions.push(\r\n      <option value={routine.id} key={routine.id}>\r\n        {routine.name}\r\n      </option>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      Selected Routine:\r\n      <select\r\n        value={selectedRoutine}\r\n        onChange={(e) => dispatch(setRoutine(e.target.value))}\r\n      >\r\n        {routineOptions}\r\n      </select>\r\n      <button className=\"add\" onClick={() => dispatch(routineCreated())}>\r\n        +\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Routines;\r\n","import React from \"react\";\r\n// import { useSelector } from \"react-redux\";\r\n\r\nconst ImportExport = () => {\r\n  return <div className=\"box\">Import and Export Here</div>;\r\n};\r\n\r\nexport default ImportExport;\r\n","import React from \"react\";\r\n// import { useSelector } from \"react-redux\";\r\n// import update from \"immutability-helper\";\r\n\r\n// //import { useSelector, useDispatch } from 'react-redux';\r\n// import { selectCurrentEffect } from \"./Effect/effectSlice\";\r\n\r\n// import {\r\n//   CheckboxInput,\r\n//   CollapsableInput,\r\n//   ByLevelInput,\r\n// } from \"./Effect/Inputs/CommonInputs.js\";\r\n\r\n// import MAP from \"./Effect/Model/MAP.js\";\r\n// import Proficiency from \"./Effect/Model/Proficiency.js\";\r\n// import AbilityScore from \"./Effect/Model/AbilityScore.js\";\r\n// import Modifier from \"./Effect/Model/Modifier.js\";\r\n// import AdditionalEffectArray from \"./Effect/Model/AdditionalEffectArray.js\";\r\n\r\n// import {\r\n//   totalBonusDescription,\r\n//   attackBonusDescription,\r\n//   totalDamageDescription,\r\n//   calculateExpectedDamage,\r\n// } from \"./Calculation.js\";\r\n\r\nimport TargetInput from \"./Target/TargetInput\";\r\nimport Display from \"./Display\";\r\n// import { selectTarget, selectLevel } from \"./Target/targetSlice\";\r\n\r\nimport SelectedRoutine from \"./Routine/SelectedRoutine\";\r\nimport Routines from \"./Routines\";\r\nimport Export from \"./Export\";\r\n\r\nimport \"./PF2App.css\";\r\n\r\n// function DisplayOutput(props) {\r\n//   // props: effect, target\r\n//   const target = useSelector(selectTarget);\r\n//   const effect = useSelector(selectCurrentEffect);\r\n//   return (\r\n//     <div className=\"Display\">\r\n//       <CollapsableInput\r\n//         description={\r\n//           \"Expected Damage: \" + calculateExpectedDamage(effect, target)\r\n//         }\r\n//         listInput=\"\"\r\n//       />\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nfunction PF2App(props) {\r\n  return (\r\n    <div className=\"PF2App\">\r\n      <TargetInput id={0} />\r\n      <Display />\r\n      <SelectedRoutine />\r\n      <Routines />\r\n      <Export />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PF2App;\r\n","import { createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const effectAdapter = createEntityAdapter();\r\n\r\nexport const effectsSlice = createSlice({\r\n  name: \"effects\",\r\n  initialState: effectAdapter.getInitialState(),\r\n  reducers: {\r\n    effectAdded: effectAdapter.addOne,\r\n    effectUpdated: effectAdapter.updateOne,\r\n  },\r\n});\r\n\r\nexport const { effectAdded, effectUpdated } = effectsSlice.actions;\r\n\r\nexport default effectsSlice.reducer;\r\n\r\nexport const {\r\n  selectById: selecteffectById,\r\n  selectIds: selecteffectIds,\r\n  selectEntities: selecteffectEntities,\r\n  selectAll: selectAlleffects,\r\n  selectTotal: selectTotaleffects,\r\n} = effectAdapter.getSelectors((state) => state.effects);\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport routineReducer, { routineAdded } from \"./Routine/routineSlice\";\r\nimport activityPathReducer, {\r\n  activityPathAdded,\r\n} from \"./Routine/activityPathSlice\";\r\nimport damageReducer, { damageAdded } from \"./Routine/damageSlice\";\r\nimport effectReducer from \"./Routine/effectSlice\";\r\nimport targetReducer, { targetAdded } from \"./Target/targetSlice\";\r\nimport weaknessReducer, { weaknessAdded } from \"./Target/weaknessSlice\";\r\nimport {\r\n  activityTypes,\r\n  conditions,\r\n  damageTypes,\r\n  dCond,\r\n  defaultValuesAC,\r\n  defaultValuesSaves,\r\n  defenses,\r\n  MAPs,\r\n  materials,\r\n} from \"./types\";\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    routines: routineReducer,\r\n    activityPaths: activityPathReducer,\r\n    damages: damageReducer,\r\n    effects: effectReducer,\r\n    weaknesses: weaknessReducer,\r\n    targets: targetReducer,\r\n  },\r\n});\r\n\r\nstore.dispatch(routineAdded({ id: 0, name: \"tesdt\", apIds: [0] }));\r\n\r\nstore.dispatch(\r\n  activityPathAdded({\r\n    id: 0,\r\n    condition: conditions.ALWAYS,\r\n    type: activityTypes.STRIKE,\r\n    targetType: defenses.AC,\r\n    targetInfoId: 0,\r\n    value: 9,\r\n    MAP: MAPs.A1,\r\n    damages: [0],\r\n    effects: [],\r\n    apIds: [],\r\n  })\r\n);\r\n\r\nstore.dispatch(\r\n  targetAdded({\r\n    id: 0,\r\n    name: \"Custom Target\",\r\n    overrideDefault: true,\r\n    addMods: false,\r\n    level: 1,\r\n    useDefaultAC: false,\r\n    defaultAC: defaultValuesAC.HIGH,\r\n    [defenses.AC]: 15,\r\n    useDefaultFort: false,\r\n    defaultFort: defaultValuesSaves.HIGH,\r\n    [defenses.FORT]: 6,\r\n    useDefaultRef: false,\r\n    defaultRef: defaultValuesSaves.HIGH,\r\n    [defenses.REF]: 5,\r\n    useDefaultWill: false,\r\n    defaultWill: defaultValuesSaves.HIGH,\r\n    [defenses.WILL]: 4,\r\n    useDefaultPer: false,\r\n    defaultPer: defaultValuesSaves.HIGH,\r\n    [defenses.PER]: 5,\r\n    flatfooted: false,\r\n    weaknesses: [0],\r\n  })\r\n);\r\nstore.dispatch(weaknessAdded({ id: 0, type: damageTypes.FIRE, value: 10 }));\r\nstore.dispatch(\r\n  damageAdded({\r\n    id: 0,\r\n    condition: dCond.STRIKE,\r\n    diceNum: 1,\r\n    diceSize: 8,\r\n    staticDamage: 4,\r\n    type: damageTypes.B,\r\n    material: materials.COLD_IRON,\r\n    persistent: false,\r\n  })\r\n);\r\n// store.dispatch(\r\n//   damageAdded({\r\n//     id: 1,\r\n//     condition: dCond.CRIT,\r\n//     diceNum: 0,\r\n//     diceSize: 8,\r\n//     staticDamage: 10,\r\n//     type: damageTypes.FIRE,\r\n//     material: materials.NONE,\r\n//     persistent: false,\r\n//   })\r\n// );\r\n\r\nexport default store;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport PF2App from './PF2App';\r\nimport store from './store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PF2App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}