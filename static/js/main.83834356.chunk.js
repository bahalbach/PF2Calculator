(this.webpackJsonppf2=this.webpackJsonppf2||[]).push([[0],{189:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);for(var n,r,c,i,l,u,s,d,o=a(0),m=a.n(o),p=a(29),v=a.n(p),f=(a(78),a(7)),g=a(1),E=a(5),b=a(6),h=a(12),A={STRIKE:"Strike",SAVE:"Save"},C={FIGHTER:"Fighter Melee",MARTIAL:"Martial Melee",CASTER:"Caster(16str) Melee",ALCH:"Alchemist(16str) Melee",FIGHTERR:"Fighter Ranged",MARTIALR:"Martial Ranged",CASTERR:"Caster(16dex) Ranged",ALCHR:"Alchemist(16dex) Ranged",CASTERC:"Caster Cantrip",CASTERS:"Caster Save"},R={LOW:"Low",MODERATE:"Moderate",HIGH:"High",EXTREME:"Extreme"},O={TERRIBLE:"Terrible",LOW:"Low",MODERATE:"Moderate",HIGH:"High",EXTREME:"Extreme"},I={AC:"AC",FORT:"Fort",REF:"Ref",WILL:"Will",PER:"Perception"},T={N1:"0 (0x-5)",N2:"-5 (1x-5)",N3:"-10 (2x-5)",A1:"0 (0x-4)",A2:"-4 (1x-4)",A3:"-8 (2x-4)",R1:"0 (0x-3)",R2:"-3 (1x-3)",R3:"-6 (2x-3)",RA1:"0 (0x-2)",RA2:"-2 (1x-2)",RA3:"-4 (2x-2)",RAA1:"0 (0x-1)",RAA2:"-1 (1x-1)",RAA3:"-2 (2x-1)"},y={"0 (0x-5)":"-5 (1x-5)","-5 (1x-5)":"-10 (2x-5)","-10 (2x-5)":"-10 (2x-5)","0 (0x-4)":"-4 (1x-4)","-4 (1x-4)":"-8 (2x-4)","-8 (2x-4)":"-8 (2x-4)","0 (0x-3)":"-3 (1x-3)","-3 (1x-3)":"-6 (2x-3)","-6 (2x-3)":"-6 (2x-3)","0 (0x-2)":"-2 (1x-2)","-2 (1x-2)":"-4 (2x-2)","-4 (2x-2)":"-4 (2x-2)","0 (0x-1)":"-1 (1x-1)","-1 (1x-1)":"-2 (2x-1)","-2 (2x-1)":"-2 (2x-1)"},S={"0 (0x-5)":0,"-5 (1x-5)":-5,"-10 (2x-5)":-10,"0 (0x-4)":0,"-4 (1x-4)":-4,"-8 (2x-4)":-8,"0 (0x-3)":0,"-3 (1x-3)":-3,"-6 (2x-3)":-6,"0 (0x-2)":0,"-2 (1x-2)":-2,"-4 (2x-2)":-4,"0 (0x-1)":0,"-1 (1x-1)":-1,"-2 (2x-1)":-2},j={NONE:"None",B:"bludgeoning",P:"piercing",S:"slashing",FIRE:"fire"},x={NONE:"none",COLD_IRON:"cold iron",SILVER:"silver",ADAMANTINE:"adamantine"},k={ALWAYS:"Always",CRIT:"On Crit",SUCC:"On Success",FAIL:"On Failure",CRIF:"On Crit Fail",AT_LEAST_SUCC:"Success or better",AT_LEAST_FAIL:"Failure or better",FAIL_WORSE:"Failure or worse",SUCC_WORSE:"Success or worse"},N={STRIKE:"x1 hit, x2 crit",BASIC:"Basic save",ALWAYS:"Always",CRIT:"On Crit",SUCC:"On Success",FAIL:"On Failure",CRIF:"On Crit Fail",AT_LEAST_SUCC:"Success or better",AT_LEAST_FAIL:"Failure or better",FAIL_WORSE:"Failure or worse",SUCC_WORSE:"Success or worse"},F=(n={},Object(g.a)(n,C.FIGHTER,A.STRIKE),Object(g.a)(n,C.MARTIAL,A.STRIKE),Object(g.a)(n,C.CASTER,A.STRIKE),Object(g.a)(n,C.ALCH,A.STRIKE),Object(g.a)(n,C.FIGHTERR,A.STRIKE),Object(g.a)(n,C.MARTIALR,A.STRIKE),Object(g.a)(n,C.CASTERR,A.STRIKE),Object(g.a)(n,C.ALCHR,A.STRIKE),Object(g.a)(n,C.CASTERC,A.STRIKE),Object(g.a)(n,C.CASTERS,A.SAVE),n),L=(r={},Object(g.a)(r,C.FIGHTER,I.AC),Object(g.a)(r,C.MARTIAL,I.AC),Object(g.a)(r,C.CASTER,I.AC),Object(g.a)(r,C.ALCH,I.AC),Object(g.a)(r,C.FIGHTERR,I.AC),Object(g.a)(r,C.MARTIALR,I.AC),Object(g.a)(r,C.CASTERR,I.AC),Object(g.a)(r,C.ALCHR,I.AC),Object(g.a)(r,C.CASTERC,I.AC),Object(g.a)(r,C.CASTERS,I.REF),r),D=(c={},Object(g.a)(c,C.FIGHTER,N.STRIKE),Object(g.a)(c,C.MARTIAL,N.STRIKE),Object(g.a)(c,C.CASTER,N.STRIKE),Object(g.a)(c,C.ALCH,N.STRIKE),Object(g.a)(c,C.FIGHTERR,N.STRIKE),Object(g.a)(c,C.MARTIALR,N.STRIKE),Object(g.a)(c,C.CASTERR,N.STRIKE),Object(g.a)(c,C.ALCHR,N.STRIKE),Object(g.a)(c,C.CASTERC,N.STRIKE),Object(g.a)(c,C.CASTERS,N.BASIC),c),M={},P={},w={},H={},W={},K={},_={},U={},G={},B={},z=1;z<=20;z++)B[z]=Math.floor((z+1)/2);for(var V={},Y={},X={},J={},$={},q={},Q={},Z={},ee={},te={},ae={},ne={},re={},ce={},ie=1;ie<=20;ie++)M[ie]=0,P[ie]=4,w[ie]=3,H[ie]=2,W[ie]=2,K[ie]=2,_[ie]=2,U[ie]=0,G[ie]=1,V[ie]=0,Y[ie]=0,ie>=2&&(U[ie]=1),ie>=4&&(G[ie]=2),ie>=5&&(H[ie]=4,w[ie]=4),ie>=7&&(W[ie]=4,V[ie]=1,_[ie]=4),ie>=10&&(U[ie]=2,P[ie]=5),ie>=11&&(K[ie]=4),ie>=12&&(G[ie]=3),ie>=13&&(H[ie]=6,Y[ie]=1),ie>=15&&(V[ie]=2,w[ie]=5,_[ie]=6),ie>=16&&(U[ie]=3),ie>=17&&(P[ie]=6),ie>=19&&(G[ie]=4,_[ie]=8),ie>=20&&(P[ie]=7),X[ie]=ie+H[ie]+P[ie]+U[ie]+2,J[ie]=ie+H[ie]+P[ie]+U[ie],$[ie]=ie+K[ie]+w[ie]+U[ie],q[ie]=ie+W[ie]+w[ie]+U[ie],Q[ie]=ie+_[ie]+P[ie],Z[ie]=10+ie+_[ie]+P[ie],ee[ie]=P[ie]+V[ie]*(H[ie]+2)/2,te[ie]=V[ie]*(H[ie]+2)/2,ae[ie]=P[ie]+V[ie]*H[ie]/2,ne[ie]=V[ie]*H[ie]/2,re[ie]=w[ie]+Y[ie]*K[ie]/2,ce[ie]=Y[ie]*K[ie]/2;var le=(i={},Object(g.a)(i,C.FIGHTER,X),Object(g.a)(i,C.MARTIAL,J),Object(g.a)(i,C.CASTER,$),Object(g.a)(i,C.ALCH,q),Object(g.a)(i,C.FIGHTERR,X),Object(g.a)(i,C.MARTIALR,J),Object(g.a)(i,C.CASTERR,$),Object(g.a)(i,C.ALCHR,q),Object(g.a)(i,C.CASTERC,Q),Object(g.a)(i,C.CASTERS,Z),i),ue=(l={},Object(g.a)(l,C.FIGHTER,G),Object(g.a)(l,C.MARTIAL,G),Object(g.a)(l,C.CASTER,G),Object(g.a)(l,C.ALCH,G),Object(g.a)(l,C.FIGHTERR,G),Object(g.a)(l,C.MARTIALR,G),Object(g.a)(l,C.CASTERR,G),Object(g.a)(l,C.ALCHR,G),Object(g.a)(l,C.CASTERC,B),Object(g.a)(l,C.CASTERS,B),l),se=(u={},Object(g.a)(u,C.FIGHTER,ee),Object(g.a)(u,C.MARTIAL,ae),Object(g.a)(u,C.CASTER,re),Object(g.a)(u,C.ALCH,re),Object(g.a)(u,C.FIGHTERR,te),Object(g.a)(u,C.MARTIALR,ne),Object(g.a)(u,C.CASTERR,ce),Object(g.a)(u,C.ALCHR,ce),Object(g.a)(u,C.CASTERC,P),Object(g.a)(u,C.CASTERS,M),u),de={"-1":18,0:19,1:19,2:21,3:22,4:24,5:25,6:27,7:28,8:30,9:31,10:33,11:34,12:36,13:37,14:39,15:40,16:42,17:43,18:45,19:46,20:48,21:49,22:51,23:52,24:54},oe=Object(h.a)({},de);for(var me in oe)oe[me]-=3;var pe=Object(h.a)({},de);for(var ve in pe)pe[ve]-=4;var fe=Object(h.a)({},de);for(var ge in fe)fe[ge]-=6;var Ee=(s={},Object(g.a)(s,R.EXTREME,de),Object(g.a)(s,R.HIGH,oe),Object(g.a)(s,R.MODERATE,pe),Object(g.a)(s,R.LOW,fe),s),be=(d={},Object(g.a)(d,O.EXTREME,{"-1":9,0:10,1:11,2:12,3:14,4:15,5:17,6:18,7:20,8:21,9:23,10:24,11:26,12:27,13:29,14:30,15:32,16:33,17:35,18:36,19:38,20:39,21:41,22:43,23:44,24:46}),Object(g.a)(d,O.HIGH,{"-1":8,0:9,1:10,2:11,3:12,4:14,5:15,6:17,7:18,8:19,9:21,10:22,11:24,12:25,13:26,14:28,15:29,16:30,17:32,18:33,19:35,20:36,21:38,22:39,23:40,24:42}),Object(g.a)(d,O.MODERATE,{"-1":5,0:6,1:7,2:8,3:9,4:11,5:12,6:14,7:15,8:16,9:18,10:19,11:21,12:22,13:23,14:25,15:26,16:28,17:29,18:30,19:32,20:33,21:35,22:36,23:37,24:38}),Object(g.a)(d,O.LOW,{"-1":2,0:3,1:4,2:5,3:6,4:8,5:9,6:11,7:12,8:13,9:15,10:16,11:18,12:19,13:20,14:22,15:23,16:25,17:26,18:27,19:29,20:30,21:32,22:33,23:34,24:36}),Object(g.a)(d,O.TERRIBLE,{"-1":0,0:1,1:2,2:3,3:4,4:6,5:7,6:8,7:10,8:11,9:12,10:14,11:15,12:16,13:18,14:19,15:20,16:22,17:23,18:24,19:26,20:27,21:28,22:30,23:31,24:32}),d),he=Object(b.b)(),Ae=0,Ce=Object(b.c)({name:"weaknesses",initialState:he.getInitialState(),reducers:{weaknessAdded:he.addOne,weaknessUpdated:he.updateOne,weaknessCreated:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.type,c=a.value;he.addOne(e,{id:n,type:r,value:c})},prepare:function(e){var t=e.parentId,a=e.type,n=e.value;return{payload:{id:++Ae,parentId:t,type:a,value:n}}}},weaknessRemoved:he.removeOne}}),Re=Ce.actions,Oe=Re.weaknessRemoved,Ie=Re.weaknessCreated,Te=(Re.weaknessAdded,Re.weaknessUpdated),ye=Ce.reducer,Se=he.getSelectors((function(e){return e.weaknesses})),je=Se.selectById,xe=(Se.selectIds,Se.selectEntities),ke=(Se.selectAll,Se.selectTotal,Object(b.b)()),Ne=Object(b.c)({name:"targets",initialState:ke.getInitialState(),reducers:{targetAdded:ke.addOne,targetUpdated:function(e,t){ke.updateOne(e,t.payload);var a=e.entities[t.payload.id];a.level||(a.level=0),a.level<-1&&(a.level=-1),a.level>24&&(a.level=24),a.useDefaultAC&&(a[I.AC]=Ee[a.defaultAC][a.level]),a.useDefaultFort&&(a[I.FORT]=be[a.defaultFort][a.level]),a.useDefaultRef&&(a[I.REF]=be[a.defaultRef][a.level]),a.useDefaultWill&&(a[I.WILL]=be[a.defaultWill][a.level]),a.useDefaultPer&&(a[I.PER]=be[a.defaultPer][a.level])}},extraReducers:function(e){e.addCase(Ie,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].weaknesses.push(r)})).addCase(Oe,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].weaknesses=e.entities[n].weaknesses.filter((function(e){return e!==r}))}))}}),Fe=Ne.actions,Le=Fe.targetAdded,De=Fe.targetUpdated,Me=Ne.reducer,Pe=ke.getSelectors((function(e){return e.targets})),we=Pe.selectById,He=(Pe.selectIds,Pe.selectEntities);Pe.selectAll,Pe.selectTotal;var We=function(e){var t=e.id,a=e.parentId,n=Object(E.c)((function(e){return je(e,t)})),r=n.type,c=n.value,i=Object(E.b)();return m.a.createElement("span",{className:"input"},m.a.createElement(Ue,{value:r,onChange:function(e){e.target.value===j.NONE?i(Oe({id:t,parentId:a})):i(Te({id:t,changes:{type:e.target.value}}))}}),m.a.createElement("input",{type:"number",value:c,onChange:function(e){isNaN(e.target.value)||i(Te({id:t,changes:{value:parseInt(e.target.value)}}))}}))},Ke=0,_e=function(e){var t=e.parentId,a=Object(E.b)(),n=Object(o.useState)(0),r=Object(f.a)(n,2),c=r[0],i=r[1];return m.a.createElement("span",{className:"input"},m.a.createElement(Ue,{value:j.NONE,onChange:function(e){e.target.value!==j.NONE&&(Ke++,a(Ie({id:Ke,type:e.target.value,value:c,parentId:t})))}}),m.a.createElement("input",{type:"number",value:c,onChange:function(e){return i(parseInt(e.target.value))}}))},Ue=function(e){var t=e.value,a=e.onChange,n=[];for(var r in j)n.push(m.a.createElement("option",{key:r},j[r]));for(var c in x)x[c]!==x.NONE&&n.push(m.a.createElement("option",{key:c},x[c]));return m.a.createElement("span",null,m.a.createElement("select",{value:t,onChange:function(e){return a(e)}},n))},Ge=function(e){var t=e.id,a=Object(E.c)((function(e){return we(e,0)})),n=a.name,r=a.level,c=a[I.AC],i=a.defaultAC,l=a.useDefaultAC,u=a[I.FORT],s=a.defaultFort,d=a.useDefaultFort,o=a[I.REF],p=a.defaultRef,v=a.useDefaultRef,f=a[I.WILL],b=a.defaultWill,h=a.useDefaultWill,A=a[I.PER],C=a.defaultPer,T=a.useDefaultPer,y=a.flatfooted,S=a.weaknesses,j=Object(E.b)(),x=[];for(var k in R)x.push(m.a.createElement("option",{key:k},R[k]));var N=[];for(var F in O)N.push(m.a.createElement("option",{key:F},O[F]));return m.a.createElement("div",{className:"box flexbox"},m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"targetName"},"Target Name: "),m.a.createElement("input",{id:"targetName",type:"text",placeholder:"Enter Target name",value:n,onChange:function(e){return j(De({id:t,changes:{name:e.target.value}}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Level"}," Level: "),m.a.createElement("input",{id:"Level",type:"number",value:r,onChange:function(e){return j(De({id:t,changes:{level:parseInt(e.target.value)}}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"AC"}," AC: "),m.a.createElement("input",{type:"checkbox",checked:l,onChange:function(e){return j(De({id:t,changes:{useDefaultAC:e.target.checked}}))}}),m.a.createElement("select",{value:i,onChange:function(e){return j(De({id:t,changes:{defaultAC:e.target.value}}))}},x),m.a.createElement("input",{id:"AC",type:"number",value:c,onChange:function(e){return j(De({id:t,changes:Object(g.a)({useDefaultAC:!1},I.AC,parseInt(e.target.value))}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Fort"}," Fort: "),m.a.createElement("input",{type:"checkbox",checked:d,onChange:function(e){return j(De({id:t,changes:{useDefaultFort:e.target.checked}}))}}),m.a.createElement("select",{value:s,onChange:function(e){return j(De({id:t,changes:{defaultFort:e.target.value}}))}},N),m.a.createElement("input",{id:"Fort",type:"number",value:u,onChange:function(e){return j(De({id:t,changes:Object(g.a)({},I.FORT,parseInt(e.target.value))}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Ref"}," Ref: "),m.a.createElement("input",{type:"checkbox",checked:v,onChange:function(e){return j(De({id:t,changes:{useDefaultRef:e.target.checked}}))}}),m.a.createElement("select",{value:p,onChange:function(e){return j(De({id:t,changes:{defaultRef:e.target.value}}))}},N),m.a.createElement("input",{id:"Ref",type:"number",value:o,onChange:function(e){return j(De({id:t,changes:Object(g.a)({},I.REF,parseInt(e.target.value))}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Will"}," Will: "),m.a.createElement("input",{type:"checkbox",checked:h,onChange:function(e){return j(De({id:t,changes:{useDefaultWill:e.target.checked}}))}}),m.a.createElement("select",{value:b,onChange:function(e){return j(De({id:t,changes:{defaultWill:e.target.value}}))}},N),m.a.createElement("input",{id:"Will",type:"number",value:f,onChange:function(e){return j(De({id:t,changes:Object(g.a)({},I.WILL,parseInt(e.target.value))}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Perception"}," Perception: "),m.a.createElement("input",{type:"checkbox",checked:T,onChange:function(e){return j(De({id:t,changes:{useDefaultPer:e.target.checked}}))}}),m.a.createElement("select",{value:C,onChange:function(e){return j(De({id:t,changes:{defaultPer:e.target.value}}))}},N),m.a.createElement("input",{id:"Perception",type:"number",value:A,onChange:function(e){return j(De({id:t,changes:Object(g.a)({},I.PER,parseInt(e.target.value))}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Flatfooted"}," Flatfooted: "),m.a.createElement("input",{id:"Flatfooted",type:"checkbox",checked:y,onChange:function(e){return j(De({id:t,changes:{flatfooted:e.target.checked}}))}})),m.a.createElement("div",{className:"box flexbox"}," Resistance/Weakness: ",S.map((function(e){return m.a.createElement(We,{parentId:t,id:e,key:e})})),m.a.createElement(_e,{parentId:t})))},Be=a(4),ze=function(e,t){if(0===e.length||0===t.length)throw new Error("Vectors can not be empty!");for(var a=e,n=t,r=0,c=[],i=0;i<a.length;i++){for(var l=0;l<n.length;l++)r+l!==c.length?c[r+l]=c[r+l]+a[i]*n[l]:c.push(a[i]*n[l]);r++}return c},Ve=function(){for(var e=0,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];for(var r=0,c=a;r<c.length;r++){var i=c[r];e=Math.max(e,i[0].staticDamage+i[0].damageDist.length)}for(var l=[],u=0;u<e;u++){l.push(0);var s,d=Object(Be.a)(a);try{for(d.s();!(s=d.n()).done;){var o=s.value;if(o[0].staticDamage<=u){var m=u-o[0].staticDamage;m<o[0].damageDist.length&&(l[u]+=o[0].damageDist[m]*o[1])}}}catch(p){d.e(p)}finally{d.f()}}return l},Ye=function(e,t,a){for(;e<a;)t.length>=2&&(t[1]+=t[0],t.shift()),e++;return[e,t]},Xe=Object(b.b)(),Je=1,$e=Object(b.c)({name:"damages",initialState:Xe.getInitialState(),reducers:{damageAdded:Xe.addOne,damageUpdated:Xe.updateOne,damageCreated:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.damageCondition,c=a.diceNum,i=a.diceSize,l=a.staticDamage,u=a.damageType,s=a.material,d=a.persistent;Xe.addOne(e,{id:n,damageCondition:r,diceNum:c,diceSize:i,staticDamage:l,damageType:u,material:s,persistent:d})},prepare:function(e){var t=e.parentId;return{payload:{id:++Je,parentId:t,damageCondition:N.STRIKE,diceNum:0,diceSize:8,staticDamage:0,damageType:j.B,material:x.NONE,persistent:!1}}}},damageRemoved:function(e,t){Xe.removeOne(e,t.payload.id)}}}),qe=$e.actions,Qe=qe.damageRemoved,Ze=qe.damageCreated,et=(qe.damageAdded,qe.damageUpdated),tt=$e.reducer,at=Xe.getSelectors((function(e){return e.damages})),nt=at.selectById,rt=(at.selectIds,at.selectEntities);at.selectAll,at.selectTotal;var ct=Object(b.b)(),it=1,lt={level:1,useDefault:!1,defaultActivity:C.FIGHTER,type:A.STRIKE,targetType:I.AC,value:9,MAP:T.N1,damageCondition:N.STRIKE,diceNum:1,diceSize:8,staticDamage:4,damageType:j.S,material:x.NONE},ut=Object(b.c)({name:"activityPaths",initialState:ct.getInitialState(),reducers:{activityPathAdded:ct.addOne,activityPathUpdated:function(e,t){ct.updateOne(e,t.payload),function(e,t){!function t(a){var n=e.entities[a];if(!n.override){var r=n.defaultActivity;n.type=F[r],n.targetType=L[r],n.value=le[r][n.level],n.damageCondition=D[r],n.diceNum=ue[r][n.level],n.staticDamage=se[r][n.level];var c,i=Object(Be.a)(n.apIds);try{for(i.s();!(c=i.n()).done;){var l=c.value;e.entities[l].level=n.level,t(l)}}catch(u){i.e(u)}finally{i.f()}}}(t)}(e,t.payload.id)},activityPathRemoved:function(e,t){var a=t.payload,n=a.id,r=a.parentId;ct.removeOne(e,n),void 0!==r&&(e.entities[r].apIds=e.entities[r].apIds.filter((function(e){return e!==n})))},activityPathCreated:{reducer:function(e,t){var a,n=t.payload,r=n.id,c=n.parentId,i=n.applyMAP;a=void 0!==c?e.entities[c]:lt,ct.addOne(e,{id:r,condition:k.ALWAYS,override:!1,level:a.level,useDefault:a.useDefault,defaultActivity:a.defaultActivity,type:a.type,targetType:a.targetType,targetInfoId:0,value:a.value,MAP:i?y[a.MAP]:a.MAP,damageCondition:a.damageCondition,diceNum:a.diceNum,diceSize:a.diceSize,staticDamage:a.staticDamage,damageType:a.damageType,material:a.material,damages:[],effects:[],apIds:[]}),void 0!==c&&e.entities[c].apIds.push(r)},prepare:function(e){var t=e.parentId,a=e.routineId,n=e.applyMAP;return{payload:{id:++it,parentId:t,routineId:a,applyMAP:n}}}}},extraReducers:function(e){e.addCase(Ze,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].damages.push(r)})).addCase(Qe,(function(e,t){var a=t.payload,n=a.parentId,r=a.id;e.entities[n].damages=e.entities[n].damages.filter((function(e){return e!==r}))}))}}),st=ut.actions,dt=st.activityPathCreated,ot=st.activityPathAdded,mt=st.activityPathUpdated,pt=st.activityPathRemoved,vt=ut.reducer,ft=ct.getSelectors((function(e){return e.activityPaths})),gt=ft.selectById,Et=(ft.selectIds,ft.selectEntities),bt=(ft.selectAll,ft.selectTotal,Object(b.b)()),ht=1,At=Object(b.c)({name:"routines",initialState:bt.getInitialState({selectedRoutine:0}),reducers:{setRoutine:function(e,t){e.selectedRoutine=t.payload||0},routineAdded:bt.addOne,routineUpdated:bt.updateOne,routineCreated:{reducer:function(e,t){var a=t.payload,n=a.id,r=a.name,c=a.apIds;e.selectedRoutine=n,bt.addOne(e,{id:n,name:r,apIds:c})},prepare:function(){return{payload:{id:++ht,name:"New Routine",apIds:[]}}}}},extraReducers:function(e){e.addCase(dt,(function(e,t){var a=t.payload,n=a.routineId,r=a.id;void 0!==n&&e.entities[n].apIds.push(r)})).addCase(pt,(function(e,t){var a=t.payload,n=a.routineId,r=a.id;void 0!==n&&(e.entities[n].apIds=e.entities[n].apIds.filter((function(e){return e!==r})))}))}}),Ct=At.actions,Rt=Ct.routineCreated,Ot=Ct.setRoutine,It=(Ct.updateSelected,Ct.routineAdded),Tt=Ct.routineUpdated,yt=At.reducer,St=bt.getSelectors((function(e){return e.routines})),jt=St.selectById,xt=(St.selectIds,St.selectEntities),kt=St.selectAll,Nt=(St.selectTotal,function(e){return e.routines.selectedRoutine}),Ft=a(72),Lt=a(2),Dt=a(3);var Mt=function(e,t,a,n,r,c,i){e=n?e.persistent:e.normal;var l=function(e,t,a){if(0===a)return[0,[1]];if(1===a)return[e,t];var n,r=[0],c=0,i=Math.floor(e*a),l=0,u=i,s=Object(Be.a)(t);try{for(s.s();!(n=s.n()).done;){var d=n.value,o=Math.floor((e+l)*a);if(o===u)r[c]+=d;else{if(o>u+1)for(var m=0;m<o-(u+1);m++)r[++c]=0;r[++c]=d}u=o,l++}}catch(p){s.e(p)}finally{s.f()}return[i,r]}(r,c,i),u=Object(f.a)(l,2);r=u[0],c=u[1],t in e?(e[t].staticDamage+=r,e[t].damageDist=ze(e[t].damageDist,c),a!==x.NONE&&(e[t].material=a)):e[t]={material:a,staticDamage:r,damageDist:c}};var Pt=function(){function e(t,a,n,r){Object(Lt.a)(this,e),this.activityPaths=t,this.targets=a,this.damages=n,this.weaknesses=r}return Object(Dt.a)(e,[{key:"evalPath",value:function(e){var t=this,a=this.targets[0],n=e.damages.map((function(e){return t.damages[e]}));n.push(e);var r=a.weaknesses.map((function(e){return t.weaknesses[e]})),c=function(e,t,a,n){var r,c;switch(e.type){case A.STRIKE:r=e.value,r+=S[e.MAP],c=a[e.targetType],e.targetType===I.AC?a.flatfooted&&(c-=2):c+=10;break;case A.SAVE:r=a[e.targetType],c=e.value,e.targetType===I.AC&&(r-=10);break;default:console.log("Activity type ".concat(e.type," not implemented"))}var i=[function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e-t;return n<-20?0:-20===n?5:n<-9?a?10:5:n<8?5*(11+n):95}(r,c)/100,function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e-t;return n<-29?0:n<-20?5:-20===n?0:n<-9?5*(a?19:20+n):n<-1?50:n<9?5*(8-n):5}(r,c)/100,function(e,t){var a=e-t;return a<-29?5:a<-20?5*(29+a):a<-10?45:a<-1?5*(-2-a):a<9?5:0}(r,c)/100,function(e,t){var a=e-t;return a<-29?95:a<-10?5*(-10-a):a<-1?5:0}(r,c)/100],l={normal:{},persistent:{}},u={normal:{},persistent:{}},s={normal:{},persistent:{}},d={normal:{},persistent:{}},o=[l,u,s,d];t.forEach((function(e){var t=e.damageCondition,a=e.diceNum,n=e.diceSize,r=e.staticDamage,c=e.damageType,i=e.material,o=e.persistent;r||(r=0);for(var m=[1],p=[],v=0;v<n;v++)p.push(1/n);for(var f=0;f<a;f++)m=ze(m,p);switch(r+=a,t){case N.STRIKE:Mt(u,c,i,o,r,m,1),Mt(l,c,i,o,r,m,2);break;case N.BASIC:Mt(u,c,i,o,r,m,.5),Mt(s,c,i,o,r,m,1),Mt(d,c,i,o,r,m,2);break;case N.CRIF:Mt(d,c,i,o,r,m,1);break;case N.FAIL:Mt(s,c,i,o,r,m,1);break;case N.SUCC:Mt(u,c,i,o,r,m,1);break;case N.CRIT:Mt(l,c,i,o,r,m,1);break;case N.AT_LEAST_SUCC:Mt(u,c,i,o,r,m,1),Mt(l,c,i,o,r,m,1);break;case N.AT_LEAST_FAIL:Mt(s,c,i,o,r,m,1),Mt(u,c,i,o,r,m,1),Mt(l,c,i,o,r,m,1);break;case N.FAIL_WORSE:Mt(d,c,i,o,r,m,1),Mt(s,c,i,o,r,m,1);break;case N.SUCC_WORSE:Mt(d,c,i,o,r,m,1),Mt(s,c,i,o,r,m,1),Mt(u,c,i,o,r,m,1);break;case N.ALWAYS:Mt(d,c,i,o,r,m,1),Mt(s,c,i,o,r,m,1),Mt(u,c,i,o,r,m,1),Mt(l,c,i,o,r,m,1);break;default:console.log("Damage condition ".concat(e.condition," not implemented yet."))}}));for(var m=0,p=o;m<p.length;m++)for(var v=p[m],g=0,E=["normal","persistent"];g<E.length;g++){var b=E[g],h=0,C=[1],R=function(e){var t=v[b][e],a=t.material,r=t.staticDamage,c=t.damageDist;if(r<0){var i=Ye(r,c,1),l=Object(f.a)(i,2);r=l[0],c=l[1]}var u=0,s=0;n.forEach((function(t){t.type!==e&&t.type!==a||(t.value<0?u=Math.min(u,t.value):t.value>0&&(s=Math.max(s,t.value)))}));var d=Ye(r-=s+u,c,0),o=Object(f.a)(d,2);r=o[0],c=o[1],h+=r,C=ze(C,c)};for(var O in v[b])R(O);v[b].staticDamage=h,v[b].damageDist=C}return[o,i]}(e,n,a,r),i=Object(f.a)(c,2),l=i[0],u=i[1];return e.apIds.forEach((function(e){var a=t.activityPaths[e],n=t.evalPath(a),r=Object(f.a)(n,2),c=r[0],i=r[1],u=[];switch(a.condition){case k.ALWAYS:u=[0,1,2,3];break;case k.AT_LEAST_FAIL:u=[0,1,2];break;case k.AT_LEAST_SUCC:u=[0,1];break;case k.CRIF:u=[3];break;case k.CRIT:u=[0];break;case k.FAIL:u=[2];break;case k.FAIL_WORSE:u=[2,3];break;case k.SUCC:u=[1];break;case k.SUCC_WORSE:u=[1,2,3]}for(var s=0,d=u;s<d.length;s++){var o=d[s];l[o].normal.damageDist=ze(l[o].normal.damageDist,c),l[o].persistent.damageDist=ze(l[o].persistent.damageDist,i)}})),[Ve([l[0].normal,u[0]],[l[1].normal,u[1]],[l[2].normal,u[2]],[l[3].normal,u[3]]),Ve([l[0].persistent,u[0]],[l[1].persistent,u[1]],[l[2].persistent,u[2]],[l[3].persistent,u[3]])]}}]),e}(),wt=function(){var e=Object(o.useState)(!0),t=Object(f.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(2),c=Object(f.a)(r,2),i=c[0],l=c[1],u=Object(E.c)(xt),s=Object(E.c)(Et),d=Object(E.c)(He),p=Object(E.c)(rt),v=Object(E.c)(xe),g=new Pt(s,d,p,v),b=0,h=0,A=[],C=[],R=[];for(var O in u){for(var I=u[O],T=0,y=[1],S=[1],j=0;j<I.apIds.length;j++){var x=s[I.apIds[j]],k=g.evalPath(x),N=Object(f.a)(k,2),F=N[0],L=N[1];y=ze(y,F),S=ze(S,L)}b=Math.max(b,y.length-1),h=Math.max(h,S.length-1);for(var D=[],M=0;M<y.length;M++)D.push({x:M,y:y[M]}),T+=y[M]*M;A.push({fill:"origin",label:I.name,data:D,xAxisID:"damage",yAxisID:"chance",spanGaps:!1}),C.push(m.a.createElement("div",{key:I.id},I.name,": ",T.toFixed(2))),R.push(m.a.createElement("div",{key:I.id},I.name,": ",(0).toFixed(2)))}for(var P=[],w=0;w<=b;w++)P.push(w);var H={labels:P,datasets:A};return m.a.createElement("div",{className:"box"},"Add persistent damage:",m.a.createElement("input",{type:"checkbox",checked:a,onChange:function(e){return n(e.target.checked)}}),", persistent damage multiplier:",m.a.createElement("input",{type:"number",value:i||0,onChange:function(e){return l(e.target.valueAsNumber)}}),m.a.createElement("div",null,"Expected Damage:",C),m.a.createElement(Ft.a,{data:H}),a?"":m.a.createElement("div",null,"Expected Persistent Damage:",R))},Ht=[];for(var Wt in k)Ht.push(m.a.createElement("option",{key:Wt},k[Wt]));var Kt=[];for(var _t in C)Kt.push(m.a.createElement("option",{key:_t},C[_t]));var Ut=[];for(var Gt in A)Ut.push(m.a.createElement("option",{key:Gt},A[Gt]));var Bt=[];for(var zt in T)Bt.push(m.a.createElement("option",{key:zt},T[zt]));var Vt=[];for(var Yt in I)Vt.push(m.a.createElement("option",{key:Yt},I[Yt]));var Xt=[];for(var Jt in N)Xt.push(m.a.createElement("option",{key:Jt},N[Jt]));var $t=[];for(var qt in{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20})$t.push(m.a.createElement("option",{key:qt},qt));var Qt=[];for(var Zt in{4:4,6:6,8:8,10:10,12:12})Qt.push(m.a.createElement("option",{key:Zt},Zt));var ea=[];for(var ta in j)ea.push(m.a.createElement("option",{key:ta},j[ta]));var aa=[];for(var na in x)aa.push(m.a.createElement("option",{key:na},x[na]));var ra=function(e){var t=e.id,a=Object(E.b)(),n=Object(E.c)((function(e){return jt(e,t)})).name;return m.a.createElement("div",{className:"box"},m.a.createElement("label",{htmlFor:"routineName"},"Routine Name:"),m.a.createElement("input",{id:"routineName",type:"text",placeholder:"Enter routine name",value:n,onChange:function(e){return a(Tt({id:t,changes:{name:e.target.value}}))}}))},ca=function e(t){var a=t.id,n=t.parentId,r=t.routineId,c=t.displayCondition,i=void 0===c||c,l=Object(E.c)((function(e){return gt(e,a)})),u=l.condition,s=l.level,d=l.override,o=l.defaultActivity,p=l.type,v=l.targetType,f=l.value,g=l.MAP,b=l.damageCondition,h=l.diceNum,C=l.diceSize,R=l.staticDamage,O=l.damageType,I=l.material,T=l.damages,y=l.effects,S=l.apIds,j=Object(E.b)();return m.a.createElement("div",{className:"box"},i?m.a.createElement("div",null,"Condition: ",m.a.createElement("select",{value:u,onChange:function(e){return j(mt({id:a,changes:{condition:e.target.value}}))}},Ht)):"",m.a.createElement("div",{className:""},m.a.createElement("div",{className:"flexbox"},m.a.createElement("button",{className:"delete",onClick:function(e){j(pt({id:a,parentId:n,routineId:r}))}},"-"),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"override"},"Override: "),m.a.createElement("input",{id:"override",type:"checkbox",checked:d,onChange:function(e){return j(mt({id:a,changes:{override:e.target.checked}}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("label",{htmlFor:"Level"}," Level: "),m.a.createElement("input",{id:"Level",type:"number",value:s,min:1,max:20,onChange:function(e){var t=parseInt(e.target.value)||1;t>20&&(t=20),j(mt({id:a,changes:{level:t}}))}})),m.a.createElement("span",{className:"input"},m.a.createElement("select",{value:o,onChange:function(e){return j(mt({id:a,changes:{defaultActivity:e.target.value}}))}},Kt)),m.a.createElement("span",{className:"input"},m.a.createElement("select",{value:p,onChange:function(e){return j(mt({id:a,changes:{type:e.target.value}}))}},Ut),p===A.STRIKE?" +":" DC: ",m.a.createElement("input",{type:"number",value:f||0,onChange:function(e){return j(mt({id:a,changes:{value:parseInt(e.target.value)}}))}})),m.a.createElement("span",{className:"input"}," MAP: ",m.a.createElement("select",{value:g,onChange:function(e){return j(mt({id:a,changes:{MAP:e.target.value}}))}},Bt)),m.a.createElement("span",{className:"input"}," VS: ",m.a.createElement("select",{value:v,onChange:function(e){j(mt({id:a,changes:{targetType:e.target.value}}))}},Vt))),m.a.createElement("div",{className:"flexbox"},"Damage:",m.a.createElement("select",{value:b,onChange:function(e){return j(mt({id:a,changes:{damageCondition:e.target.value}}))}},Xt),m.a.createElement("select",{value:h,onChange:function(e){return j(mt({id:a,changes:{diceNum:parseInt(e.target.value)}}))}},$t),"d",m.a.createElement("select",{value:C,onChange:function(e){return j(mt({id:a,changes:{diceSize:parseInt(e.target.value)}}))}},Qt)," + ",m.a.createElement("input",{type:"number",value:R,onChange:function(e){return j(mt({id:a,changes:{staticDamage:parseInt(e.target.value)}}))}}),m.a.createElement("select",{value:O,onChange:function(e){j(mt({id:a,changes:{damageType:e.target.value}}))}},ea),m.a.createElement("select",{value:I,onChange:function(e){j(et({id:a,changes:{material:e.target.value}}))}},aa)),m.a.createElement("div",{className:"box"},"Additional Damage: ",T.map((function(e){return m.a.createElement(ia,{parentId:a,id:e,key:e})})),m.a.createElement("button",{className:"add",onClick:function(){return j(Ze({parentId:a}))}},"+")),m.a.createElement("div",{className:"box"},"Effects: ",y)),m.a.createElement("div",{className:"box"},S.map((function(t){return m.a.createElement(e,{id:t,parentId:a,key:t})})),m.a.createElement("button",{className:"add",onClick:function(){return j(dt({parentId:a}))}},"+"),m.a.createElement("button",{className:"add",onClick:function(){return j(dt({parentId:a,applyMAP:!0}))}},"+MAP")))},ia=function(e){var t=e.parentId,a=e.id,n=Object(E.c)((function(e){return nt(e,a)})),r=n.damageCondition,c=n.diceNum,i=n.diceSize,l=n.staticDamage,u=n.damageType,s=n.material,d=n.persistent,o=Object(E.b)();return m.a.createElement("div",{className:"box"},m.a.createElement("button",{className:"delete",onClick:function(e){o(Qe({id:a,parentId:t}))}},"-"),m.a.createElement("select",{value:r,onChange:function(e){return o(et({id:a,changes:{damageCondition:e.target.value}}))}},Xt),m.a.createElement("select",{value:c,onChange:function(e){return o(et({id:a,changes:{diceNum:parseInt(e.target.value)}}))}},$t),"d",m.a.createElement("select",{value:i,onChange:function(e){return o(et({id:a,changes:{diceSize:parseInt(e.target.value)}}))}},Qt)," + ",m.a.createElement("input",{type:"number",value:l,onChange:function(e){return o(et({id:a,changes:{staticDamage:parseInt(e.target.value)}}))}}),m.a.createElement("select",{value:u,onChange:function(e){o(et({id:a,changes:{damageType:e.target.value}}))}},ea),m.a.createElement("select",{value:s,onChange:function(e){o(et({id:a,changes:{material:e.target.value}}))}},aa)," Persistent: ",m.a.createElement("input",{type:"checkbox",checked:d,onChange:function(e){return o(et({id:a,changes:{persistent:e.target.checked}}))}}))},la=function(){var e=Object(E.c)(Nt),t=Object(E.c)((function(t){return jt(t,e)})).apIds,a=Object(E.b)();return m.a.createElement("div",{className:"selectedRoutine"},m.a.createElement(ra,{id:e}),t.map((function(t){return m.a.createElement(ca,{id:t,routineId:e,key:t,displayCondition:!1})})),m.a.createElement("button",{className:"add",onClick:function(){return a(dt({routineId:e}))}},"+"))},ua=function(){var e=Object(E.c)(kt),t=Object(E.c)(Nt),a=Object(E.b)(),n=[];return e.forEach((function(e){n.push(m.a.createElement("option",{value:e.id,key:e.id},e.name))})),m.a.createElement("div",{className:"box"},"Selected Routine:",m.a.createElement("select",{value:t,onChange:function(e){return a(Ot(e.target.value))}},n),m.a.createElement("button",{className:"add",onClick:function(){return a(Rt())}},"+"))},sa=function(){return m.a.createElement("div",{className:"box"},"Import and Export Here")};a(189);var da,oa=function(e){return m.a.createElement("div",{className:"PF2App"},m.a.createElement(Ge,{id:0}),m.a.createElement(wt,null),m.a.createElement(la,null),m.a.createElement(ua,null),m.a.createElement(sa,null))},ma=Object(b.b)(),pa=Object(b.c)({name:"effects",initialState:ma.getInitialState(),reducers:{effectAdded:ma.addOne,effectUpdated:ma.updateOne}}),va=pa.actions,fa=(va.effectAdded,va.effectUpdated,pa.reducer),ga=ma.getSelectors((function(e){return e.effects})),Ea=(ga.selectById,ga.selectIds,ga.selectEntities,ga.selectAll,ga.selectTotal,Object(b.a)({reducer:{routines:yt,activityPaths:vt,damages:tt,effects:fa,weaknesses:ye,targets:Me}}));Ea.dispatch(It({id:0,name:"Fighter",apIds:[0]})),Ea.dispatch(ot({id:0,condition:k.ALWAYS,override:!1,level:1,useDefault:!1,defaultActivity:C.FIGHTER,type:A.STRIKE,targetType:I.AC,targetInfoId:0,value:9,MAP:T.N1,damageCondition:N.STRIKE,diceNum:1,diceSize:8,staticDamage:4,damageType:j.S,material:x.NONE,damages:[],effects:[],apIds:[]})),Ea.dispatch(Le((da={id:0,name:"Custom Target",overrideDefault:!0,addMods:!1,level:1,useDefaultAC:!0,defaultAC:R.HIGH},Object(g.a)(da,I.AC,16),Object(g.a)(da,"useDefaultFort",!0),Object(g.a)(da,"defaultFort",O.MODERATE),Object(g.a)(da,I.FORT,7),Object(g.a)(da,"useDefaultRef",!0),Object(g.a)(da,"defaultRef",O.MODERATE),Object(g.a)(da,I.REF,7),Object(g.a)(da,"useDefaultWill",!0),Object(g.a)(da,"defaultWill",O.MODERATE),Object(g.a)(da,I.WILL,7),Object(g.a)(da,"useDefaultPer",!0),Object(g.a)(da,"defaultPer",O.MODERATE),Object(g.a)(da,I.PER,7),Object(g.a)(da,"flatfooted",!1),Object(g.a)(da,"weaknesses",[]),da)));var ba=Ea;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));v.a.render(m.a.createElement(m.a.StrictMode,null,m.a.createElement(E.a,{store:ba},m.a.createElement(oa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(190)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.83834356.chunk.js.map